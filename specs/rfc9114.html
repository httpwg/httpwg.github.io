<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>RFC 9114 - HTTP/3</title><script>
function getMeta(rfcno, container) {
  var xhr = new XMLHttpRequest();
  xhr.open("GET", "https://www.rfc-editor.org/rfc/rfc" + rfcno + ".json", true);
  xhr.onload = function (e) {
    if (xhr.readyState === 4) {
      if (xhr.status === 200) {
        var data = JSON.parse(xhr.response);
        
        var cont = document.getElementById(container);
        // empty the container
        while (cont.firstChild) {
          cont.removeChild(myNode.firstChild);
        }

        var c = data.status;
        if (c) {
          var bld = newElementWithText("b", c);
          cont.appendChild(bld);
        } else {
          cont.appendChild(newElementWithText("i", "(document status unknown)"));
        }

        c = data.updated_by;
        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
          cont.appendChild(newElement("br"));
          cont.appendChild(newText("Updated by: "));
          appendRfcLinks(cont, c);
        }

        c = data.obsoleted_by;
        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
          cont.appendChild(newElement("br"));
          cont.appendChild(newText("Obsoleted by: "));
          appendRfcLinks(cont, c);
        }

        c = data.errata_url;
        if (c) {
          cont.appendChild(newElement("br"));
          var link = newElementWithText("a", "errata");
          link.setAttribute("href", c);
          var errata = newElementWithText("i", "This document has ");
          errata.appendChild(link);
          errata.appendChild(newText("."));
          cont.appendChild(errata);
        }

        cont.style.display = "block";
      } else {
        console.error(xhr.statusText);
      }
    }
  };
  xhr.onerror = function (e) {
    console.error(xhr.status + " " + xhr.statusText);
  };
  xhr.send(null);
}
function appendRfcLinks(parent, updates) {
  var template = "https://www.rfc-editor.org/rfc/rfc{rfc}.html";
  for (var i = 0; i < updates.length; i++) {
    var rfc = updates[i].trim().toLowerCase();
    if (rfc.substring(0, 3) == "rfc") {
      var no = parseInt(rfc.substring(3), 10);
      
      var link = newElement("a");
      link.setAttribute("href", template.replace("{rfc}", no));
      link.appendChild(newText(no));
      parent.appendChild(link);
    } else {
      parent.appendChild(newText(rfc));
    }
    if (i != updates.length - 1) {
      parent.appendChild(newText(", "));
    }
  }
}

// DOM helpers
function newElement(name) {
  return document.createElement(name);
}
function newElementWithText(name, txt) {
  var e = document.createElement(name);
  e.appendChild(newText(txt));
  return e;
}
function newText(text) {
  return document.createTextNode(text);
}
</script><script>
function anchorRewrite() {
  map = { };
  if (window.location.hash.length >= 1) {
    var fragid = window.location.hash.substr(1);
    if (fragid) {
      if (! document.getElementById(fragid)) {
        var prefix = "rfc.";
        var mapped = map[fragid];
        if (mapped) {
          window.location.hash = mapped;
        } else if (fragid.indexOf("section-") == 0) {
          window.location.hash = prefix + "section." + fragid.substring(8).replace("-",".p.");
        } else if (fragid.indexOf("appendix-") == 0) {
          window.location.hash = prefix + "section." + fragid.substring(9).replace("-",".p.");
        } else if (fragid.indexOf("s-") == 0) {
          var postfix = fragid.substring(2);
          if (postfix.startsWith("abstract")) {
            window.location.hash = prefix + postfix;
          } else if (postfix.startsWith("note-")) {
            window.location.hash = prefix + "note." + postfix.substring(5).replace("-",".p.");
          } else {
            window.location.hash = prefix + "section." + postfix.replace("-",".p.");
          }
        } else if (fragid.indexOf("p-") == 0) {
          var r = fragid.substring(2);
          var p = r.indexOf("-");
          if (p >= 0) {
            window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
          }
        }
      }
    }  
  }
}
window.addEventListener('hashchange', anchorRewrite);
window.addEventListener('DOMContentLoaded', anchorRewrite);
</script><meta name="viewport" content="width=device-width, initial-scale=1"><meta property="og:type" content="article"><meta property="og:title" content="RFC9114"><meta property="og:description" content="HTTP/3"><meta property="og:url" content="https://httpwg.org/specs/rfc9114.html"><meta property="og:site_name" content="IETF HTTP Working Group Specifications"><meta property="og:image" content="https://httpwg.org/assets/favicon/apple-icon-180x180.png"><link rel="stylesheet" type="text/css" href="/assets/node_modules/bootstrap/dist/css/bootstrap.min.css"><style type="text/css">
      body {
        padding-top: 80px;
        padding-bottom: 80px;
        position: relative;
      }
      .table.header th, .table.header td {
        border-top: none;
        padding: 0;
      }
      #sidebar {
        margin-top: -10px;
        height: 90%;
        overflow-y: auto;
        font-size: 90%;
      }
      #rfc\.meta {
        width: 40%;
        float: right
      }
      .toc ul {
        list-style: none;
      }
      .filename {
        color: rgb(119, 119, 119);
        font-size: 23px;
        font-weight: normal;
        height: auto;
        line-height: 23px;
      }
      dl {
        margin-left: 1em;
      }
      dl.dl-horizontal: {
        margin-left: 0;
      }
      dl > dt {
        float: left;
        margin-right: 1em;
      }
      dl.nohang > dt {
        float: none;
      }
      dl > dd {
        margin-bottom: .5em;
      }
      dl.compact > dd {
        margin-bottom: 0em;
      }
      dl > dd > dl {
        margin-top: 0.5em;
        margin-bottom: 0em;
      }
      ul.empty {
        list-style-type: none;
      }
      ul.empty li {
        margin-top: .5em;
      }
      td.reference {
        padding-right: 1em;
        vertical-align: top;
      }
      .feedback {
        position: fixed;
        bottom: 5px;
        right: 5px;
      }
      .fbbutton {
        margin-left: 5px;
      }
      h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
        color: rgb(51, 51, 51);
      }
      span.tt {
        font: 11pt consolas, monospace;
        font-size-adjust: none;
      }
    </style><link rel="stylesheet" type="text/css" href="/assets/site.css"><link rel="Contents" href="#rfc.toc"><link rel="Author" href="#rfc.authors"><link rel="License" href="#rfc.copyrightnotice"><link rel="Index" href="#rfc.index"><link rel="Chapter" title="1 Introduction" href="#rfc.section.1"><link rel="Chapter" title="2 HTTP/3 Protocol Overview" href="#rfc.section.2"><link rel="Chapter" title="3 Connection Setup and Management" href="#rfc.section.3"><link rel="Chapter" title="4 Expressing HTTP Semantics in HTTP/3" href="#rfc.section.4"><link rel="Chapter" title="5 Connection Closure" href="#rfc.section.5"><link rel="Chapter" title="6 Stream Mapping and Usage" href="#rfc.section.6"><link rel="Chapter" title="7 HTTP Framing Layer" href="#rfc.section.7"><link rel="Chapter" title="8 Error Handling" href="#rfc.section.8"><link rel="Chapter" title="9 Extensions to HTTP/3" href="#rfc.section.9"><link rel="Chapter" title="10 Security Considerations" href="#rfc.section.10"><link rel="Chapter" title="11 IANA Considerations" href="#rfc.section.11"><link rel="Chapter" title="12 References" href="#rfc.section.12"><link rel="Appendix" title="A Considerations for Transitioning from HTTP/2" href="#rfc.section.A"><link rel="Appendix" title="Acknowledgments" href="#rfc.section.unnumbered-4"><link href="https://dx.doi.org/10.17487/rfc9114" rel="alternate"><link href="urn:issn:2070-1721" rel="alternate"><link href="https://datatracker.ietf.org/doc/draft-ietf-quic-http-latest" rel="prev"><link rel="Alternate" title="Plain Text Version" href="http://www.ietf.org/rfc/rfc9114.txt"><link rel="Help" title="RFC-Editor's Status Page" href="https://www.rfc-editor.org/info/rfc9114"><meta name="viewport" content="initial-scale=1"><meta name="generator" content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/"><meta name="keywords" content="HTTP/2, HPACK, QPACK, Web"><link rel="schema.dcterms" href="http://purl.org/dc/terms/"><meta name="dcterms.creator" content="Bishop, M."><meta name="dcterms.identifier" content="urn:ietf:rfc:9114"><meta name="dcterms.issued" content="2022-06"><meta name="dcterms.abstract" content="The QUIC transport protocol has several features that are desirable in a transport for HTTP, such as stream multiplexing, per-stream flow control, and low-latency connection establishment. This document describes a mapping of HTTP semantics over QUIC. This document also identifies HTTP/2 features that are subsumed by QUIC and describes how HTTP/2 extensions can be ported to HTTP/3."><meta name="dcterms.isPartOf" content="urn:issn:2070-1721"><meta name="description" content="The QUIC transport protocol has several features that are desirable in a transport for HTTP, such as stream multiplexing, per-stream flow control, and low-latency connection establishment. This document describes a mapping of HTTP semantics over QUIC. This document also identifies HTTP/2 features that are subsumed by QUIC and describes how HTTP/2 extensions can be ported to HTTP/3."></head><body onload="getMeta(9114,&#34;rfc.meta&#34;);"><nav class="navbar navbar-dark bg-dark d-print-none navbar-expand-lg fixed-top ps-3 pe-3" role="navigation">
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="navbar-header">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapse" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    
    <a class="navbar-brand" href="https://httpwg.org/"><img src="https://httpwg.org/assets/http.svg" height="23"></a>
  </div>
  
  <div class="collapse navbar-collapse" id="navbar-collapse">
      
    <div class="navbar-nav me-auto">

      <a class="nav-item ms-1 text-white" href="https://httpwg.org/specs/">ðŸ“„ Documentation</a>

      <div class="dropdown ms-4">
        <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Work in Progress</a>
          <ul class="dropdown-menu"><li class="dropdown-item"><a href="https://httpwg.org/http-extensions/">HTTP Extensions</a></li><li class="dropdown-item"><a href="https://github.com/httpwg/admin/issues?q=is%3Aissue+is%3Aopen+label%3Aadoption">Future Work</a></li></ul>
      </div>

      <div class="dropdown ms-4">
        <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Participate</a>
          <ul class="dropdown-menu"><li class="dropdown-item"><a href="https://httpwg.org/about/">About the HTTP Working Group</a></li><li class="divider"></li><li class="dropdown-item"><a href="https://httpwg.org/CONTRIBUTING.html">Contribution Policy</a></li><li class="dropdown-item"><a href="http://datatracker.ietf.org/wg/httpbis/charter/">WG Charter</a></li><li class="dropdown-item"><a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">Group Mailing List ðŸ“¨</a></li><li class="dropdown-item"><a href="https://httpwg.org/wg-materials/">Meeting Materials</a></li><li class="dropdown-item"><a href="https://httpwg.org/admin/editors/">Document Editor Resources</a></li></ul>
      </div>
    </div>
            
    <div class="nav navbar-nav ms-auto">
      <a class="navbar" href="https://twitter.com/http_wg">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon  twtr-color-fill--blue-dark  has-hover"><path opacity="0" d="M0 0h24v24H0z"/><path d="M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572 0-4.658 2.086-4.658 4.66 0 .364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342 0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.392.106-.803.162-1.227.162-.3 0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376 0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57 0 13.255-7.098 13.255-13.254 0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"/></svg>
      </a>
    </div>
  </div>
</nav><div class="container" id="top"><div class="row"><div class="col-lg-4 order-last d-none d-lg-block" id="sidebar" role="navigation"><div class="navbar"><div class="navbar-brand"><a href="#top"><strong>RFC </strong>9114</a></div><br clear="all"><div class=""><div class="toc "><ul><li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">Introduction</a><ul><li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a href="#prior-versions-of-http">Prior Versions of HTTP</a></li><li><a href="#rfc.section.1.2">1.2.</a>&nbsp;&nbsp;&nbsp;<a href="#delegation-to-quic">Delegation to QUIC</a></li></ul></li><li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#http3-protocol-overview">HTTP/3 Protocol Overview</a><ul><li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#document-organization">Document Organization</a></li><li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#conventions-and-terminology">Conventions and Terminology</a></li></ul></li><li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#connection-setup">Connection Setup and Management</a><ul><li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a href="#discovery">Discovering an HTTP/3 Endpoint</a><ul><li><a href="#rfc.section.3.1.1">3.1.1.</a>&nbsp;&nbsp;&nbsp;<a href="#alt-svc">HTTP Alternative Services</a></li><li><a href="#rfc.section.3.1.2">3.1.2.</a>&nbsp;&nbsp;&nbsp;<a href="#other-schemes">Other Schemes</a></li></ul></li><li><a href="#rfc.section.3.2">3.2.</a>&nbsp;&nbsp;&nbsp;<a href="#connection-establishment">Connection Establishment</a></li><li><a href="#rfc.section.3.3">3.3.</a>&nbsp;&nbsp;&nbsp;<a href="#connection-reuse">Connection Reuse</a></li></ul></li><li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#http-request-lifecycle">Expressing HTTP Semantics in HTTP/3</a><ul><li><a href="#rfc.section.4.1">4.1.</a>&nbsp;&nbsp;&nbsp;<a href="#request-response">HTTP Message Framing</a><ul><li><a href="#rfc.section.4.1.1">4.1.1.</a>&nbsp;&nbsp;&nbsp;<a href="#request-cancellation">Request Cancellation and Rejection</a></li><li><a href="#rfc.section.4.1.2">4.1.2.</a>&nbsp;&nbsp;&nbsp;<a href="#malformed">Malformed Requests and Responses</a></li></ul></li><li><a href="#rfc.section.4.2">4.2.</a>&nbsp;&nbsp;&nbsp;<a href="#header-formatting">HTTP Fields</a><ul><li><a href="#rfc.section.4.2.1">4.2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#field-compression">Field Compression</a></li><li><a href="#rfc.section.4.2.2">4.2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#header-size-constraints">Header Size Constraints</a></li></ul></li><li><a href="#rfc.section.4.3">4.3.</a>&nbsp;&nbsp;&nbsp;<a href="#http-control-data">HTTP Control Data</a><ul><li><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;&nbsp;&nbsp;<a href="#request-pseudo-header-fields">Request Pseudo-Header Fields</a></li><li><a href="#rfc.section.4.3.2">4.3.2.</a>&nbsp;&nbsp;&nbsp;<a href="#response-pseudo-header-fields">Response Pseudo-Header Fields</a></li></ul></li><li><a href="#rfc.section.4.4">4.4.</a>&nbsp;&nbsp;&nbsp;<a href="#connect">The CONNECT Method</a></li><li><a href="#rfc.section.4.5">4.5.</a>&nbsp;&nbsp;&nbsp;<a href="#http-upgrade">HTTP Upgrade</a></li><li><a href="#rfc.section.4.6">4.6.</a>&nbsp;&nbsp;&nbsp;<a href="#server-push">Server Push</a></li></ul></li><li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#connection-closure">Connection Closure</a><ul><li><a href="#rfc.section.5.1">5.1.</a>&nbsp;&nbsp;&nbsp;<a href="#idle-connections">Idle Connections</a></li><li><a href="#rfc.section.5.2">5.2.</a>&nbsp;&nbsp;&nbsp;<a href="#connection-shutdown">Connection Shutdown</a></li><li><a href="#rfc.section.5.3">5.3.</a>&nbsp;&nbsp;&nbsp;<a href="#immediate-application-closure">Immediate Application Closure</a></li><li><a href="#rfc.section.5.4">5.4.</a>&nbsp;&nbsp;&nbsp;<a href="#transport-closure">Transport Closure</a></li></ul></li><li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#stream-mapping">Stream Mapping and Usage</a><ul><li><a href="#rfc.section.6.1">6.1.</a>&nbsp;&nbsp;&nbsp;<a href="#request-streams">Bidirectional Streams</a></li><li><a href="#rfc.section.6.2">6.2.</a>&nbsp;&nbsp;&nbsp;<a href="#unidirectional-streams">Unidirectional Streams</a><ul><li><a href="#rfc.section.6.2.1">6.2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#control-streams">Control Streams</a></li><li><a href="#rfc.section.6.2.2">6.2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#push-streams">Push Streams</a></li><li><a href="#rfc.section.6.2.3">6.2.3.</a>&nbsp;&nbsp;&nbsp;<a href="#stream-grease">Reserved Stream Types</a></li></ul></li></ul></li><li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#http-framing-layer">HTTP Framing Layer</a><ul><li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-layout">Frame Layout</a></li><li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a href="#frames">Frame Definitions</a><ul><li><a href="#rfc.section.7.2.1">7.2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-data">DATA</a></li><li><a href="#rfc.section.7.2.2">7.2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-headers">HEADERS</a></li><li><a href="#rfc.section.7.2.3">7.2.3.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-cancel-push">CANCEL_PUSH</a></li><li><a href="#rfc.section.7.2.4">7.2.4.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-settings">SETTINGS</a></li><li><a href="#rfc.section.7.2.5">7.2.5.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-push-promise">PUSH_PROMISE</a></li><li><a href="#rfc.section.7.2.6">7.2.6.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-goaway">GOAWAY</a></li><li><a href="#rfc.section.7.2.7">7.2.7.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-max-push-id">MAX_PUSH_ID</a></li><li><a href="#rfc.section.7.2.8">7.2.8.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-reserved">Reserved Frame Types</a></li></ul></li></ul></li><li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a href="#errors">Error Handling</a><ul><li><a href="#rfc.section.8.1">8.1.</a>&nbsp;&nbsp;&nbsp;<a href="#http-error-codes">HTTP/3 Error Codes</a></li></ul></li><li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a href="#extensions">Extensions to HTTP/3</a></li><li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a href="#security-considerations">Security Considerations</a><ul><li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a href="#server-authority">Server Authority</a></li><li><a href="#rfc.section.10.2">10.2.</a>&nbsp;&nbsp;&nbsp;<a href="#cross-protocol-attacks">Cross-Protocol Attacks</a></li><li><a href="#rfc.section.10.3">10.3.</a>&nbsp;&nbsp;&nbsp;<a href="#intermediary-encapsulation-attacks">Intermediary-Encapsulation Attacks</a></li><li><a href="#rfc.section.10.4">10.4.</a>&nbsp;&nbsp;&nbsp;<a href="#cacheability-of-pushed-responses">Cacheability of Pushed Responses</a></li><li><a href="#rfc.section.10.5">10.5.</a>&nbsp;&nbsp;&nbsp;<a href="#denial-of-service-considerations">Denial-of-Service Considerations</a><ul><li><a href="#rfc.section.10.5.1">10.5.1.</a>&nbsp;&nbsp;&nbsp;<a href="#limits-on-field-section-size">Limits on Field Section Size</a></li><li><a href="#rfc.section.10.5.2">10.5.2.</a>&nbsp;&nbsp;&nbsp;<a href="#connect-issues">CONNECT Issues</a></li></ul></li><li><a href="#rfc.section.10.6">10.6.</a>&nbsp;&nbsp;&nbsp;<a href="#use-of-compression">Use of Compression</a></li><li><a href="#rfc.section.10.7">10.7.</a>&nbsp;&nbsp;&nbsp;<a href="#padding-and-traffic-analysis">Padding and Traffic Analysis</a></li><li><a href="#rfc.section.10.8">10.8.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-parsing">Frame Parsing</a></li><li><a href="#rfc.section.10.9">10.9.</a>&nbsp;&nbsp;&nbsp;<a href="#early-data">Early Data</a></li><li><a href="#rfc.section.10.10">10.10.</a>&nbsp;&nbsp;&nbsp;<a href="#migration">Migration</a></li><li><a href="#rfc.section.10.11">10.11.</a>&nbsp;&nbsp;&nbsp;<a href="#privacy-considerations">Privacy Considerations</a></li></ul></li><li><a href="#rfc.section.11">11.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA Considerations</a><ul><li><a href="#rfc.section.11.1">11.1.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-alpn">Registration of HTTP/3 Identification String</a></li><li><a href="#rfc.section.11.2">11.2.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-policy">New Registries</a><ul><li><a href="#rfc.section.11.2.1">11.2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-frames">Frame Types</a></li><li><a href="#rfc.section.11.2.2">11.2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-settings">Settings Parameters</a></li><li><a href="#rfc.section.11.2.3">11.2.3.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-error-codes">Error Codes</a></li><li><a href="#rfc.section.11.2.4">11.2.4.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-stream-types">Stream Types</a></li></ul></li></ul></li><li><a href="#rfc.section.12">12.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">References</a><ul><li><a href="#rfc.section.12.1">12.1.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references.2">Normative References</a></li><li><a href="#rfc.section.12.2">12.2.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references.3">Informative References</a></li></ul></li><li><a href="#rfc.section.A">Appendix A.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-considerations">Considerations for Transitioning from HTTP/2</a><ul><li><a href="#rfc.section.A.1">A.1.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-streams">Streams</a></li><li><a href="#rfc.section.A.2">A.2.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-frames">HTTP Frame Types</a><ul><li><a href="#rfc.section.A.2.1">A.2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-diff-priority">Prioritization Differences</a></li><li><a href="#rfc.section.A.2.2">A.2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#field-compression-differences">Field Compression Differences</a></li><li><a href="#rfc.section.A.2.3">A.2.3.</a>&nbsp;&nbsp;&nbsp;<a href="#flow-control-differences">Flow-Control Differences</a></li><li><a href="#rfc.section.A.2.4">A.2.4.</a>&nbsp;&nbsp;&nbsp;<a href="#guidance-for-new-frame-type-definitions">Guidance for New Frame Type Definitions</a></li><li><a href="#rfc.section.A.2.5">A.2.5.</a>&nbsp;&nbsp;&nbsp;<a href="#comparison-of-http2-and-http3-frame-types">Comparison of HTTP/2 and HTTP/3 Frame Types</a></li></ul></li><li><a href="#rfc.section.A.3">A.3.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-settings">HTTP/2 SETTINGS Parameters</a></li><li><a href="#rfc.section.A.4">A.4.</a>&nbsp;&nbsp;&nbsp;<a href="#http2-error-codes">HTTP/2 Error Codes</a><ul><li><a href="#rfc.section.A.4.1">A.4.1.</a>&nbsp;&nbsp;&nbsp;<a href="#mapping-between-http2-and-http3-errors">Mapping between HTTP/2 and HTTP/3 Errors</a></li></ul></li></ul></li><li><a href="#acknowledgments">Acknowledgments</a></li><li><a href="#rfc.index">Index</a></li><li><a href="#rfc.authors">Author's Address</a></li></ul></div></div></div></div><div class="col-lg-8 order-first main" role="main"><header><table class="table table-condensed header" id="rfc.headerblock"><tbody><tr><td class="text-left">Internet Engineering Task Force (IETF)</td><td class="text-right">M. Bishop, Editor</td></tr><tr><td class="text-left">Request for Comments: 9114</td><td class="text-right">Akamai</td></tr><tr><td class="text-left">Category: Standards Track</td><td class="text-right">June 2022</td></tr><tr><td class="text-left">ISSN: 2070-1721</td><td class="text-right"></td></tr></tbody></table><div id="rfc.title"><h1>HTTP/3</h1></div></header><hr><h2 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h2><div class="lead"><div id="rfc.abstract.p.1"><p>The QUIC transport protocol has several features that are desirable in a transport for HTTP, such as stream multiplexing, per-stream flow control, and low-latency connection establishment. This document describes a mapping of HTTP semantics over QUIC. This document also identifies HTTP/2 features that are subsumed by QUIC and describes how HTTP/2 extensions can be ported to HTTP/3.</p></div></div><aside id="rfc.meta" class="alert alert-info"></aside><section id="rfc.status"><h2><a href="#rfc.status">Status of This Memo</a></h2><div id="rfc.boilerplate.1.p.1"><p>This is an Internet Standards Track document.</p></div><div id="rfc.boilerplate.1.p.2"><p>This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Further information on Internet Standards is available in <a href="https://www.rfc-editor.org/rfc/rfc7841.html#section-2">Section 2 of RFC 7841</a>.</p></div><div id="rfc.boilerplate.1.p.3"><p>Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at <a href="https://www.rfc-editor.org/info/rfc9114">https://www.rfc-editor.org/info/rfc9114</a>.</p></div></section><section id="rfc.copyrightnotice"><h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2><div id="rfc.boilerplate.2.p.1"><p>Copyright (c) 2022 IETF Trust and the persons identified as the document authors. All rights reserved.</p></div><div id="rfc.boilerplate.2.p.2"><p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Revised BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Revised BSD License.</p></div></section><div class="toc d-lg-none"><ul><li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">Introduction</a><ul><li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a href="#prior-versions-of-http">Prior Versions of HTTP</a></li><li><a href="#rfc.section.1.2">1.2.</a>&nbsp;&nbsp;&nbsp;<a href="#delegation-to-quic">Delegation to QUIC</a></li></ul></li><li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#http3-protocol-overview">HTTP/3 Protocol Overview</a><ul><li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#document-organization">Document Organization</a></li><li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#conventions-and-terminology">Conventions and Terminology</a></li></ul></li><li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#connection-setup">Connection Setup and Management</a><ul><li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a href="#discovery">Discovering an HTTP/3 Endpoint</a><ul><li><a href="#rfc.section.3.1.1">3.1.1.</a>&nbsp;&nbsp;&nbsp;<a href="#alt-svc">HTTP Alternative Services</a></li><li><a href="#rfc.section.3.1.2">3.1.2.</a>&nbsp;&nbsp;&nbsp;<a href="#other-schemes">Other Schemes</a></li></ul></li><li><a href="#rfc.section.3.2">3.2.</a>&nbsp;&nbsp;&nbsp;<a href="#connection-establishment">Connection Establishment</a></li><li><a href="#rfc.section.3.3">3.3.</a>&nbsp;&nbsp;&nbsp;<a href="#connection-reuse">Connection Reuse</a></li></ul></li><li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#http-request-lifecycle">Expressing HTTP Semantics in HTTP/3</a><ul><li><a href="#rfc.section.4.1">4.1.</a>&nbsp;&nbsp;&nbsp;<a href="#request-response">HTTP Message Framing</a><ul><li><a href="#rfc.section.4.1.1">4.1.1.</a>&nbsp;&nbsp;&nbsp;<a href="#request-cancellation">Request Cancellation and Rejection</a></li><li><a href="#rfc.section.4.1.2">4.1.2.</a>&nbsp;&nbsp;&nbsp;<a href="#malformed">Malformed Requests and Responses</a></li></ul></li><li><a href="#rfc.section.4.2">4.2.</a>&nbsp;&nbsp;&nbsp;<a href="#header-formatting">HTTP Fields</a><ul><li><a href="#rfc.section.4.2.1">4.2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#field-compression">Field Compression</a></li><li><a href="#rfc.section.4.2.2">4.2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#header-size-constraints">Header Size Constraints</a></li></ul></li><li><a href="#rfc.section.4.3">4.3.</a>&nbsp;&nbsp;&nbsp;<a href="#http-control-data">HTTP Control Data</a><ul><li><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;&nbsp;&nbsp;<a href="#request-pseudo-header-fields">Request Pseudo-Header Fields</a></li><li><a href="#rfc.section.4.3.2">4.3.2.</a>&nbsp;&nbsp;&nbsp;<a href="#response-pseudo-header-fields">Response Pseudo-Header Fields</a></li></ul></li><li><a href="#rfc.section.4.4">4.4.</a>&nbsp;&nbsp;&nbsp;<a href="#connect">The CONNECT Method</a></li><li><a href="#rfc.section.4.5">4.5.</a>&nbsp;&nbsp;&nbsp;<a href="#http-upgrade">HTTP Upgrade</a></li><li><a href="#rfc.section.4.6">4.6.</a>&nbsp;&nbsp;&nbsp;<a href="#server-push">Server Push</a></li></ul></li><li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#connection-closure">Connection Closure</a><ul><li><a href="#rfc.section.5.1">5.1.</a>&nbsp;&nbsp;&nbsp;<a href="#idle-connections">Idle Connections</a></li><li><a href="#rfc.section.5.2">5.2.</a>&nbsp;&nbsp;&nbsp;<a href="#connection-shutdown">Connection Shutdown</a></li><li><a href="#rfc.section.5.3">5.3.</a>&nbsp;&nbsp;&nbsp;<a href="#immediate-application-closure">Immediate Application Closure</a></li><li><a href="#rfc.section.5.4">5.4.</a>&nbsp;&nbsp;&nbsp;<a href="#transport-closure">Transport Closure</a></li></ul></li><li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#stream-mapping">Stream Mapping and Usage</a><ul><li><a href="#rfc.section.6.1">6.1.</a>&nbsp;&nbsp;&nbsp;<a href="#request-streams">Bidirectional Streams</a></li><li><a href="#rfc.section.6.2">6.2.</a>&nbsp;&nbsp;&nbsp;<a href="#unidirectional-streams">Unidirectional Streams</a><ul><li><a href="#rfc.section.6.2.1">6.2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#control-streams">Control Streams</a></li><li><a href="#rfc.section.6.2.2">6.2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#push-streams">Push Streams</a></li><li><a href="#rfc.section.6.2.3">6.2.3.</a>&nbsp;&nbsp;&nbsp;<a href="#stream-grease">Reserved Stream Types</a></li></ul></li></ul></li><li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#http-framing-layer">HTTP Framing Layer</a><ul><li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-layout">Frame Layout</a></li><li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a href="#frames">Frame Definitions</a><ul><li><a href="#rfc.section.7.2.1">7.2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-data">DATA</a></li><li><a href="#rfc.section.7.2.2">7.2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-headers">HEADERS</a></li><li><a href="#rfc.section.7.2.3">7.2.3.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-cancel-push">CANCEL_PUSH</a></li><li><a href="#rfc.section.7.2.4">7.2.4.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-settings">SETTINGS</a></li><li><a href="#rfc.section.7.2.5">7.2.5.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-push-promise">PUSH_PROMISE</a></li><li><a href="#rfc.section.7.2.6">7.2.6.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-goaway">GOAWAY</a></li><li><a href="#rfc.section.7.2.7">7.2.7.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-max-push-id">MAX_PUSH_ID</a></li><li><a href="#rfc.section.7.2.8">7.2.8.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-reserved">Reserved Frame Types</a></li></ul></li></ul></li><li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a href="#errors">Error Handling</a><ul><li><a href="#rfc.section.8.1">8.1.</a>&nbsp;&nbsp;&nbsp;<a href="#http-error-codes">HTTP/3 Error Codes</a></li></ul></li><li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a href="#extensions">Extensions to HTTP/3</a></li><li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a href="#security-considerations">Security Considerations</a><ul><li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a href="#server-authority">Server Authority</a></li><li><a href="#rfc.section.10.2">10.2.</a>&nbsp;&nbsp;&nbsp;<a href="#cross-protocol-attacks">Cross-Protocol Attacks</a></li><li><a href="#rfc.section.10.3">10.3.</a>&nbsp;&nbsp;&nbsp;<a href="#intermediary-encapsulation-attacks">Intermediary-Encapsulation Attacks</a></li><li><a href="#rfc.section.10.4">10.4.</a>&nbsp;&nbsp;&nbsp;<a href="#cacheability-of-pushed-responses">Cacheability of Pushed Responses</a></li><li><a href="#rfc.section.10.5">10.5.</a>&nbsp;&nbsp;&nbsp;<a href="#denial-of-service-considerations">Denial-of-Service Considerations</a><ul><li><a href="#rfc.section.10.5.1">10.5.1.</a>&nbsp;&nbsp;&nbsp;<a href="#limits-on-field-section-size">Limits on Field Section Size</a></li><li><a href="#rfc.section.10.5.2">10.5.2.</a>&nbsp;&nbsp;&nbsp;<a href="#connect-issues">CONNECT Issues</a></li></ul></li><li><a href="#rfc.section.10.6">10.6.</a>&nbsp;&nbsp;&nbsp;<a href="#use-of-compression">Use of Compression</a></li><li><a href="#rfc.section.10.7">10.7.</a>&nbsp;&nbsp;&nbsp;<a href="#padding-and-traffic-analysis">Padding and Traffic Analysis</a></li><li><a href="#rfc.section.10.8">10.8.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-parsing">Frame Parsing</a></li><li><a href="#rfc.section.10.9">10.9.</a>&nbsp;&nbsp;&nbsp;<a href="#early-data">Early Data</a></li><li><a href="#rfc.section.10.10">10.10.</a>&nbsp;&nbsp;&nbsp;<a href="#migration">Migration</a></li><li><a href="#rfc.section.10.11">10.11.</a>&nbsp;&nbsp;&nbsp;<a href="#privacy-considerations">Privacy Considerations</a></li></ul></li><li><a href="#rfc.section.11">11.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA Considerations</a><ul><li><a href="#rfc.section.11.1">11.1.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-alpn">Registration of HTTP/3 Identification String</a></li><li><a href="#rfc.section.11.2">11.2.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-policy">New Registries</a><ul><li><a href="#rfc.section.11.2.1">11.2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-frames">Frame Types</a></li><li><a href="#rfc.section.11.2.2">11.2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-settings">Settings Parameters</a></li><li><a href="#rfc.section.11.2.3">11.2.3.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-error-codes">Error Codes</a></li><li><a href="#rfc.section.11.2.4">11.2.4.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-stream-types">Stream Types</a></li></ul></li></ul></li><li><a href="#rfc.section.12">12.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">References</a><ul><li><a href="#rfc.section.12.1">12.1.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references.2">Normative References</a></li><li><a href="#rfc.section.12.2">12.2.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references.3">Informative References</a></li></ul></li><li><a href="#rfc.section.A">Appendix A.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-considerations">Considerations for Transitioning from HTTP/2</a><ul><li><a href="#rfc.section.A.1">A.1.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-streams">Streams</a></li><li><a href="#rfc.section.A.2">A.2.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-frames">HTTP Frame Types</a><ul><li><a href="#rfc.section.A.2.1">A.2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-diff-priority">Prioritization Differences</a></li><li><a href="#rfc.section.A.2.2">A.2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#field-compression-differences">Field Compression Differences</a></li><li><a href="#rfc.section.A.2.3">A.2.3.</a>&nbsp;&nbsp;&nbsp;<a href="#flow-control-differences">Flow-Control Differences</a></li><li><a href="#rfc.section.A.2.4">A.2.4.</a>&nbsp;&nbsp;&nbsp;<a href="#guidance-for-new-frame-type-definitions">Guidance for New Frame Type Definitions</a></li><li><a href="#rfc.section.A.2.5">A.2.5.</a>&nbsp;&nbsp;&nbsp;<a href="#comparison-of-http2-and-http3-frame-types">Comparison of HTTP/2 and HTTP/3 Frame Types</a></li></ul></li><li><a href="#rfc.section.A.3">A.3.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-settings">HTTP/2 SETTINGS Parameters</a></li><li><a href="#rfc.section.A.4">A.4.</a>&nbsp;&nbsp;&nbsp;<a href="#http2-error-codes">HTTP/2 Error Codes</a><ul><li><a href="#rfc.section.A.4.1">A.4.1.</a>&nbsp;&nbsp;&nbsp;<a href="#mapping-between-http2-and-http3-errors">Mapping between HTTP/2 and HTTP/3 Errors</a></li></ul></li></ul></li><li><a href="#acknowledgments">Acknowledgments</a></li><li><a href="#rfc.index">Index</a></li><li><a href="#rfc.authors">Author's Address</a></li></ul></div><hr class="hidden-print"><section id="introduction"><h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a href="#introduction">Introduction</a></h2><div id="rfc.section.1.p.1"><p>HTTP semantics (<a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>) are used for a broad range of services on the Internet. These semantics have most commonly been used with HTTP/1.1 and HTTP/2. HTTP/1.1 has been used over a variety of transport and session layers, while HTTP/2 has been used primarily with TLS over TCP. HTTP/3 supports the same semantics over a new transport protocol: QUIC.</p></div><section id="prior-versions-of-http"><h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a>&nbsp;<a href="#prior-versions-of-http">Prior Versions of HTTP</a></h3><div id="rfc.section.1.1.p.1"><p>HTTP/1.1 (<a href="#RFC9112"><cite title="HTTP/1.1">[HTTP/1.1]</cite></a>) uses whitespace-delimited text fields to convey HTTP messages. While these exchanges are human readable, using whitespace for message formatting leads to parsing complexity and excessive tolerance of variant behavior.</p></div><div id="rfc.section.1.1.p.2"><p>Because HTTP/1.1 does not include a multiplexing layer, multiple TCP connections are often used to service requests in parallel. However, that has a negative impact on congestion control and network efficiency, since TCP does not share congestion control across multiple connections.</p></div><div id="rfc.section.1.1.p.3"><p>HTTP/2 (<a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a>) introduced a binary framing and multiplexing layer to improve latency without modifying the transport layer. However, because the parallel nature of HTTP/2's multiplexing is not visible to TCP's loss recovery mechanisms, a lost or reordered packet causes all active transactions to experience a stall regardless of whether that transaction was directly impacted by the lost packet.</p></div></section><section id="delegation-to-quic"><h3 id="rfc.section.1.2"><a href="#rfc.section.1.2">1.2.</a>&nbsp;<a href="#delegation-to-quic">Delegation to QUIC</a></h3><div id="rfc.section.1.2.p.1"><p>The QUIC transport protocol incorporates stream multiplexing and per-stream flow control, similar to that provided by the HTTP/2 framing layer. By providing reliability at the stream level and congestion control across the entire connection, QUIC has the capability to improve the performance of HTTP compared to a TCP mapping. QUIC also incorporates TLS 1.3 (<a href="#TLS"><cite title="The Transport Layer Security (TLS) Protocol Version 1.3">[TLS]</cite></a>) at the transport layer, offering comparable confidentiality and integrity to running TLS over TCP, with the improved connection setup latency of TCP Fast Open (<a href="#TFO"><cite title="TCP Fast Open">[TFO]</cite></a>).</p></div><div id="rfc.section.1.2.p.2"><p>This document defines HTTP/3: a mapping of HTTP semantics over the QUIC transport protocol, drawing heavily on the design of HTTP/2. HTTP/3 relies on QUIC to provide confidentiality and integrity protection of data; peer authentication; and reliable, in-order, per-stream delivery. While delegating stream lifetime and flow-control issues to QUIC, a binary framing similar to the HTTP/2 framing is used on each stream. Some HTTP/2 features are subsumed by QUIC, while other features are implemented atop QUIC.</p></div><div id="rfc.section.1.2.p.3"><p>QUIC is described in <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>. For a full description of HTTP/2, see <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a>.</p></div></section></section><hr class="hidden-print"><section id="http3-protocol-overview"><h2 id="rfc.section.2" class="np"><a href="#rfc.section.2">2.</a>&nbsp;<a href="#http3-protocol-overview">HTTP/3 Protocol Overview</a></h2><div id="rfc.section.2.p.1"><p>HTTP/3 provides a transport for HTTP semantics using the QUIC transport protocol and an internal framing layer similar to HTTP/2.</p></div><div id="rfc.section.2.p.2"><p>Once a client knows that an HTTP/3 server exists at a certain endpoint, it opens a QUIC connection. QUIC provides protocol negotiation, stream-based multiplexing, and flow control. Discovery of an HTTP/3 endpoint is described in <a href="#discovery" title="Discovering an HTTP/3 Endpoint">Section 3.1</a>.</p></div><div id="rfc.section.2.p.3"><p>Within each stream, the basic unit of HTTP/3 communication is a frame (<a href="#frames" title="Frame Definitions">Section 7.2</a>). Each frame type serves a different purpose. For example, <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.1"></span> and <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.1"></span> frames form the basis of HTTP requests and responses (<a href="#request-response" title="HTTP Message Framing">Section 4.1</a>). Frames that apply to the entire connection are conveyed on a dedicated <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.1"></span>.</p></div><div id="rfc.section.2.p.4"><p>Multiplexing of requests is performed using the QUIC stream abstraction, which is described in <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-2">Section 2</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>. Each request-response pair consumes a single QUIC stream. Streams are independent of each other, so one stream that is blocked or suffers packet loss does not prevent progress on other streams.</p></div><div id="rfc.section.2.p.5"><p>Server push is an interaction mode introduced in HTTP/2 (<a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a>) that permits a server to push a request-response exchange to a client in anticipation of the client making the indicated request. This trades off network usage against a potential latency gain. Several HTTP/3 frames are used to manage server push, such as <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.1"></span>, <a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><span id="rfc.iref.m.1"></span>, and <a href="#frame-cancel-push" title="CANCEL_PUSH">CANCEL_PUSH</a><span id="rfc.iref.c.2"></span>.</p></div><div id="rfc.section.2.p.6"><p>As in HTTP/2, request and response fields are compressed for transmission. Because HPACK (<a href="#HPACK"><cite title="HPACK: Header Compression for HTTP/2">[HPACK]</cite></a>) relies on in-order transmission of compressed field sections (a guarantee not provided by QUIC), HTTP/3 replaces HPACK with QPACK (<a href="#RFC9204"><cite title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a>). QPACK uses separate unidirectional streams to modify and track field table state, while encoded field sections refer to the state of the table without modifying it.</p></div><section id="document-organization"><h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a>&nbsp;<a href="#document-organization">Document Organization</a></h3><div id="rfc.section.2.1.p.1" class="avoidbreakafter"><p>The following sections provide a detailed overview of the lifecycle of an HTTP/3 connection:</p></div><div id="rfc.section.2.1.p.2"><ul><li>"<a href="#connection-setup" title="Connection Setup and Management">Connection Setup and Management</a>" (<a href="#connection-setup" title="Connection Setup and Management">Section 3</a>) covers how an HTTP/3 endpoint is discovered and an HTTP/3 connection is established.</li><li>"<a href="#http-request-lifecycle" title="Expressing HTTP Semantics in HTTP/3">Expressing HTTP Semantics in HTTP/3</a>" (<a href="#http-request-lifecycle" title="Expressing HTTP Semantics in HTTP/3">Section 4</a>) describes how HTTP semantics are expressed using frames.</li><li>"<a href="#connection-closure" title="Connection Closure">Connection Closure</a>" (<a href="#connection-closure" title="Connection Closure">Section 5</a>) describes how HTTP/3 connections are terminated, either gracefully or abruptly.</li></ul></div><div id="rfc.section.2.1.p.3" class="avoidbreakafter"><p>The details of the wire protocol and interactions with the transport are described in subsequent sections:</p></div><div id="rfc.section.2.1.p.4"><ul><li>"<a href="#stream-mapping" title="Stream Mapping and Usage">Stream Mapping and Usage</a>" (<a href="#stream-mapping" title="Stream Mapping and Usage">Section 6</a>) describes the way QUIC streams are used.</li><li>"<a href="#http-framing-layer" title="HTTP Framing Layer">HTTP Framing Layer</a>" (<a href="#http-framing-layer" title="HTTP Framing Layer">Section 7</a>) describes the frames used on most streams.</li><li>"<a href="#errors" title="Error Handling">Error Handling</a>" (<a href="#errors" title="Error Handling">Section 8</a>) describes how error conditions are handled and expressed, either on a particular stream or for the connection as a whole.</li></ul></div><div id="rfc.section.2.1.p.5" class="avoidbreakafter"><p>Additional resources are provided in the final sections:</p></div><div id="rfc.section.2.1.p.6"><ul><li>"<a href="#extensions" title="Extensions to HTTP/3">Extensions to HTTP/3</a>" (<a href="#extensions" title="Extensions to HTTP/3">Section 9</a>) describes how new capabilities can be added in future documents.</li><li>A more detailed comparison between HTTP/2 and HTTP/3 can be found in <a href="#h2-considerations" title="Considerations for Transitioning from HTTP/2">Appendix A</a>.</li></ul></div></section><section id="conventions-and-terminology"><h3 id="rfc.section.2.2"><a href="#rfc.section.2.2">2.2.</a>&nbsp;<a href="#conventions-and-terminology">Conventions and Terminology</a></h3><div id="rfc.section.2.2.p.1"><p>The key words "<em class="bcp14">MUST</em>", "<em class="bcp14">MUST NOT</em>", "<em class="bcp14">REQUIRED</em>", "<em class="bcp14">SHALL</em>", "<em class="bcp14">SHALL NOT</em>", "<em class="bcp14">SHOULD</em>", "<em class="bcp14">SHOULD NOT</em>", "<em class="bcp14">RECOMMENDED</em>", "<em class="bcp14">NOT RECOMMENDED</em>", "<em class="bcp14">MAY</em>", and "<em class="bcp14">OPTIONAL</em>" in this document are to be interpreted as described in BCP&nbsp;14 <a href="#RFC2119"><cite title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a> <a href="#RFC8174"><cite title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">[RFC8174]</cite></a> when, and only when, they appear in all capitals, as shown here.</p></div><div id="rfc.section.2.2.p.2"><p>This document uses the variable-length integer encoding from <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>.</p></div><div id="rfc.section.2.2.p.3" class="avoidbreakafter"><p>The following terms are used:</p></div><div id="rfc.section.2.2.p.4"><dl><dt>abort:</dt><dd style="margin-left: 1.5em"><div>An abrupt termination of a connection or stream, possibly due to an error condition.</div></dd><dt>client:</dt><dd style="margin-left: 1.5em"><div>The endpoint that initiates an HTTP/3 connection. Clients send HTTP requests and receive HTTP responses.</div></dd><dt>connection:</dt><dd style="margin-left: 1.5em"><div>A transport-layer connection between two endpoints using QUIC as the transport protocol.</div></dd><dt><a href="#errors" title="Error Handling">connection error</a><div id="rfc.iref.c.3"></div>:</dt><dd style="margin-left: 1.5em"><div>An error that affects the entire HTTP/3 connection.</div></dd><dt>endpoint:</dt><dd style="margin-left: 1.5em"><div>Either the client or server of the connection.</div></dd><dt>frame:</dt><dd style="margin-left: 1.5em"><div>The smallest unit of communication on a stream in HTTP/3, consisting of a header and a variable-length sequence of bytes structured according to the frame type.</div><div>Protocol elements called "frames" exist in both this document and <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>. Where frames from <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a> are referenced, the frame name will be prefaced with "QUIC". For example, "QUIC CONNECTION_CLOSE frames". References without this preface refer to frames defined in <a href="#frames" title="Frame Definitions">Section 7.2</a>.</div></dd><dt>HTTP/3 connection:</dt><dd style="margin-left: 1.5em"><div>A QUIC connection where the negotiated application protocol is HTTP/3.</div></dd><dt>peer:</dt><dd style="margin-left: 1.5em"><div>An endpoint. When discussing a particular endpoint, "peer" refers to the endpoint that is remote to the primary subject of discussion.</div></dd><dt>receiver:</dt><dd style="margin-left: 1.5em"><div>An endpoint that is receiving frames.</div></dd><dt>sender:</dt><dd style="margin-left: 1.5em"><div>An endpoint that is transmitting frames.</div></dd><dt>server:</dt><dd style="margin-left: 1.5em"><div>The endpoint that accepts an HTTP/3 connection. Servers receive HTTP requests and send HTTP responses.</div></dd><dt>stream:</dt><dd style="margin-left: 1.5em"><div>A bidirectional or unidirectional bytestream provided by the QUIC transport. All streams within an HTTP/3 connection can be considered "HTTP/3 streams", but multiple stream types are defined within HTTP/3.</div></dd><dt><a href="#errors" title="Error Handling">stream error</a><div id="rfc.iref.s.1"></div>:</dt><dd style="margin-left: 1.5em"><div>An application-level error on the individual stream.</div></dd></dl></div><div id="rfc.section.2.2.p.5"><p>The term "content" is defined in <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.4">Section 6.4</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>.</p></div><div id="rfc.section.2.2.p.6"><p>Finally, the terms "resource", "message", "user agent", "origin server", "gateway", "intermediary", "proxy", and "tunnel" are defined in <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-3">Section 3</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>.</p></div><div id="rfc.section.2.2.p.7"><p>Packet diagrams in this document use the format defined in <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-1.3">Section 1.3</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a> to illustrate the order and size of fields.</p></div></section></section><hr class="hidden-print"><section id="connection-setup"><h2 id="rfc.section.3" class="np"><a href="#rfc.section.3">3.</a>&nbsp;<a href="#connection-setup">Connection Setup and Management</a></h2><section id="discovery"><h3 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a>&nbsp;<a href="#discovery">Discovering an HTTP/3 Endpoint</a></h3><div id="rfc.section.3.1.p.1"><p>HTTP relies on the notion of an authoritative response: a response that has been determined to be the most appropriate response for that request given the state of the target resource at the time of response message origination by (or at the direction of) the origin server identified within the target URI. Locating an authoritative server for an HTTP URI is discussed in <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-4.3">Section 4.3</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>.</p></div><div id="rfc.section.3.1.p.2"><p>The "https" scheme associates authority with possession of a certificate that the client considers to be trustworthy for the host identified by the authority component of the URI. Upon receiving a server certificate in the TLS handshake, the client <em class="bcp14">MUST</em> verify that the certificate is an acceptable match for the URI's origin server using the process described in <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-4.3.4">Section 4.3.4</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>. If the certificate cannot be verified with respect to the URI's origin server, the client <em class="bcp14">MUST NOT</em> consider the server authoritative for that origin.</p></div><div id="rfc.section.3.1.p.3"><p>A client <em class="bcp14">MAY</em> attempt access to a resource with an "https" URI by resolving the host identifier to an IP address, establishing a QUIC connection to that address on the indicated port (including validation of the server certificate as described above), and sending an HTTP/3 request message targeting the URI to the server over that secured connection. Unless some other mechanism is used to select HTTP/3, the token "h3" is used in the Application-Layer Protocol Negotiation (ALPN; see <a href="#RFC7301"><cite title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>) extension during the TLS handshake.</p></div><div id="rfc.section.3.1.p.4"><p>Connectivity problems (e.g., blocking UDP) can result in a failure to establish a QUIC connection; clients <em class="bcp14">SHOULD</em> attempt to use TCP-based versions of HTTP in this case.</p></div><div id="rfc.section.3.1.p.5"><p>Servers <em class="bcp14">MAY</em> serve HTTP/3 on any UDP port; an alternative service advertisement always includes an explicit port, and URIs contain either an explicit port or a default port associated with the scheme.</p></div><section id="alt-svc"><h4 id="rfc.section.3.1.1"><a href="#rfc.section.3.1.1">3.1.1.</a>&nbsp;<a href="#alt-svc">HTTP Alternative Services</a></h4><div id="rfc.section.3.1.1.p.1"><p>An HTTP origin can advertise the availability of an equivalent HTTP/3 endpoint via the Alt-Svc HTTP response header field or the HTTP/2 ALTSVC frame (<a href="#ALTSVC"><cite title="HTTP Alternative Services">[ALTSVC]</cite></a>) using the "h3" ALPN token.</p></div><div id="rfc.section.3.1.1.p.2" class="avoidbreakafter"><p>For example, an origin could indicate in an HTTP response that HTTP/3 was available on UDP port 50781 at the same hostname by including the following header field:</p></div><div id="rfc.section.3.1.1.p.3"><pre class="text">
Alt-Svc: h3=":50781"
</pre></div><div id="rfc.section.3.1.1.p.4"><p>On receipt of an Alt-Svc record indicating HTTP/3 support, a client <em class="bcp14">MAY</em> attempt to establish a QUIC connection to the indicated host and port; if this connection is successful, the client can send HTTP requests using the mapping described in this document.</p></div></section><section id="other-schemes"><h4 id="rfc.section.3.1.2"><a href="#rfc.section.3.1.2">3.1.2.</a>&nbsp;<a href="#other-schemes">Other Schemes</a></h4><div id="rfc.section.3.1.2.p.1"><p>Although HTTP is independent of the transport protocol, the "http" scheme associates authority with the ability to receive TCP connections on the indicated port of whatever host is identified within the authority component. Because HTTP/3 does not use TCP, HTTP/3 cannot be used for direct access to the authoritative server for a resource identified by an "http" URI. However, protocol extensions such as <a href="#ALTSVC"><cite title="HTTP Alternative Services">[ALTSVC]</cite></a> permit the authoritative server to identify other services that are also authoritative and that might be reachable over HTTP/3.</p></div><div id="rfc.section.3.1.2.p.2"><p>Prior to making requests for an origin whose scheme is not "https", the client <em class="bcp14">MUST</em> ensure the server is willing to serve that scheme. For origins whose scheme is "http", an experimental method to accomplish this is described in <a href="#RFC8164"><cite title="Opportunistic Security for HTTP/2">[RFC8164]</cite></a>. Other mechanisms might be defined for various schemes in the future.</p></div></section></section><section id="connection-establishment"><h3 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2.</a>&nbsp;<a href="#connection-establishment">Connection Establishment</a></h3><div id="rfc.section.3.2.p.1"><p>HTTP/3 relies on QUIC version 1 as the underlying transport. The use of other QUIC transport versions with HTTP/3 <em class="bcp14">MAY</em> be defined by future specifications.</p></div><div id="rfc.section.3.2.p.2"><p>QUIC version 1 uses TLS version 1.3 or greater as its handshake protocol. HTTP/3 clients <em class="bcp14">MUST</em> support a mechanism to indicate the target host to the server during the TLS handshake. If the server is identified by a domain name (<a href="#DNS-TERMS"><cite title="DNS Terminology">[DNS-TERMS]</cite></a>), clients <em class="bcp14">MUST</em> send the Server Name Indication (SNI; <a href="#RFC6066"><cite title="Transport Layer Security (TLS) Extensions: Extension Definitions">[RFC6066]</cite></a>) TLS extension unless an alternative mechanism to indicate the target host is used.</p></div><div id="rfc.section.3.2.p.3"><p>QUIC connections are established as described in <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>. During connection establishment, HTTP/3 support is indicated by selecting the ALPN token "h3" in the TLS handshake. Support for other application-layer protocols <em class="bcp14">MAY</em> be offered in the same handshake.</p></div><div id="rfc.section.3.2.p.4"><p>While connection-level options pertaining to the core QUIC protocol are set in the initial crypto handshake, settings specific to HTTP/3 are conveyed in the <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.2"></span> frame. After the QUIC connection is established, a <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.3"></span> frame <em class="bcp14">MUST</em> be sent by each endpoint as the initial frame of their respective HTTP <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.4"></span>.</p></div></section><section id="connection-reuse"><h3 id="rfc.section.3.3"><a href="#rfc.section.3.3">3.3.</a>&nbsp;<a href="#connection-reuse">Connection Reuse</a></h3><div id="rfc.section.3.3.p.1"><p>HTTP/3 connections are persistent across multiple requests. For best performance, it is expected that clients will not close connections until it is determined that no further communication with a server is necessary (for example, when a user navigates away from a particular web page) or until the server closes the connection.</p></div><div id="rfc.section.3.3.p.2"><p>Once a connection to a server endpoint exists, this connection <em class="bcp14">MAY</em> be reused for requests with multiple different URI authority components. To use an existing connection for a new origin, clients <em class="bcp14">MUST</em> validate the certificate presented by the server for the new origin server using the process described in <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-4.3.4">Section 4.3.4</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>. This implies that clients will need to retain the server certificate and any additional information needed to verify that certificate; clients that do not do so will be unable to reuse the connection for additional origins.</p></div><div id="rfc.section.3.3.p.3"><p>If the certificate is not acceptable with regard to the new origin for any reason, the connection <em class="bcp14">MUST NOT</em> be reused and a new connection <em class="bcp14">SHOULD</em> be established for the new origin. If the reason the certificate cannot be verified might apply to other origins already associated with the connection, the client <em class="bcp14">SHOULD</em> revalidate the server certificate for those origins. For instance, if validation of a certificate fails because the certificate has expired or been revoked, this might be used to invalidate all other origins for which that certificate was used to establish authority.</p></div><div id="rfc.section.3.3.p.4"><p>Clients <em class="bcp14">SHOULD NOT</em> open more than one HTTP/3 connection to a given IP address and UDP port, where the IP address and port might be derived from a URI, a selected alternative service (<a href="#ALTSVC"><cite title="HTTP Alternative Services">[ALTSVC]</cite></a>), a configured proxy, or name resolution of any of these. A client <em class="bcp14">MAY</em> open multiple HTTP/3 connections to the same IP address and UDP port using different transport or TLS configurations but <em class="bcp14">SHOULD</em> avoid creating multiple connections with the same configuration.</p></div><div id="rfc.section.3.3.p.5"><p>Servers are encouraged to maintain open HTTP/3 connections for as long as possible but are permitted to terminate idle connections if necessary. When either endpoint chooses to close the HTTP/3 connection, the terminating endpoint <em class="bcp14">SHOULD</em> first send a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.1"></span> frame (<a href="#connection-shutdown" title="Connection Shutdown">Section 5.2</a>) so that both endpoints can reliably determine whether previously sent frames have been processed and gracefully complete or terminate any necessary remaining tasks.</p></div><div id="rfc.section.3.3.p.6"><p>A server that does not wish clients to reuse HTTP/3 connections for a particular origin can indicate that it is not authoritative for a request by sending a 421 (Misdirected Request) status code in response to the request; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.4">Section 7.4</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>.</p></div></section></section><hr class="hidden-print"><section id="http-request-lifecycle"><h2 id="rfc.section.4" class="np"><a href="#rfc.section.4">4.</a>&nbsp;<a href="#http-request-lifecycle">Expressing HTTP Semantics in HTTP/3</a></h2><section id="request-response"><h3 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1.</a>&nbsp;<a href="#request-response">HTTP Message Framing</a></h3><div id="rfc.section.4.1.p.1"><p>A client sends an HTTP request on a <a href="#request-streams" title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.1"></span>, which is a client-initiated bidirectional QUIC stream; see <a href="#request-streams" title="Bidirectional Streams">Section 6.1</a>. A client <em class="bcp14">MUST</em> send only a single request on a given stream. A server sends zero or more interim HTTP responses on the same stream as the request, followed by a single final HTTP response, as detailed below. See <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-15">Section 15</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a> for a description of interim and final HTTP responses.</p></div><div id="rfc.section.4.1.p.2"><p>Pushed responses are sent on a server-initiated unidirectional QUIC stream; see <a href="#push-streams" title="Push Streams">Section 6.2.2</a>. A server sends zero or more interim HTTP responses, followed by a single final HTTP response, in the same manner as a standard response. Push is described in more detail in <a href="#server-push" title="Server Push">Section 4.6</a>.</p></div><div id="rfc.section.4.1.p.3"><p>On a given stream, receipt of multiple requests or receipt of an additional HTTP response following a final HTTP response <em class="bcp14">MUST</em> be treated as <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.2"></span>.</p></div><div id="rfc.section.4.1.p.4" class="avoidbreakafter"><p>An HTTP message (request or response) consists of:</p></div><div id="rfc.section.4.1.p.5"><ol type="1"><li>the header section, including message control data, sent as a single <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.2"></span> frame,</li><li>optionally, the content, if present, sent as a series of <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.2"></span> frames, and</li><li>optionally, the trailer section, if present, sent as a single <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.3"></span> frame.</li></ol></div><div id="rfc.section.4.1.p.6"><p>Header and trailer sections are described in Sections <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.3">6.3</a> and <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.5">6.5</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>; the content is described in <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.4">Section 6.4</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>.</p></div><div id="rfc.section.4.1.p.7"><p>Receipt of an invalid sequence of frames <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.5"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.4"></span>. In particular, a <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.3"></span> frame before any <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.5"></span> frame, or a <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.6"></span> or <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.4"></span> frame after the trailing <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.7"></span> frame, is considered invalid. Other frame types, especially unknown frame types, might be permitted subject to their own rules; see <a href="#extensions" title="Extensions to HTTP/3">Section 9</a>.</p></div><div id="rfc.section.4.1.p.8"><p>A server <em class="bcp14">MAY</em> send one or more <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.2"></span> frames before, after, or interleaved with the frames of a response message. These <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.3"></span> frames are not part of the response; see <a href="#server-push" title="Server Push">Section 4.6</a> for more details. <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.4"></span> frames are not permitted on <a href="#push-streams" title="Push Streams">push streams</a><span id="rfc.iref.p.5"></span>; a pushed response that includes <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.6"></span> frames <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.6"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.8"></span>.</p></div><div id="rfc.section.4.1.p.9"><p>Frames of unknown types (<a href="#extensions" title="Extensions to HTTP/3">Section 9</a>), including reserved frames (<a href="#frame-reserved" title="Reserved Frame Types">Section 7.2.8</a>) <em class="bcp14">MAY</em> be sent on a request or <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.7"></span> before, after, or interleaved with other frames described in this section.</p></div><div id="rfc.section.4.1.p.10"><p>The <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.9"></span> and <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.8"></span> frames might reference updates to the QPACK dynamic table. While these updates are not directly part of the message exchange, they must be received and processed before the message can be consumed. See <a href="#header-formatting" title="HTTP Fields">Section 4.2</a> for more details.</p></div><div id="rfc.section.4.1.p.11"><p>Transfer codings (see <a href="https://www.rfc-editor.org/rfc/rfc9112.html#section-7">Section 7</a> of <a href="#RFC9112"><cite title="HTTP/1.1">[HTTP/1.1]</cite></a>) are not defined for HTTP/3; the Transfer-Encoding header field <em class="bcp14">MUST NOT</em> be used.</p></div><div id="rfc.section.4.1.p.12"><p>A response <em class="bcp14">MAY</em> consist of multiple messages when and only when one or more interim responses (1xx; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-15.2">Section 15.2</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>) precede a final response to the same request. Interim responses do not contain content or trailer sections.</p></div><div id="rfc.section.4.1.p.13"><p>An HTTP request/response exchange fully consumes a client-initiated bidirectional QUIC stream. After sending a request, a client <em class="bcp14">MUST</em> close the stream for sending. Unless using the CONNECT method (see <a href="#connect" title="The CONNECT Method">Section 4.4</a>), clients <em class="bcp14">MUST NOT</em> make stream closure dependent on receiving a response to their request. After sending a final response, the server <em class="bcp14">MUST</em> close the stream for sending. At this point, the QUIC stream is fully closed.</p></div><div id="rfc.section.4.1.p.14"><p>When a stream is closed, this indicates the end of the final HTTP message. Because some messages are large or unbounded, endpoints <em class="bcp14">SHOULD</em> begin processing partial HTTP messages once enough of the message has been received to make progress. If a client-initiated stream terminates without enough of the HTTP message to provide a complete response, the server <em class="bcp14">SHOULD</em> abort its response stream with the error code <a href="#H3_REQUEST_INCOMPLETE">H3_REQUEST_INCOMPLETE</a><span id="rfc.iref.h.10"></span>.</p></div><div id="rfc.section.4.1.p.15"><p>A server can send a complete response prior to the client sending an entire request if the response does not depend on any portion of the request that has not been sent and received. When the server does not need to receive the remainder of the request, it <em class="bcp14">MAY</em> abort reading the <a href="#request-streams" title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.2"></span>, send a complete response, and cleanly close the sending part of the stream. The error code <a href="#H3_NO_ERROR">H3_NO_ERROR</a><span id="rfc.iref.h.11"></span> <em class="bcp14">SHOULD</em> be used when requesting that the client stop sending on the <a href="#request-streams" title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.3"></span>. Clients <em class="bcp14">MUST NOT</em> discard complete responses as a result of having their request terminated abruptly, though clients can always discard responses at their discretion for other reasons. If the server sends a partial or complete response but does not abort reading the request, clients <em class="bcp14">SHOULD</em> continue sending the content of the request and close the stream normally.</p></div><section id="request-cancellation"><h4 id="rfc.section.4.1.1"><a href="#rfc.section.4.1.1">4.1.1.</a>&nbsp;<a href="#request-cancellation">Request Cancellation and Rejection</a></h4><div id="rfc.section.4.1.1.p.1"><p>Once a <a href="#request-streams" title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.4"></span> has been opened, the request <em class="bcp14">MAY</em> be cancelled by either endpoint. Clients cancel requests if the response is no longer of interest; servers cancel requests if they are unable to or choose not to respond. When possible, it is <em class="bcp14">RECOMMENDED</em> that servers send an HTTP response with an appropriate status code rather than cancelling a request it has already begun processing.</p></div><div id="rfc.section.4.1.1.p.2"><p>Implementations <em class="bcp14">SHOULD</em> cancel requests by abruptly terminating any directions of a stream that are still open. To do so, an implementation resets the sending parts of streams and aborts reading on the receiving parts of streams; see <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-2.4">Section 2.4</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>.</p></div><div id="rfc.section.4.1.1.p.3"><p>When the server cancels a request without performing any application processing, the request is considered "rejected". The server <em class="bcp14">SHOULD</em> abort its response stream with the error code <a href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><span id="rfc.iref.h.12"></span>. In this context, "processed" means that some data from the stream was passed to some higher layer of software that might have taken some action as a result. The client can treat requests rejected by the server as though they had never been sent at all, thereby allowing them to be retried later.</p></div><div id="rfc.section.4.1.1.p.4"><p>Servers <em class="bcp14">MUST NOT</em> use the <a href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><span id="rfc.iref.h.13"></span> error code for requests that were partially or fully processed. When a server abandons a response after partial processing, it <em class="bcp14">SHOULD</em> abort its response stream with the error code <a href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span id="rfc.iref.h.14"></span>.</p></div><div id="rfc.section.4.1.1.p.5"><p>Client <em class="bcp14">SHOULD</em> use the error code <a href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span id="rfc.iref.h.15"></span> to cancel requests. Upon receipt of this error code, a server <em class="bcp14">MAY</em> abruptly terminate the response using the error code <a href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><span id="rfc.iref.h.16"></span> if no processing was performed. Clients <em class="bcp14">MUST NOT</em> use the <a href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><span id="rfc.iref.h.17"></span> error code, except when a server has requested closure of the <a href="#request-streams" title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.5"></span> with this error code.</p></div><div id="rfc.section.4.1.1.p.6"><p>If a stream is cancelled after receiving a complete response, the client <em class="bcp14">MAY</em> ignore the cancellation and use the response. However, if a stream is cancelled after receiving a partial response, the response <em class="bcp14">SHOULD NOT</em> be used. Only idempotent actions such as GET, PUT, or DELETE can be safely retried; a client <em class="bcp14">SHOULD NOT</em> automatically retry a request with a non-idempotent method unless it has some means to know that the request semantics are idempotent independent of the method or some means to detect that the original request was never applied. See <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9.2.2">Section 9.2.2</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a> for more details.</p></div></section><section id="malformed"><h4 id="rfc.section.4.1.2"><a href="#rfc.section.4.1.2">4.1.2.</a>&nbsp;<a href="#malformed">Malformed Requests and Responses</a></h4><div id="rfc.section.4.1.2.p.1" class="avoidbreakafter"><p>A malformed request or response is one that is an otherwise valid sequence of frames but is invalid due to:</p></div><div id="rfc.section.4.1.2.p.2"><ul><li>the presence of prohibited fields or pseudo-header fields,</li><li>the absence of mandatory pseudo-header fields,</li><li>invalid values for pseudo-header fields,</li><li>pseudo-header fields after fields,</li><li>an invalid sequence of HTTP messages,</li><li>the inclusion of uppercase field names, or</li><li>the inclusion of invalid characters in field names or values.</li></ul></div><div id="rfc.section.4.1.2.p.3"><p>A request or response that is defined as having content when it contains a Content-Length header field (<a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-8.6">Section 8.6</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>) is malformed if the value of the Content-Length header field does not equal the sum of the <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.5"></span> frame lengths received. A response that is defined as never having content, even when a Content-Length is present, can have a non-zero Content-Length header field even though no content is included in <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.6"></span> frames.</p></div><div id="rfc.section.4.1.2.p.4"><p>Intermediaries that process HTTP requests or responses (i.e., any intermediary not acting as a tunnel) <em class="bcp14">MUST NOT</em> forward a malformed request or response. Malformed requests or responses that are detected <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">stream error</a><span id="rfc.iref.s.4"></span> of type <a href="#H3_MESSAGE_ERROR">H3_MESSAGE_ERROR</a><span id="rfc.iref.h.18"></span>.</p></div><div id="rfc.section.4.1.2.p.5"><p>For malformed requests, a server <em class="bcp14">MAY</em> send an HTTP response indicating the error prior to closing or resetting the stream. Clients <em class="bcp14">MUST NOT</em> accept a malformed response. Note that these requirements are intended to protect against several types of common attacks against HTTP; they are deliberately strict because being permissive can expose implementations to these vulnerabilities.</p></div></section></section><section id="header-formatting"><h3 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2.</a>&nbsp;<a href="#header-formatting">HTTP Fields</a></h3><div id="rfc.section.4.2.p.1"><p>HTTP messages carry metadata as a series of key-value pairs called "HTTP fields"; see Sections <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.3">6.3</a> and <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.5">6.5</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>. For a listing of registered HTTP fields, see the "Hypertext Transfer Protocol (HTTP) Field Name Registry" maintained at &lt;<a href="https://www.iana.org/assignments/http-fields/">https://www.iana.org/assignments/http-fields/</a>&gt;. Like HTTP/2, HTTP/3 has additional considerations related to the use of characters in field names, the Connection header field, and pseudo-header fields.</p></div><div id="rfc.section.4.2.p.2"><p>Field names are strings containing a subset of ASCII characters. Properties of HTTP field names and values are discussed in more detail in <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-5.1">Section 5.1</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>. Characters in field names <em class="bcp14">MUST</em> be converted to lowercase prior to their encoding. A request or response containing uppercase characters in field names <em class="bcp14">MUST</em> be treated as <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.3"></span>.</p></div><div id="rfc.section.4.2.p.3"><p>HTTP/3 does not use the Connection header field to indicate connection-specific fields; in this protocol, connection-specific metadata is conveyed by other means. An endpoint <em class="bcp14">MUST NOT</em> generate an HTTP/3 field section containing connection-specific fields; any message containing connection-specific fields <em class="bcp14">MUST</em> be treated as <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.4"></span>.</p></div><div id="rfc.section.4.2.p.4"><p>The only exception to this is the TE header field, which <em class="bcp14">MAY</em> be present in an HTTP/3 request header; when it is, it <em class="bcp14">MUST NOT</em> contain any value other than "trailers".</p></div><div id="rfc.section.4.2.p.5"><p>An intermediary transforming an HTTP/1.x message to HTTP/3 <em class="bcp14">MUST</em> remove connection-specific header fields as discussed in <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.6.1">Section 7.6.1</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>, or their messages will be treated by other HTTP/3 endpoints as <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.5"></span>.</p></div><section id="field-compression"><h4 id="rfc.section.4.2.1"><a href="#rfc.section.4.2.1">4.2.1.</a>&nbsp;<a href="#field-compression">Field Compression</a></h4><div id="rfc.section.4.2.1.p.1"><p><a href="#RFC9204"><cite title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a> describes a variation of HPACK that gives an encoder some control over how much head-of-line blocking can be caused by compression. This allows an encoder to balance compression efficiency with latency. HTTP/3 uses QPACK to compress header and trailer sections, including the control data present in the header section.</p></div><div id="rfc.section.4.2.1.p.2"><p>To allow for better compression efficiency, the Cookie header field (<a href="#COOKIES"><cite title="HTTP State Management Mechanism">[COOKIES]</cite></a>) <em class="bcp14">MAY</em> be split into separate field lines, each with one or more cookie-pairs, before compression. If a decompressed field section contains multiple cookie field lines, these <em class="bcp14">MUST</em> be concatenated into a single byte string using the two-byte delimiter of "<span class="tt">;&nbsp;</span>" (ASCII 0x3b, 0x20) before being passed into a context other than HTTP/2 or HTTP/3, such as an HTTP/1.1 connection, or a generic HTTP server application.</p></div></section><section id="header-size-constraints"><h4 id="rfc.section.4.2.2"><a href="#rfc.section.4.2.2">4.2.2.</a>&nbsp;<a href="#header-size-constraints">Header Size Constraints</a></h4><div id="rfc.section.4.2.2.p.1"><p>An HTTP/3 implementation <em class="bcp14">MAY</em> impose a limit on the maximum size of the message header it will accept on an individual HTTP message. A server that receives a larger header section than it is willing to handle can send an HTTP 431 (Request Header Fields Too Large) status code (<a href="#RFC6585"><cite title="Additional HTTP Status Codes">[RFC6585]</cite></a>). A client can discard responses that it cannot process. The size of a field list is calculated based on the uncompressed size of fields, including the length of the name and value in bytes plus an overhead of 32 bytes for each field.</p></div><div id="rfc.section.4.2.2.p.2"><p>If an implementation wishes to advise its peer of this limit, it can be conveyed as a number of bytes in the <a href="#SETTINGS_MAX_FIELD_SECTION_SIZE">SETTINGS_MAX_FIELD_SECTION_SIZE</a><span id="rfc.iref.s.5"></span> parameter. An implementation that has received this parameter <em class="bcp14">SHOULD NOT</em> send an HTTP message header that exceeds the indicated size, as the peer will likely refuse to process it. However, an HTTP message can traverse one or more intermediaries before reaching the origin server; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-3.7">Section 3.7</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>. Because this limit is applied separately by each implementation that processes the message, messages below this limit are not guaranteed to be accepted.</p></div></section></section><section id="http-control-data"><h3 id="rfc.section.4.3"><a href="#rfc.section.4.3">4.3.</a>&nbsp;<a href="#http-control-data">HTTP Control Data</a></h3><div id="rfc.section.4.3.p.1"><p>Like HTTP/2, HTTP/3 employs a series of pseudo-header fields, where the field name begins with the <span class="tt">:</span> character (ASCII 0x3a). These pseudo-header fields convey message control data; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.2">Section 6.2</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>.</p></div><div id="rfc.section.4.3.p.2"><p>Pseudo-header fields are not HTTP fields. Endpoints <em class="bcp14">MUST NOT</em> generate pseudo-header fields other than those defined in this document. However, an extension could negotiate a modification of this restriction; see <a href="#extensions" title="Extensions to HTTP/3">Section 9</a>.</p></div><div id="rfc.section.4.3.p.3"><p>Pseudo-header fields are only valid in the context in which they are defined. Pseudo-header fields defined for requests <em class="bcp14">MUST NOT</em> appear in responses; pseudo-header fields defined for responses <em class="bcp14">MUST NOT</em> appear in requests. Pseudo-header fields <em class="bcp14">MUST NOT</em> appear in trailer sections. Endpoints <em class="bcp14">MUST</em> treat a request or response that contains undefined or invalid pseudo-header fields as <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.6"></span>.</p></div><div id="rfc.section.4.3.p.4"><p>All pseudo-header fields <em class="bcp14">MUST</em> appear in the header section before regular header fields. Any request or response that contains a pseudo-header field that appears in a header section after a regular header field <em class="bcp14">MUST</em> be treated as <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.7"></span>.</p></div><section id="request-pseudo-header-fields"><h4 id="rfc.section.4.3.1"><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;<a href="#request-pseudo-header-fields">Request Pseudo-Header Fields</a></h4><div id="rfc.section.4.3.1.p.1" class="avoidbreakafter"><p>The following pseudo-header fields are defined for requests:</p></div><div id="rfc.section.4.3.1.p.2"><dl><dt>":method":</dt><dd style="margin-left: 1.5em"><div>Contains the HTTP method (<a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9">Section 9</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>)</div></dd><dt>":scheme":</dt><dd style="margin-left: 1.5em"><div>Contains the scheme portion of the target URI (<a href="https://www.rfc-editor.org/rfc/rfc3986.html#section-3.1">Section 3.1</a> of <a href="#URI"><cite title="Uniform Resource Identifier (URI): Generic Syntax">[URI]</cite></a>).</div></dd><dt></dt><dd style="margin-left: 1.5em"><div>The :scheme pseudo-header is not restricted to URIs with scheme "http" and "https". A proxy or gateway can translate requests for non-HTTP schemes, enabling the use of HTTP to interact with non-HTTP services.</div></dd><dt></dt><dd style="margin-left: 1.5em"><div>See <a href="#other-schemes" title="Other Schemes">Section 3.1.2</a> for guidance on using a scheme other than "https".</div></dd><dt>":authority":</dt><dd style="margin-left: 1.5em"><div>Contains the authority portion of the target URI (<a href="https://www.rfc-editor.org/rfc/rfc3986.html#section-3.2">Section 3.2</a> of <a href="#URI"><cite title="Uniform Resource Identifier (URI): Generic Syntax">[URI]</cite></a>). The authority <em class="bcp14">MUST NOT</em> include the deprecated userinfo subcomponent for URIs of scheme "http" or "https".</div></dd><dt></dt><dd style="margin-left: 1.5em"><div>To ensure that the HTTP/1.1 request line can be reproduced accurately, this pseudo-header field <em class="bcp14">MUST</em> be omitted when translating from an HTTP/1.1 request that has a request target in a method-specific form; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.1">Section 7.1</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>. Clients that generate HTTP/3 requests directly <em class="bcp14">SHOULD</em> use the :authority pseudo-header field instead of the Host header field. An intermediary that converts an HTTP/3 request to HTTP/1.1 <em class="bcp14">MUST</em> create a Host field if one is not present in a request by copying the value of the :authority pseudo-header field.</div></dd><dt>":path":</dt><dd style="margin-left: 1.5em"><div>Contains the path and query parts of the target URI (the "path-absolute" production and optionally a <span class="tt">?</span> character (ASCII 0x3f) followed by the "query" production; see Sections <a href="https://www.rfc-editor.org/rfc/rfc3986.html#section-3.3">3.3</a> and <a href="https://www.rfc-editor.org/rfc/rfc3986.html#section-3.4">3.4</a> of <a href="#URI"><cite title="Uniform Resource Identifier (URI): Generic Syntax">[URI]</cite></a>.</div></dd><dt></dt><dd style="margin-left: 1.5em"><div>This pseudo-header field <em class="bcp14">MUST NOT</em> be empty for "http" or "https" URIs; "http" or "https" URIs that do not contain a path component <em class="bcp14">MUST</em> include a value of <span class="tt">/</span> (ASCII 0x2f). An OPTIONS request that does not include a path component includes the value <span class="tt">*</span> (ASCII 0x2a) for the :path pseudo-header field; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.1">Section 7.1</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>.</div></dd></dl></div><div id="rfc.section.4.3.1.p.3"><p>All HTTP/3 requests <em class="bcp14">MUST</em> include exactly one value for the :method, :scheme, and :path pseudo-header fields, unless the request is a CONNECT request; see <a href="#connect" title="The CONNECT Method">Section 4.4</a>.</p></div><div id="rfc.section.4.3.1.p.4"><p>If the :scheme pseudo-header field identifies a scheme that has a mandatory authority component (including "http" and "https"), the request <em class="bcp14">MUST</em> contain either an :authority pseudo-header field or a Host header field. If these fields are present, they <em class="bcp14">MUST NOT</em> be empty. If both fields are present, they <em class="bcp14">MUST</em> contain the same value. If the scheme does not have a mandatory authority component and none is provided in the request target, the request <em class="bcp14">MUST NOT</em> contain the :authority pseudo-header or Host header fields.</p></div><div id="rfc.section.4.3.1.p.5"><p>An HTTP request that omits mandatory pseudo-header fields or contains invalid values for those pseudo-header fields is <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.8"></span>.</p></div><div id="rfc.section.4.3.1.p.6"><p>HTTP/3 does not define a way to carry the version identifier that is included in the HTTP/1.1 request line. HTTP/3 requests implicitly have a protocol version of "3.0".</p></div></section><section id="response-pseudo-header-fields"><h4 id="rfc.section.4.3.2"><a href="#rfc.section.4.3.2">4.3.2.</a>&nbsp;<a href="#response-pseudo-header-fields">Response Pseudo-Header Fields</a></h4><div id="rfc.section.4.3.2.p.1"><p>For responses, a single ":status" pseudo-header field is defined that carries the HTTP status code; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-15">Section 15</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>. This pseudo-header field <em class="bcp14">MUST</em> be included in all responses; otherwise, the response is <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.9"></span> (see <a href="#malformed" title="Malformed Requests and Responses">Section 4.1.2</a>).</p></div><div id="rfc.section.4.3.2.p.2"><p>HTTP/3 does not define a way to carry the version or reason phrase that is included in an HTTP/1.1 status line. HTTP/3 responses implicitly have a protocol version of "3.0".</p></div></section></section><section id="connect"><h3 id="rfc.section.4.4"><a href="#rfc.section.4.4">4.4.</a>&nbsp;<a href="#connect">The CONNECT Method</a></h3><div id="rfc.section.4.4.p.1"><p>The CONNECT method requests that the recipient establish a tunnel to the destination origin server identified by the request-target; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9.3.6">Section 9.3.6</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>. It is primarily used with HTTP proxies to establish a TLS session with an origin server for the purposes of interacting with "https" resources.</p></div><div id="rfc.section.4.4.p.2"><p>In HTTP/1.x, CONNECT is used to convert an entire HTTP connection into a tunnel to a remote host. In HTTP/2 and HTTP/3, the CONNECT method is used to establish a tunnel over a single stream.</p></div><div id="rfc.section.4.4.p.3" class="avoidbreakafter"><p>A CONNECT request <em class="bcp14">MUST</em> be constructed as follows:</p></div><div id="rfc.section.4.4.p.4"><ul><li>The :method pseudo-header field is set to "CONNECT"</li><li>The :scheme and :path pseudo-header fields are omitted</li><li>The :authority pseudo-header field contains the host and port to connect to (equivalent to the authority-form of the request-target of CONNECT requests; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.1">Section 7.1</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>).</li></ul></div><div id="rfc.section.4.4.p.5"><p>The <a href="#request-streams" title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.6"></span> remains open at the end of the request to carry the data to be transferred. A CONNECT request that does not conform to these restrictions is <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.10"></span>.</p></div><div id="rfc.section.4.4.p.6"><p>A proxy that supports CONNECT establishes a TCP connection (<a href="#RFC0793"><cite title="Transmission Control Protocol">[RFC0793]</cite></a>) to the server identified in the :authority pseudo-header field. Once this connection is successfully established, the proxy sends a <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.19"></span> frame containing a 2xx series status code to the client, as defined in <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-15.3">Section 15.3</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>.</p></div><div id="rfc.section.4.4.p.7"><p>All <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.7"></span> frames on the stream correspond to data sent or received on the TCP connection. The payload of any <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.8"></span> frame sent by the client is transmitted by the proxy to the TCP server; data received from the TCP server is packaged into <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.9"></span> frames by the proxy. Note that the size and number of TCP segments is not guaranteed to map predictably to the size and number of HTTP <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.10"></span> or QUIC STREAM frames.</p></div><div id="rfc.section.4.4.p.8"><p>Once the CONNECT method has completed, only <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.11"></span> frames are permitted to be sent on the stream. Extension frames <em class="bcp14">MAY</em> be used if specifically permitted by the definition of the extension. Receipt of any other known frame type <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.7"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.20"></span>.</p></div><div id="rfc.section.4.4.p.9"><p>The TCP connection can be closed by either peer. When the client ends the <a href="#request-streams" title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.7"></span> (that is, the receive stream at the proxy enters the "Data Recvd" state), the proxy will set the FIN bit on its connection to the TCP server. When the proxy receives a packet with the FIN bit set, it will close the send stream that it sends to the client. TCP connections that remain half closed in a single direction are not invalid, but are often handled poorly by servers, so clients <em class="bcp14">SHOULD NOT</em> close a stream for sending while they still expect to receive data from the target of the CONNECT.</p></div><div id="rfc.section.4.4.p.10"><p>A TCP <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.8"></span> is signaled by abruptly terminating the stream. A proxy treats any error in the TCP connection, which includes receiving a TCP segment with the RST bit set, as a <a href="#errors" title="Error Handling">stream error</a><span id="rfc.iref.s.6"></span> of type <a href="#H3_CONNECT_ERROR">H3_CONNECT_ERROR</a><span id="rfc.iref.h.21"></span>.</p></div><div id="rfc.section.4.4.p.11"><p>Correspondingly, if a proxy detects an error with the stream or the QUIC connection, it <em class="bcp14">MUST</em> close the TCP connection. If the proxy detects that the client has reset the stream or aborted reading from the stream, it <em class="bcp14">MUST</em> close the TCP connection. If the stream is reset or reading is aborted by the client, a proxy <em class="bcp14">SHOULD</em> perform the same operation on the other direction in order to ensure that both directions of the stream are cancelled. In all these cases, if the underlying TCP implementation permits it, the proxy <em class="bcp14">SHOULD</em> send a TCP segment with the RST bit set.</p></div><div id="rfc.section.4.4.p.12"><p>Since CONNECT creates a tunnel to an arbitrary server, proxies that support CONNECT <em class="bcp14">SHOULD</em> restrict its use to a set of known ports or a list of safe request targets; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9.3.6">Section 9.3.6</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a> for more details.</p></div></section><section id="http-upgrade"><h3 id="rfc.section.4.5"><a href="#rfc.section.4.5">4.5.</a>&nbsp;<a href="#http-upgrade">HTTP Upgrade</a></h3><div id="rfc.section.4.5.p.1"><p>HTTP/3 does not support the HTTP Upgrade mechanism (<a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.8">Section 7.8</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>) or the 101 (Switching Protocols) informational status code (<a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-15.2.2">Section 15.2.2</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>).</p></div></section><section id="server-push"><h3 id="rfc.section.4.6"><a href="#rfc.section.4.6">4.6.</a>&nbsp;<a href="#server-push">Server Push</a></h3><div id="rfc.section.4.6.p.1"><p>Server push is an interaction mode that permits a server to push a request-response exchange to a client in anticipation of the client making the indicated request. This trades off network usage against a potential latency gain. HTTP/3 server push is similar to what is described in <a href="https://www.rfc-editor.org/rfc/rfc9113.html#section-8.2">Section 8.2</a> of <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a>, but it uses different mechanisms.</p></div><div id="rfc.section.4.6.p.2"><p>Each server push is assigned a unique push ID by the server. The push ID is used to refer to the push in various contexts throughout the lifetime of the HTTP/3 connection.</p></div><div id="rfc.section.4.6.p.3"><p>The push ID space begins at zero and ends at a maximum value set by the <a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><span id="rfc.iref.m.11"></span> frame. In particular, a server is not able to push until after the client sends a <a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><span id="rfc.iref.m.12"></span> frame. A client sends <a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><span id="rfc.iref.m.13"></span> frames to control the number of pushes that a server can promise. A server <em class="bcp14">SHOULD</em> use push IDs sequentially, beginning from zero. A client <em class="bcp14">MUST</em> treat receipt of a <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.9"></span> as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.9"></span> of type <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span id="rfc.iref.h.22"></span> when no <a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><span id="rfc.iref.m.14"></span> frame has been sent or when the stream references a push ID that is greater than the maximum push ID.</p></div><div id="rfc.section.4.6.p.4"><p>The push ID is used in one or more <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.10"></span> frames that carry the control data and header fields of the request message. These frames are sent on the <a href="#request-streams" title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.8"></span> that generated the push. This allows the server push to be associated with a client request. When the same push ID is promised on multiple <a href="#request-streams" title="Bidirectional Streams">request streams</a><span id="rfc.iref.r.9"></span>, the decompressed request field sections <em class="bcp14">MUST</em> contain the same fields in the same order, and both the name and the value in each field <em class="bcp14">MUST</em> be identical.</p></div><div id="rfc.section.4.6.p.5"><p>The push ID is then included with the <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.11"></span> that ultimately fulfills those promises. The <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.12"></span> identifies the push ID of the promise that it fulfills, then contains a response to the promised request as described in <a href="#request-response" title="HTTP Message Framing">Section 4.1</a>.</p></div><div id="rfc.section.4.6.p.6"><p>Finally, the push ID can be used in <a href="#frame-cancel-push" title="CANCEL_PUSH">CANCEL_PUSH</a><span id="rfc.iref.c.10"></span> frames; see <a href="#frame-cancel-push" title="CANCEL_PUSH">Section 7.2.3</a>. Clients use this frame to indicate they do not wish to receive a promised resource. Servers use this frame to indicate they will not be fulfilling a previous promise.</p></div><div id="rfc.section.4.6.p.7" class="avoidbreakafter"><p>Not all requests can be pushed. A server <em class="bcp14">MAY</em> push requests that have the following properties:</p></div><div id="rfc.section.4.6.p.8"><ul><li>cacheable; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9.2.3">Section 9.2.3</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a></li><li>safe; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9.2.1">Section 9.2.1</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a></li><li>does not include request content or a trailer section</li></ul></div><div id="rfc.section.4.6.p.9"><p>The server <em class="bcp14">MUST</em> include a value in the :authority pseudo-header field for which the server is authoritative. If the client has not yet validated the connection for the origin indicated by the pushed request, it <em class="bcp14">MUST</em> perform the same verification process it would do before sending a request for that origin on the connection; see <a href="#connection-reuse" title="Connection Reuse">Section 3.3</a>. If this verification fails, the client <em class="bcp14">MUST NOT</em> consider the server authoritative for that origin.</p></div><div id="rfc.section.4.6.p.10"><p>Clients <em class="bcp14">SHOULD</em> send a <a href="#frame-cancel-push" title="CANCEL_PUSH">CANCEL_PUSH</a><span id="rfc.iref.c.11"></span> frame upon receipt of a <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.13"></span> frame carrying a request that is not cacheable, is not known to be safe, that indicates the presence of request content, or for which it does not consider the server authoritative. Any corresponding responses <em class="bcp14">MUST NOT</em> be used or cached.</p></div><div id="rfc.section.4.6.p.11"><p>Each pushed response is associated with one or more client requests. The push is associated with the <a href="#request-streams" title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.10"></span> on which the <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.14"></span> frame was received. The same server push can be associated with additional client requests using a <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.15"></span> frame with the same push ID on multiple <a href="#request-streams" title="Bidirectional Streams">request streams</a><span id="rfc.iref.r.11"></span>. These associations do not affect the operation of the protocol, but they <em class="bcp14">MAY</em> be considered by user agents when deciding how to use pushed resources.</p></div><div id="rfc.section.4.6.p.12"><p>Ordering of a <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.16"></span> frame in relation to certain parts of the response is important. The server <em class="bcp14">SHOULD</em> send <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.17"></span> frames prior to sending <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.23"></span> or <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.12"></span> frames that reference the promised responses. This reduces the chance that a client requests a resource that will be pushed by the server.</p></div><div id="rfc.section.4.6.p.13"><p>Due to reordering, <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.18"></span> data can arrive before the corresponding <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.19"></span> frame. When a client receives a new <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.20"></span> with an as-yet-unknown push ID, both the associated client request and the pushed request header fields are unknown. The client can buffer the stream data in expectation of the matching <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.21"></span>. The client can use stream flow control (<a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-4.1">Section 4.1</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>) to limit the amount of data a server may commit to the pushed stream. Clients <em class="bcp14">SHOULD</em> abort reading and discard data already read from <a href="#push-streams" title="Push Streams">push streams</a><span id="rfc.iref.p.22"></span> if no corresponding <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.23"></span> frame is processed in a reasonable amount of time.</p></div><div id="rfc.section.4.6.p.14"><p>Push stream data can also arrive after a client has cancelled a push. In this case, the client can abort reading the stream with an error code of <a href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span id="rfc.iref.h.24"></span>. This asks the server not to transfer additional data and indicates that it will be discarded upon receipt.</p></div><div id="rfc.section.4.6.p.15"><p>Pushed responses that are cacheable (see <a href="https://www.rfc-editor.org/rfc/rfc9111.html#section-3">Section 3</a> of <a href="#RFC9111"><cite title="HTTP Caching">[HTTP-CACHING]</cite></a>) can be stored by the client, if it implements an HTTP cache. Pushed responses are considered successfully validated on the origin server (e.g., if the "no-cache" cache response directive is present; see <a href="https://www.rfc-editor.org/rfc/rfc9111.html#section-5.2.2.4">Section 5.2.2.4</a> of <a href="#RFC9111"><cite title="HTTP Caching">[HTTP-CACHING]</cite></a>) at the time the pushed response is received.</p></div><div id="rfc.section.4.6.p.16"><p>Pushed responses that are not cacheable <em class="bcp14">MUST NOT</em> be stored by any HTTP cache. They <em class="bcp14">MAY</em> be made available to the application separately.</p></div></section></section><hr class="hidden-print"><section id="connection-closure"><h2 id="rfc.section.5" class="np"><a href="#rfc.section.5">5.</a>&nbsp;<a href="#connection-closure">Connection Closure</a></h2><div id="rfc.section.5.p.1"><p>Once established, an HTTP/3 connection can be used for many requests and responses over time until the connection is closed. Connection closure can happen in any of several different ways.</p></div><section id="idle-connections"><h3 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1.</a>&nbsp;<a href="#idle-connections">Idle Connections</a></h3><div id="rfc.section.5.1.p.1"><p>Each QUIC endpoint declares an idle timeout during the handshake. If the QUIC connection remains idle (no packets received) for longer than this duration, the peer will assume that the connection has been closed. HTTP/3 implementations will need to open a new HTTP/3 connection for new requests if the existing connection has been idle for longer than the idle timeout negotiated during the QUIC handshake, and they <em class="bcp14">SHOULD</em> do so if approaching the idle timeout; see <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-10.1">Section 10.1</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>.</p></div><div id="rfc.section.5.1.p.2"><p>HTTP clients are expected to request that the transport keep connections open while there are responses outstanding for requests or server pushes, as described in <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-10.1.2">Section 10.1.2</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>. If the client is not expecting a response from the server, allowing an idle connection to time out is preferred over expending effort maintaining a connection that might not be needed. A gateway <em class="bcp14">MAY</em> maintain connections in anticipation of need rather than incur the latency cost of connection establishment to servers. Servers <em class="bcp14">SHOULD NOT</em> actively keep connections open.</p></div></section><section id="connection-shutdown"><h3 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2.</a>&nbsp;<a href="#connection-shutdown">Connection Shutdown</a></h3><div id="rfc.section.5.2.p.1"><p>Even when a connection is not idle, either endpoint can decide to stop using the connection and initiate a graceful connection close. Endpoints initiate the graceful shutdown of an HTTP/3 connection by sending a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.2"></span> frame. The <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.3"></span> frame contains an identifier that indicates to the receiver the range of requests or pushes that were or might be processed in this connection. The server sends a client-initiated bidirectional stream ID; the client sends a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.24"></span>. Requests or pushes with the indicated identifier or greater are rejected (<a href="#request-cancellation" title="Request Cancellation and Rejection">Section 4.1.1</a>) by the sender of the <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.4"></span>. This identifier <em class="bcp14">MAY</em> be zero if no requests or pushes were processed.</p></div><div id="rfc.section.5.2.p.2"><p>The information in the <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.5"></span> frame enables a client and server to agree on which requests or pushes were accepted prior to the shutdown of the HTTP/3 connection. Upon sending a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.6"></span> frame, the endpoint <em class="bcp14">SHOULD</em> explicitly cancel (see Sections <a href="#request-cancellation" title="Request Cancellation and Rejection">4.1.1</a> and <a href="#frame-cancel-push" title="CANCEL_PUSH">7.2.3</a>) any requests or pushes that have identifiers greater than or equal to the one indicated, in order to clean up transport state for the affected streams. The endpoint <em class="bcp14">SHOULD</em> continue to do so as more requests or pushes arrive.</p></div><div id="rfc.section.5.2.p.3"><p>Endpoints <em class="bcp14">MUST NOT</em> initiate new requests or promise new pushes on the connection after receipt of a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.7"></span> frame from the peer. Clients <em class="bcp14">MAY</em> establish a new connection to send additional requests.</p></div><div id="rfc.section.5.2.p.4" class="avoidbreakafter"><p>Some requests or pushes might already be in transit:</p></div><div id="rfc.section.5.2.p.5"><ul><li><div><p>Upon receipt of a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.8"></span> frame, if the client has already sent requests with a stream ID greater than or equal to the identifier contained in the <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.9"></span> frame, those requests will not be processed. Clients can safely retry unprocessed requests on a different HTTP connection. A client that is unable to retry requests loses all requests that are in flight when the server closes the connection.</p></div> <div><p>Requests on stream IDs less than the stream ID in a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.10"></span> frame from the server might have been processed; their status cannot be known until a response is received, the stream is reset individually, another <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.11"></span> is received with a lower stream ID than that of the request in question, or the connection terminates.</p></div> <div><p>Servers <em class="bcp14">MAY</em> reject individual requests on streams below the indicated ID if these requests were not processed.</p></div> </li><li>If a server receives a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.12"></span> frame after having promised pushes with a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.25"></span> greater than or equal to the identifier contained in the <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.13"></span> frame, those pushes will not be accepted.</li></ul></div><div id="rfc.section.5.2.p.6"><p>Servers <em class="bcp14">SHOULD</em> send a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.14"></span> frame when the closing of a connection is known in advance, even if the advance notice is small, so that the remote peer can know whether or not a request has been partially processed. For example, if an HTTP client sends a POST at the same time that a server closes a QUIC connection, the client cannot know if the server started to process that POST request if the server does not send a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.15"></span> frame to indicate what streams it might have acted on.</p></div><div id="rfc.section.5.2.p.7"><p>An endpoint <em class="bcp14">MAY</em> send multiple <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.16"></span> frames indicating different identifiers, but the identifier in each frame <em class="bcp14">MUST NOT</em> be greater than the identifier in any previous frame, since clients might already have retried unprocessed requests on another HTTP connection. Receiving a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.17"></span> containing a larger identifier than previously received <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.12"></span> of type <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span id="rfc.iref.h.25"></span>.</p></div><div id="rfc.section.5.2.p.8"><p>An endpoint that is attempting to gracefully shut down a connection can send a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.18"></span> frame with a value set to the maximum possible value (2<sup>62</sup>-4 for servers, 2<sup>62</sup>-1 for clients). This ensures that the peer stops creating new requests or pushes. After allowing time for any in-flight requests or pushes to arrive, the endpoint can send another <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.19"></span> frame indicating which requests or pushes it might accept before the end of the connection. This ensures that a connection can be cleanly shut down without losing requests.</p></div><div id="rfc.section.5.2.p.9"><p>A client has more flexibility in the value it chooses for the Push ID field in a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.20"></span> that it sends. A value of 2<sup>62</sup>-1 indicates that the server can continue fulfilling pushes that have already been promised. A smaller value indicates the client will reject pushes with push IDs greater than or equal to this value. Like the server, the client <em class="bcp14">MAY</em> send subsequent <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.21"></span> frames so long as the specified <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.26"></span> is no greater than any previously sent value.</p></div><div id="rfc.section.5.2.p.10"><p>Even when a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.22"></span> indicates that a given request or push will not be processed or accepted upon receipt, the underlying transport resources still exist. The endpoint that initiated these requests can cancel them to clean up transport state.</p></div><div id="rfc.section.5.2.p.11"><p>Once all accepted requests and pushes have been processed, the endpoint can permit the connection to become idle, or it <em class="bcp14">MAY</em> initiate an immediate closure of the connection. An endpoint that completes a graceful shutdown <em class="bcp14">SHOULD</em> use the <a href="#H3_NO_ERROR">H3_NO_ERROR</a><span id="rfc.iref.h.26"></span> error code when closing the connection.</p></div><div id="rfc.section.5.2.p.12"><p>If a client has consumed all available bidirectional stream IDs with requests, the server need not send a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.23"></span> frame, since the client is unable to make further requests.</p></div></section><section id="immediate-application-closure"><h3 id="rfc.section.5.3"><a href="#rfc.section.5.3">5.3.</a>&nbsp;<a href="#immediate-application-closure">Immediate Application Closure</a></h3><div id="rfc.section.5.3.p.1"><p>An HTTP/3 implementation can immediately close the QUIC connection at any time. This results in sending a QUIC CONNECTION_CLOSE frame to the peer indicating that the application layer has terminated the connection. The application error code in this frame indicates to the peer why the connection is being closed. See <a href="#errors" title="Error Handling">Section 8</a> for error codes that can be used when closing a connection in HTTP/3.</p></div><div id="rfc.section.5.3.p.2"><p>Before closing the connection, a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.24"></span> frame <em class="bcp14">MAY</em> be sent to allow the client to retry some requests. Including the <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.25"></span> frame in the same packet as the QUIC CONNECTION_CLOSE frame improves the chances of the frame being received by clients.</p></div><div id="rfc.section.5.3.p.3"><p>If there are open streams that have not been explicitly closed, they are implicitly closed when the connection is closed; see <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-10.2">Section 10.2</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>.</p></div></section><section id="transport-closure"><h3 id="rfc.section.5.4"><a href="#rfc.section.5.4">5.4.</a>&nbsp;<a href="#transport-closure">Transport Closure</a></h3><div id="rfc.section.5.4.p.1"><p>For various reasons, the QUIC transport could indicate to the application layer that the connection has terminated. This might be due to an explicit closure by the peer, a transport-level error, or a change in network topology that interrupts connectivity.</p></div><div id="rfc.section.5.4.p.2"><p>If a connection terminates without a <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.26"></span> frame, clients <em class="bcp14">MUST</em> assume that any request that was sent, whether in whole or in part, might have been processed.</p></div></section></section><hr class="hidden-print"><section id="stream-mapping"><h2 id="rfc.section.6" class="np"><a href="#rfc.section.6">6.</a>&nbsp;<a href="#stream-mapping">Stream Mapping and Usage</a></h2><div id="rfc.section.6.p.1"><p>A QUIC stream provides reliable in-order delivery of bytes, but makes no guarantees about order of delivery with regard to bytes on other streams. In version 1 of QUIC, the stream data containing HTTP frames is carried by QUIC STREAM frames, but this framing is invisible to the HTTP framing layer. The transport layer buffers and orders received stream data, exposing a reliable byte stream to the application. Although QUIC permits out-of-order delivery within a stream, HTTP/3 does not make use of this feature.</p></div><div id="rfc.section.6.p.2"><p>QUIC streams can be either unidirectional, carrying data only from initiator to receiver, or bidirectional, carrying data in both directions. Streams can be initiated by either the client or the server. For more detail on QUIC streams, see <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-2">Section 2</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>.</p></div><div id="rfc.section.6.p.3"><p>When HTTP fields and data are sent over QUIC, the QUIC layer handles most of the stream management. HTTP does not need to do any separate multiplexing when using QUIC: data sent over a QUIC stream always maps to a particular HTTP transaction or to the entire HTTP/3 connection context.</p></div><section id="request-streams"><h3 id="rfc.section.6.1"><a href="#rfc.section.6.1">6.1.</a>&nbsp;<a href="#request-streams">Bidirectional Streams</a></h3><div id="rfc.section.6.1.p.1"><p>All client-initiated bidirectional streams are used for HTTP requests and responses. A bidirectional stream ensures that the response can be readily correlated with the request. These streams are referred to as request streams.</p></div><div id="rfc.section.6.1.p.2"><p>This means that the client's first request occurs on QUIC stream 0, with subsequent requests on streams 4, 8, and so on. In order to permit these streams to open, an HTTP/3 server <em class="bcp14">SHOULD</em> configure non-zero minimum values for the number of permitted streams and the initial stream flow-control window. So as to not unnecessarily limit parallelism, at least 100 request streams <em class="bcp14">SHOULD</em> be permitted at a time.</p></div><div id="rfc.section.6.1.p.3"><p>HTTP/3 does not use server-initiated bidirectional streams, though an extension could define a use for these streams. Clients <em class="bcp14">MUST</em> treat receipt of a server-initiated bidirectional stream as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.13"></span> of type <a href="#H3_STREAM_CREATION_ERROR">H3_STREAM_CREATION_ERROR</a><span id="rfc.iref.h.27"></span> unless such an extension has been negotiated.</p></div></section><section id="unidirectional-streams"><h3 id="rfc.section.6.2"><a href="#rfc.section.6.2">6.2.</a>&nbsp;<a href="#unidirectional-streams">Unidirectional Streams</a></h3><div id="rfc.section.6.2.p.1"><p>Unidirectional streams, in either direction, are used for a range of purposes. The purpose is indicated by a stream type, which is sent as a variable-length integer at the start of the stream. The format and structure of data that follows this integer is determined by the stream type.</p></div><div id="rfc.figure.1"><div><pre>
Unidirectional Stream Header {
  Stream Type (i),
}
</pre></div></div><p class="figure">Figure 1: Unidirectional Stream Header</p><div id="rfc.section.6.2.p.2"><p>Two stream types are defined in this document: <a href="#control-streams" title="Control Streams">control streams</a><span id="rfc.iref.c.14"></span> (<a href="#control-streams" title="Control Streams">Section 6.2.1</a>) and <a href="#push-streams" title="Push Streams">push streams</a><span id="rfc.iref.p.27"></span> (<a href="#push-streams" title="Push Streams">Section 6.2.2</a>). <a href="#RFC9204"><cite title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a> defines two additional stream types. Other stream types can be defined by extensions to HTTP/3; see <a href="#extensions" title="Extensions to HTTP/3">Section 9</a> for more details. Some stream types are reserved (<a href="#stream-grease" title="Reserved Stream Types">Section 6.2.3</a>).</p></div><div id="rfc.section.6.2.p.3"><p>The performance of HTTP/3 connections in the early phase of their lifetime is sensitive to the creation and exchange of data on unidirectional streams. Endpoints that excessively restrict the number of streams or the flow-control window of these streams will increase the chance that the remote peer reaches the limit early and becomes blocked. In particular, implementations should consider that remote peers may wish to exercise reserved stream behavior (<a href="#stream-grease" title="Reserved Stream Types">Section 6.2.3</a>) with some of the unidirectional streams they are permitted to use.</p></div><div id="rfc.section.6.2.p.4"><p>Each endpoint needs to create at least one unidirectional stream for the HTTP <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.15"></span>. QPACK requires two additional unidirectional streams, and other extensions might require further streams. Therefore, the transport parameters sent by both clients and servers <em class="bcp14">MUST</em> allow the peer to create at least three unidirectional streams. These transport parameters <em class="bcp14">SHOULD</em> also provide at least 1,024 bytes of flow-control credit to each unidirectional stream.</p></div><div id="rfc.section.6.2.p.5"><p>Note that an endpoint is not required to grant additional credits to create more unidirectional streams if its peer consumes all the initial credits before creating the critical unidirectional streams. Endpoints <em class="bcp14">SHOULD</em> create the HTTP <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.16"></span> as well as the unidirectional streams required by mandatory extensions (such as the QPACK encoder and decoder streams) first, and then create additional streams as allowed by their peer.</p></div><div id="rfc.section.6.2.p.6"><p>If the stream header indicates a stream type that is not supported by the recipient, the remainder of the stream cannot be consumed as the semantics are unknown. Recipients of unknown stream types <em class="bcp14">MUST</em> either abort reading of the stream or discard incoming data without further processing. If reading is aborted, the recipient <em class="bcp14">SHOULD</em> use the <a href="#H3_STREAM_CREATION_ERROR">H3_STREAM_CREATION_ERROR</a><span id="rfc.iref.h.28"></span> error code or a reserved error code (<a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>). The recipient <em class="bcp14">MUST NOT</em> consider unknown stream types to be a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.17"></span> of any kind.</p></div><div id="rfc.section.6.2.p.7"><p>As certain stream types can affect connection state, a recipient <em class="bcp14">SHOULD NOT</em> discard data from incoming unidirectional streams prior to reading the stream type.</p></div><div id="rfc.section.6.2.p.8"><p>Implementations <em class="bcp14">MAY</em> send stream types before knowing whether the peer supports them. However, stream types that could modify the state or semantics of existing protocol components, including QPACK or other extensions, <em class="bcp14">MUST NOT</em> be sent until the peer is known to support them.</p></div><div id="rfc.section.6.2.p.9"><p>A sender can close or reset a unidirectional stream unless otherwise specified. A receiver <em class="bcp14">MUST</em> tolerate unidirectional streams being closed or reset prior to the reception of the unidirectional stream header.</p></div><section id="control-streams"><h4 id="rfc.section.6.2.1"><a href="#rfc.section.6.2.1">6.2.1.</a>&nbsp;<a href="#control-streams">Control Streams</a></h4><div id="rfc.section.6.2.1.p.1"><p>A control stream is indicated by a stream type of 0x00. Data on this stream consists of HTTP/3 frames, as defined in <a href="#frames" title="Frame Definitions">Section 7.2</a>.</p></div><div id="rfc.section.6.2.1.p.2"><p>Each side <em class="bcp14">MUST</em> initiate a single control stream at the beginning of the connection and send its <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.7"></span> frame as the first frame on this stream. If the first frame of the control stream is any other frame type, this <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.18"></span> of type <a href="#H3_MISSING_SETTINGS">H3_MISSING_SETTINGS</a><span id="rfc.iref.h.29"></span>. Only one control stream per peer is permitted; receipt of a second stream claiming to be a control stream <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.19"></span> of type <a href="#H3_STREAM_CREATION_ERROR">H3_STREAM_CREATION_ERROR</a><span id="rfc.iref.h.30"></span>. The sender <em class="bcp14">MUST NOT</em> close the control stream, and the receiver <em class="bcp14">MUST NOT</em> request that the sender close the control stream. If either control stream is closed at any point, this <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.20"></span> of type <a href="#H3_CLOSED_CRITICAL_STREAM">H3_CLOSED_CRITICAL_STREAM</a><span id="rfc.iref.h.31"></span>. Connection errors are described in <a href="#errors" title="Error Handling">Section 8</a>.</p></div><div id="rfc.section.6.2.1.p.3"><p>Because the contents of the control stream are used to manage the behavior of other streams, endpoints <em class="bcp14">SHOULD</em> provide enough flow-control credit to keep the peer's control stream from becoming blocked.</p></div><div id="rfc.section.6.2.1.p.4"><p>A pair of unidirectional streams is used rather than a single bidirectional stream. This allows either peer to send data as soon as it is able. Depending on whether 0-RTT is available on the QUIC connection, either client or server might be able to send stream data first.</p></div></section><section id="push-streams"><h4 id="rfc.section.6.2.2"><a href="#rfc.section.6.2.2">6.2.2.</a>&nbsp;<a href="#push-streams">Push Streams</a></h4><div id="rfc.section.6.2.2.p.1"><p>Server push is an optional feature introduced in HTTP/2 that allows a server to initiate a response before a request has been made. See <a href="#server-push" title="Server Push">Section 4.6</a> for more details.</p></div><div id="rfc.section.6.2.2.p.2"><p>A push stream is indicated by a stream type of 0x01, followed by the <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.28"></span> of the promise that it fulfills, encoded as a variable-length integer. The remaining data on this stream consists of HTTP/3 frames, as defined in <a href="#frames" title="Frame Definitions">Section 7.2</a>, and fulfills a promised server push by zero or more interim HTTP responses followed by a single final HTTP response, as defined in <a href="#request-response" title="HTTP Message Framing">Section 4.1</a>. Server push and push IDs are described in <a href="#server-push" title="Server Push">Section 4.6</a>.</p></div><div id="rfc.section.6.2.2.p.3"><p>Only servers can push; if a server receives a client-initiated push stream, this <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.21"></span> of type <a href="#H3_STREAM_CREATION_ERROR">H3_STREAM_CREATION_ERROR</a><span id="rfc.iref.h.32"></span>.</p></div><div id="rfc.figure.2"><div><pre>
Push Stream Header {
  Stream Type (i) = 0x01,
  Push ID (i),
}
</pre></div></div><p class="figure">Figure 2: Push Stream Header</p><div id="rfc.section.6.2.2.p.4"><p>A client <em class="bcp14">SHOULD NOT</em> abort reading on a push stream prior to reading the push stream header, as this could lead to disagreement between client and server on which push IDs have already been consumed.</p></div><div id="rfc.section.6.2.2.p.5"><p>Each <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.29"></span> <em class="bcp14">MUST</em> only be used once in a push stream header. If a client detects that a push stream header includes a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.30"></span> that was used in another push stream header, the client <em class="bcp14">MUST</em> treat this as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.22"></span> of type <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span id="rfc.iref.h.33"></span>.</p></div></section><section id="stream-grease"><h4 id="rfc.section.6.2.3"><a href="#rfc.section.6.2.3">6.2.3.</a>&nbsp;<a href="#stream-grease">Reserved Stream Types</a></h4><div id="rfc.section.6.2.3.p.1"><p>Stream types of the format <span class="tt">0x1f * N + 0x21</span> for non-negative integer values of <span class="tt">N</span> are reserved to exercise the requirement that unknown types be ignored. These streams have no semantics, and they can be sent when application-layer padding is desired. They <em class="bcp14">MAY</em> also be sent on connections where no data is currently being transferred. Endpoints <em class="bcp14">MUST NOT</em> consider these streams to have any meaning upon receipt.</p></div><div id="rfc.section.6.2.3.p.2"><p>The payload and length of the stream are selected in any manner the sending implementation chooses. When sending a reserved stream type, the implementation <em class="bcp14">MAY</em> either terminate the stream cleanly or reset it. When resetting the stream, either the <a href="#H3_NO_ERROR">H3_NO_ERROR</a><span id="rfc.iref.h.34"></span> error code or a reserved error code (<a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>) <em class="bcp14">SHOULD</em> be used.</p></div></section></section></section><hr class="hidden-print"><section id="http-framing-layer"><h2 id="rfc.section.7" class="np"><a href="#rfc.section.7">7.</a>&nbsp;<a href="#http-framing-layer">HTTP Framing Layer</a></h2><div id="rfc.section.7.p.1"><p>HTTP frames are carried on QUIC streams, as described in <a href="#stream-mapping" title="Stream Mapping and Usage">Section 6</a>. HTTP/3 defines three stream types: <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.23"></span>, <a href="#request-streams" title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.12"></span>, and <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.31"></span>. This section describes HTTP/3 frame formats and their permitted stream types; see <a href="#stream-frame-mapping" title="HTTP/3 Frames and Stream Type Overview">Table 1</a> for an overview. A comparison between HTTP/2 and HTTP/3 frames is provided in <a href="#h2-frames" title="HTTP Frame Types">Appendix A.2</a>.</p></div><div class="table table-condensed table-striped" id="stream-frame-mapping"><table class="v3 text-center"><caption>Table 1: HTTP/3 Frames and Stream Type Overview</caption><thead><tr><th class="text-left" colspan="1" rowspan="1">Frame</th><th class="text-left" colspan="1" rowspan="1">Control Stream</th><th class="text-left" colspan="1" rowspan="1">Request Stream</th><th class="text-left" colspan="1" rowspan="1">Push Stream</th><th class="text-left" colspan="1" rowspan="1">Section</th></tr></thead><tbody><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-data" title="DATA">DATA</a><div id="rfc.iref.d.13"></div></td><td class="text-left" colspan="1" rowspan="1">No</td><td class="text-left" colspan="1" rowspan="1">Yes</td><td class="text-left" colspan="1" rowspan="1">Yes</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-data" title="DATA">Section 7.2.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-headers" title="HEADERS">HEADERS</a><div id="rfc.iref.h.35"></div></td><td class="text-left" colspan="1" rowspan="1">No</td><td class="text-left" colspan="1" rowspan="1">Yes</td><td class="text-left" colspan="1" rowspan="1">Yes</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-headers" title="HEADERS">Section 7.2.2</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-cancel-push" title="CANCEL_PUSH">CANCEL_PUSH</a><div id="rfc.iref.c.24"></div></td><td class="text-left" colspan="1" rowspan="1">Yes</td><td class="text-left" colspan="1" rowspan="1">No</td><td class="text-left" colspan="1" rowspan="1">No</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-cancel-push" title="CANCEL_PUSH">Section 7.2.3</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-settings" title="SETTINGS">SETTINGS</a><div id="rfc.iref.s.8"></div></td><td class="text-left" colspan="1" rowspan="1">Yes (1)</td><td class="text-left" colspan="1" rowspan="1">No</td><td class="text-left" colspan="1" rowspan="1">No</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-settings" title="SETTINGS">Section 7.2.4</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><div id="rfc.iref.p.32"></div></td><td class="text-left" colspan="1" rowspan="1">No</td><td class="text-left" colspan="1" rowspan="1">Yes</td><td class="text-left" colspan="1" rowspan="1">No</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-push-promise" title="PUSH_PROMISE">Section 7.2.5</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-goaway" title="GOAWAY">GOAWAY</a><div id="rfc.iref.g.27"></div></td><td class="text-left" colspan="1" rowspan="1">Yes</td><td class="text-left" colspan="1" rowspan="1">No</td><td class="text-left" colspan="1" rowspan="1">No</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-goaway" title="GOAWAY">Section 7.2.6</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><div id="rfc.iref.m.15"></div></td><td class="text-left" colspan="1" rowspan="1">Yes</td><td class="text-left" colspan="1" rowspan="1">No</td><td class="text-left" colspan="1" rowspan="1">No</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-max-push-id" title="MAX_PUSH_ID">Section 7.2.7</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1">Reserved</td><td class="text-left" colspan="1" rowspan="1">Yes</td><td class="text-left" colspan="1" rowspan="1">Yes</td><td class="text-left" colspan="1" rowspan="1">Yes</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-reserved" title="Reserved Frame Types">Section 7.2.8</a></td></tr></tbody></table></div><div id="rfc.section.7.p.2"><p>The <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.9"></span> frame can only occur as the first frame of a Control stream; this is indicated in <a href="#stream-frame-mapping" title="HTTP/3 Frames and Stream Type Overview">Table 1</a> with a (1). Specific guidance is provided in the relevant section.</p></div><div id="rfc.section.7.p.3"><p>Note that, unlike QUIC frames, HTTP/3 frames can span multiple packets.</p></div><section id="frame-layout"><h3 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1.</a>&nbsp;<a href="#frame-layout">Frame Layout</a></h3><div id="rfc.section.7.1.p.1" class="avoidbreakafter"><p>All frames have the following format:</p></div><div id="rfc.figure.3"><div><pre>
HTTP/3 Frame Format {
  Type (i),
  Length (i),
  Frame Payload (..),
}
</pre></div></div><p class="figure">Figure 3: HTTP/3 Frame Format</p><div id="rfc.section.7.1.p.2" class="avoidbreakafter"><p>A frame includes the following fields:</p></div><div id="rfc.section.7.1.p.3"><dl><dt>Type:</dt><dd style="margin-left: 1.5em"><div>A variable-length integer that identifies the frame type.</div></dd><dt>Length:</dt><dd style="margin-left: 1.5em"><div>A variable-length integer that describes the length in bytes of the Frame Payload.</div></dd><dt>Frame Payload:</dt><dd style="margin-left: 1.5em"><div>A payload, the semantics of which are determined by the Type field.</div></dd></dl></div><div id="rfc.section.7.1.p.4"><p>Each frame's payload <em class="bcp14">MUST</em> contain exactly the fields identified in its description. A frame payload that contains additional bytes after the identified fields or a frame payload that terminates before the end of the identified fields <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.25"></span> of type <a href="#H3_FRAME_ERROR">H3_FRAME_ERROR</a><span id="rfc.iref.h.36"></span>. In particular, redundant length encodings <em class="bcp14">MUST</em> be verified to be self-consistent; see <a href="#frame-parsing" title="Frame Parsing">Section 10.8</a>.</p></div><div id="rfc.section.7.1.p.5"><p>When a stream terminates cleanly, if the last frame on the stream was truncated, this <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.26"></span> of type <a href="#H3_FRAME_ERROR">H3_FRAME_ERROR</a><span id="rfc.iref.h.37"></span>. Streams that terminate abruptly may be reset at any point in a frame.</p></div></section><section id="frames"><h3 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2.</a>&nbsp;<a href="#frames">Frame Definitions</a></h3><section id="frame-data"><h4 id="rfc.section.7.2.1"><a href="#rfc.section.7.2.1">7.2.1.</a>&nbsp;<a href="#frame-data">DATA</a></h4><div id="rfc.section.7.2.1.p.1"><p>DATA frames (type=0x00) convey arbitrary, variable-length sequences of bytes associated with HTTP request or response content.</p></div><div id="rfc.section.7.2.1.p.2"><p>DATA frames <em class="bcp14">MUST</em> be associated with an HTTP request or response. If a DATA frame is received on a <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.27"></span>, the recipient <em class="bcp14">MUST</em> respond with a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.28"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.38"></span>.</p></div><div id="rfc.figure.4"><div><pre>
DATA Frame {
  Type (i) = 0x00,
  Length (i),
  Data (..),
}
</pre></div></div><p class="figure">Figure 4: DATA Frame</p></section><section id="frame-headers"><h4 id="rfc.section.7.2.2"><a href="#rfc.section.7.2.2">7.2.2.</a>&nbsp;<a href="#frame-headers">HEADERS</a></h4><div id="rfc.section.7.2.2.p.1"><p>The HEADERS frame (type=0x01) is used to carry an HTTP field section that is encoded using QPACK. See <a href="#RFC9204"><cite title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a> for more details.</p></div><div id="rfc.figure.5"><div><pre>
HEADERS Frame {
  Type (i) = 0x01,
  Length (i),
  Encoded Field Section (..),
}
</pre></div></div><p class="figure">Figure 5: HEADERS Frame</p><div id="rfc.section.7.2.2.p.2"><p>HEADERS frames can only be sent on <a href="#request-streams" title="Bidirectional Streams">request streams</a><span id="rfc.iref.r.13"></span> or <a href="#push-streams" title="Push Streams">push streams</a><span id="rfc.iref.p.33"></span>. If a HEADERS frame is received on a <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.29"></span>, the recipient <em class="bcp14">MUST</em> respond with a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.30"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.39"></span>.</p></div></section><section id="frame-cancel-push"><h4 id="rfc.section.7.2.3"><a href="#rfc.section.7.2.3">7.2.3.</a>&nbsp;<a href="#frame-cancel-push">CANCEL_PUSH</a></h4><div id="rfc.section.7.2.3.p.1"><p>The CANCEL_PUSH frame (type=0x03) is used to request cancellation of a server push prior to the <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.34"></span> being received. The CANCEL_PUSH frame identifies a server push by <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.35"></span> (see <a href="#server-push" title="Server Push">Section 4.6</a>), encoded as a variable-length integer.</p></div><div id="rfc.section.7.2.3.p.2"><p>When a client sends a CANCEL_PUSH frame, it is indicating that it does not wish to receive the promised resource. The server <em class="bcp14">SHOULD</em> abort sending the resource, but the mechanism to do so depends on the state of the corresponding <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.36"></span>. If the server has not yet created a <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.37"></span>, it does not create one. If the <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.38"></span> is open, the server <em class="bcp14">SHOULD</em> abruptly terminate that stream. If the <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.39"></span> has already ended, the server <em class="bcp14">MAY</em> still abruptly terminate the stream or <em class="bcp14">MAY</em> take no action.</p></div><div id="rfc.section.7.2.3.p.3"><p>A server sends a CANCEL_PUSH frame to indicate that it will not be fulfilling a promise that was previously sent. The client cannot expect the corresponding promise to be fulfilled, unless it has already received and processed the promised response. Regardless of whether a <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.40"></span> has been opened, a server <em class="bcp14">SHOULD</em> send a CANCEL_PUSH frame when it determines that promise will not be fulfilled. If a stream has already been opened, the server can abort sending on the stream with an error code of <a href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span id="rfc.iref.h.40"></span>.</p></div><div id="rfc.section.7.2.3.p.4"><p>Sending a CANCEL_PUSH frame has no direct effect on the state of existing <a href="#push-streams" title="Push Streams">push streams</a><span id="rfc.iref.p.41"></span>. A client <em class="bcp14">SHOULD NOT</em> send a CANCEL_PUSH frame when it has already received a corresponding <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.42"></span>. A <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.43"></span> could arrive after a client has sent a CANCEL_PUSH frame, because a server might not have processed the CANCEL_PUSH. The client <em class="bcp14">SHOULD</em> abort reading the stream with an error code of <a href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span id="rfc.iref.h.41"></span>.</p></div><div id="rfc.section.7.2.3.p.5"><p>A CANCEL_PUSH frame is sent on the <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.31"></span>. Receiving a CANCEL_PUSH frame on a stream other than the <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.32"></span> <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.33"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.42"></span>.</p></div><div id="rfc.figure.6"><div><pre>
CANCEL_PUSH Frame {
  Type (i) = 0x03,
  Length (i),
  Push ID (i),
}
</pre></div></div><p class="figure">Figure 6: CANCEL_PUSH Frame</p><div id="rfc.section.7.2.3.p.6"><p>The CANCEL_PUSH frame carries a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.44"></span> encoded as a variable-length integer. The Push ID field identifies the server push that is being cancelled; see <a href="#server-push" title="Server Push">Section 4.6</a>. If a CANCEL_PUSH frame is received that references a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.45"></span> greater than currently allowed on the connection, this <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.34"></span> of type <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span id="rfc.iref.h.43"></span>.</p></div><div id="rfc.section.7.2.3.p.7"><p>If the client receives a CANCEL_PUSH frame, that frame might identify a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.46"></span> that has not yet been mentioned by a <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.47"></span> frame due to reordering. If a server receives a CANCEL_PUSH frame for a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.48"></span> that has not yet been mentioned by a <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.49"></span> frame, this <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.35"></span> of type <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span id="rfc.iref.h.44"></span>.</p></div></section><section id="frame-settings"><h4 id="rfc.section.7.2.4"><a href="#rfc.section.7.2.4">7.2.4.</a>&nbsp;<a href="#frame-settings">SETTINGS</a></h4><div id="rfc.section.7.2.4.p.1"><p>The SETTINGS frame (type=0x04) conveys configuration parameters that affect how endpoints communicate, such as preferences and constraints on peer behavior. Individually, a SETTINGS parameter can also be referred to as a "setting"; the identifier and value of each setting parameter can be referred to as a "setting identifier" and a "setting value".</p></div><div id="rfc.section.7.2.4.p.2"><p>SETTINGS frames always apply to an entire HTTP/3 connection, never a single stream. A SETTINGS frame <em class="bcp14">MUST</em> be sent as the first frame of each <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.36"></span> (see <a href="#control-streams" title="Control Streams">Section 6.2.1</a>) by each peer, and it <em class="bcp14">MUST NOT</em> be sent subsequently. If an endpoint receives a second SETTINGS frame on the <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.37"></span>, the endpoint <em class="bcp14">MUST</em> respond with a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.38"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.45"></span>.</p></div><div id="rfc.section.7.2.4.p.3"><p>SETTINGS frames <em class="bcp14">MUST NOT</em> be sent on any stream other than the <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.39"></span>. If an endpoint receives a SETTINGS frame on a different stream, the endpoint <em class="bcp14">MUST</em> respond with a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.40"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.46"></span>.</p></div><div id="rfc.section.7.2.4.p.4"><p>SETTINGS parameters are not negotiated; they describe characteristics of the sending peer that can be used by the receiving peer. However, a negotiation can be implied by the use of SETTINGS: each peer uses SETTINGS to advertise a set of supported values. The definition of the setting would describe how each peer combines the two sets to conclude which choice will be used. SETTINGS does not provide a mechanism to identify when the choice takes effect.</p></div><div id="rfc.section.7.2.4.p.5"><p>Different values for the same parameter can be advertised by each peer. For example, a client might be willing to consume a very large response field section, while servers are more cautious about request size.</p></div><div id="rfc.section.7.2.4.p.6"><p>The same setting identifier <em class="bcp14">MUST NOT</em> occur more than once in the SETTINGS frame. A receiver <em class="bcp14">MAY</em> treat the presence of duplicate setting identifiers as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.41"></span> of type <a href="#H3_SETTINGS_ERROR">H3_SETTINGS_ERROR</a><span id="rfc.iref.h.47"></span>.</p></div><div id="rfc.section.7.2.4.p.7"><p>The payload of a SETTINGS frame consists of zero or more parameters. Each parameter consists of a setting identifier and a value, both encoded as QUIC variable-length integers.</p></div><div id="rfc.figure.7"><div><pre>
Setting {
  Identifier (i),
  Value (i),
}

SETTINGS Frame {
  Type (i) = 0x04,
  Length (i),
  Setting (..) ...,
}
</pre></div></div><p class="figure">Figure 7: SETTINGS Frame</p><div id="rfc.section.7.2.4.p.8"><p>An implementation <em class="bcp14">MUST</em> ignore any parameter with an identifier it does not understand.</p></div><section id="settings-parameters"><h5 id="rfc.section.7.2.4.1"><a href="#rfc.section.7.2.4.1">7.2.4.1.</a>&nbsp;<a href="#settings-parameters">Defined SETTINGS Parameters</a></h5><div id="rfc.section.7.2.4.1.p.1" class="avoidbreakafter"><p>The following settings are defined in HTTP/3:</p></div><div id="rfc.section.7.2.4.1.p.2"><dl><dt>SETTINGS_MAX_FIELD_SECTION_SIZE (0x06)<div id="rfc.iref.s.10"></div>:</dt><dd style="margin-left: 1.5em"><div id="SETTINGS_MAX_FIELD_SECTION_SIZE">The default value is unlimited. See <a href="#header-size-constraints" title="Header Size Constraints">Section 4.2.2</a> for usage.</div></dd></dl></div><div id="rfc.section.7.2.4.1.p.3"><p>Setting identifiers of the format <span class="tt">0x1f * N + 0x21</span> for non-negative integer values of <span class="tt">N</span> are reserved to exercise the requirement that unknown identifiers be ignored. Such settings have no defined meaning. Endpoints <em class="bcp14">SHOULD</em> include at least one such setting in their SETTINGS frame. Endpoints <em class="bcp14">MUST NOT</em> consider such settings to have any meaning upon receipt.</p></div><div id="rfc.section.7.2.4.1.p.4"><p>Because the setting has no defined meaning, the value of the setting can be any value the implementation selects.</p></div><div id="rfc.section.7.2.4.1.p.5"><p>Setting identifiers that were defined in <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a> where there is no corresponding HTTP/3 setting have also been reserved (<a href="#iana-settings" title="Settings Parameters">Section 11.2.2</a>). These reserved settings <em class="bcp14">MUST NOT</em> be sent, and their receipt <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.42"></span> of type <a href="#H3_SETTINGS_ERROR">H3_SETTINGS_ERROR</a><span id="rfc.iref.h.48"></span>.</p></div><div id="rfc.section.7.2.4.1.p.6"><p>Additional settings can be defined by extensions to HTTP/3; see <a href="#extensions" title="Extensions to HTTP/3">Section 9</a> for more details.</p></div></section><section id="settings-initialization"><h5 id="rfc.section.7.2.4.2"><a href="#rfc.section.7.2.4.2">7.2.4.2.</a>&nbsp;<a href="#settings-initialization">Initialization</a></h5><div id="rfc.section.7.2.4.2.p.1"><p>An HTTP implementation <em class="bcp14">MUST NOT</em> send frames or requests that would be invalid based on its current understanding of the peer's settings.</p></div><div id="rfc.section.7.2.4.2.p.2"><p>All settings begin at an initial value. Each endpoint <em class="bcp14">SHOULD</em> use these initial values to send messages before the peer's SETTINGS frame has arrived, as packets carrying the settings can be lost or delayed. When the SETTINGS frame arrives, any settings are changed to their new values.</p></div><div id="rfc.section.7.2.4.2.p.3"><p>This removes the need to wait for the SETTINGS frame before sending messages. Endpoints <em class="bcp14">MUST NOT</em> require any data to be received from the peer prior to sending the SETTINGS frame; settings <em class="bcp14">MUST</em> be sent as soon as the transport is ready to send data.</p></div><div id="rfc.section.7.2.4.2.p.4"><p>For servers, the initial value of each client setting is the default value.</p></div><div id="rfc.section.7.2.4.2.p.5"><p>For clients using a 1-RTT QUIC connection, the initial value of each server setting is the default value. 1-RTT keys will always become available prior to the packet containing SETTINGS being processed by QUIC, even if the server sends SETTINGS immediately. Clients <em class="bcp14">SHOULD NOT</em> wait indefinitely for SETTINGS to arrive before sending requests, but they <em class="bcp14">SHOULD</em> process received datagrams in order to increase the likelihood of processing SETTINGS before sending the first request.</p></div><div id="rfc.section.7.2.4.2.p.6"><p>When a 0-RTT QUIC connection is being used, the initial value of each server setting is the value used in the previous session. Clients <em class="bcp14">SHOULD</em> store the settings the server provided in the HTTP/3 connection where resumption information was provided, but they <em class="bcp14">MAY</em> opt not to store settings in certain cases (e.g., if the session ticket is received before the SETTINGS frame). A client <em class="bcp14">MUST</em> comply with stored settings -- or default values if no values are stored -- when attempting 0-RTT. Once a server has provided new settings, clients <em class="bcp14">MUST</em> comply with those values.</p></div><div id="rfc.section.7.2.4.2.p.7"><p>A server can remember the settings that it advertised or store an integrity-protected copy of the values in the ticket and recover the information when accepting 0-RTT data. A server uses the HTTP/3 settings values in determining whether to accept 0-RTT data. If the server cannot determine that the settings remembered by a client are compatible with its current settings, it <em class="bcp14">MUST NOT</em> accept 0-RTT data. Remembered settings are compatible if a client complying with those settings would not violate the server's current settings.</p></div><div id="rfc.section.7.2.4.2.p.8"><p>A server <em class="bcp14">MAY</em> accept 0-RTT and subsequently provide different settings in its SETTINGS frame. If 0-RTT data is accepted by the server, its SETTINGS frame <em class="bcp14">MUST NOT</em> reduce any limits or alter any values that might be violated by the client with its 0-RTT data. The server <em class="bcp14">MUST</em> include all settings that differ from their default values. If a server accepts 0-RTT but then sends settings that are not compatible with the previously specified settings, this <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.43"></span> of type <a href="#H3_SETTINGS_ERROR">H3_SETTINGS_ERROR</a><span id="rfc.iref.h.49"></span>. If a server accepts 0-RTT but then sends a SETTINGS frame that omits a setting value that the client understands (apart from reserved setting identifiers) that was previously specified to have a non-default value, this <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.44"></span> of type <a href="#H3_SETTINGS_ERROR">H3_SETTINGS_ERROR</a><span id="rfc.iref.h.50"></span>.</p></div></section></section><section id="frame-push-promise"><h4 id="rfc.section.7.2.5"><a href="#rfc.section.7.2.5">7.2.5.</a>&nbsp;<a href="#frame-push-promise">PUSH_PROMISE</a></h4><div id="rfc.section.7.2.5.p.1"><p>The PUSH_PROMISE frame (type=0x05) is used to carry a promised request header section from server to client on a <a href="#request-streams" title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.14"></span>.</p></div><div id="rfc.figure.8"><div><pre>
PUSH_PROMISE Frame {
  Type (i) = 0x05,
  Length (i),
  Push ID (i),
  Encoded Field Section (..),
}
</pre></div></div><p class="figure">Figure 8: PUSH_PROMISE Frame</p><div id="rfc.section.7.2.5.p.2" class="avoidbreakafter"><p>The payload consists of:</p></div><div id="rfc.section.7.2.5.p.3"><dl><dt>Push ID:</dt><dd style="margin-left: 1.5em"><div>A variable-length integer that identifies the server push operation. A <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.50"></span> is used in <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.51"></span> headers (<a href="#server-push" title="Server Push">Section 4.6</a>) and <a href="#frame-cancel-push" title="CANCEL_PUSH">CANCEL_PUSH</a><span id="rfc.iref.c.45"></span> frames.</div></dd><dt>Encoded Field Section:</dt><dd style="margin-left: 1.5em"><div>QPACK-encoded request header fields for the promised response. See <a href="#RFC9204"><cite title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a> for more details.</div></dd></dl></div><div id="rfc.section.7.2.5.p.4"><p>A server <em class="bcp14">MUST NOT</em> use a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.52"></span> that is larger than the client has provided in a <a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><span id="rfc.iref.m.16"></span> frame (<a href="#frame-max-push-id" title="MAX_PUSH_ID">Section 7.2.7</a>). A client <em class="bcp14">MUST</em> treat receipt of a PUSH_PROMISE frame that contains a larger <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.53"></span> than the client has advertised as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.46"></span> of <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span id="rfc.iref.h.51"></span>.</p></div><div id="rfc.section.7.2.5.p.5"><p>A server <em class="bcp14">MAY</em> use the same <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.54"></span> in multiple PUSH_PROMISE frames. If so, the decompressed request header sets <em class="bcp14">MUST</em> contain the same fields in the same order, and both the name and the value in each field <em class="bcp14">MUST</em> be exact matches. Clients <em class="bcp14">SHOULD</em> compare the request header sections for resources promised multiple times. If a client receives a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.55"></span> that has already been promised and detects a mismatch, it <em class="bcp14">MUST</em> respond with a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.47"></span> of type <a href="#H3_GENERAL_PROTOCOL_ERROR">H3_GENERAL_PROTOCOL_ERROR</a><span id="rfc.iref.h.52"></span>. If the decompressed field sections match exactly, the client <em class="bcp14">SHOULD</em> associate the pushed content with each stream on which a PUSH_PROMISE frame was received.</p></div><div id="rfc.section.7.2.5.p.6"><p>Allowing duplicate references to the same <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.56"></span> is primarily to reduce duplication caused by concurrent requests. A server <em class="bcp14">SHOULD</em> avoid reusing a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.57"></span> over a long period. Clients are likely to consume server push responses and not retain them for reuse over time. Clients that see a PUSH_PROMISE frame that uses a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.58"></span> that they have already consumed and discarded are forced to ignore the promise.</p></div><div id="rfc.section.7.2.5.p.7"><p>If a PUSH_PROMISE frame is received on the <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.48"></span>, the client <em class="bcp14">MUST</em> respond with a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.49"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.53"></span>.</p></div><div id="rfc.section.7.2.5.p.8"><p>A client <em class="bcp14">MUST NOT</em> send a PUSH_PROMISE frame. A server <em class="bcp14">MUST</em> treat the receipt of a PUSH_PROMISE frame as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.50"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.54"></span>.</p></div><div id="rfc.section.7.2.5.p.9"><p>See <a href="#server-push" title="Server Push">Section 4.6</a> for a description of the overall server push mechanism.</p></div></section><section id="frame-goaway"><h4 id="rfc.section.7.2.6"><a href="#rfc.section.7.2.6">7.2.6.</a>&nbsp;<a href="#frame-goaway">GOAWAY</a></h4><div id="rfc.section.7.2.6.p.1"><p>The GOAWAY frame (type=0x07) is used to initiate graceful shutdown of an HTTP/3 connection by either endpoint. GOAWAY allows an endpoint to stop accepting new requests or pushes while still finishing processing of previously received requests and pushes. This enables administrative actions, like server maintenance. GOAWAY by itself does not close a connection.</p></div><div id="rfc.figure.9"><div><pre>
GOAWAY Frame {
  Type (i) = 0x07,
  Length (i),
  Stream ID/Push ID (i),
}
</pre></div></div><p class="figure">Figure 9: GOAWAY Frame</p><div id="rfc.section.7.2.6.p.2"><p>The GOAWAY frame is always sent on the <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.51"></span>. In the server-to-client direction, it carries a QUIC stream ID for a client-initiated bidirectional stream encoded as a variable-length integer. A client <em class="bcp14">MUST</em> treat receipt of a GOAWAY frame containing a stream ID of any other type as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.52"></span> of type <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span id="rfc.iref.h.55"></span>.</p></div><div id="rfc.section.7.2.6.p.3"><p>In the client-to-server direction, the GOAWAY frame carries a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.59"></span> encoded as a variable-length integer.</p></div><div id="rfc.section.7.2.6.p.4"><p>The GOAWAY frame applies to the entire connection, not a specific stream. A client <em class="bcp14">MUST</em> treat a GOAWAY frame on a stream other than the <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.53"></span> as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.54"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.56"></span>.</p></div><div id="rfc.section.7.2.6.p.5"><p>See <a href="#connection-shutdown" title="Connection Shutdown">Section 5.2</a> for more information on the use of the GOAWAY frame.</p></div></section><section id="frame-max-push-id"><h4 id="rfc.section.7.2.7"><a href="#rfc.section.7.2.7">7.2.7.</a>&nbsp;<a href="#frame-max-push-id">MAX_PUSH_ID</a></h4><div id="rfc.section.7.2.7.p.1"><p>The MAX_PUSH_ID frame (type=0x0d) is used by clients to control the number of server pushes that the server can initiate. This sets the maximum value for a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.60"></span> that the server can use in <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.61"></span> and <a href="#frame-cancel-push" title="CANCEL_PUSH">CANCEL_PUSH</a><span id="rfc.iref.c.55"></span> frames. Consequently, this also limits the number of <a href="#push-streams" title="Push Streams">push streams</a><span id="rfc.iref.p.62"></span> that the server can initiate in addition to the limit maintained by the QUIC transport.</p></div><div id="rfc.section.7.2.7.p.2"><p>The MAX_PUSH_ID frame is always sent on the <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.56"></span>. Receipt of a MAX_PUSH_ID frame on any other stream <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.57"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.57"></span>.</p></div><div id="rfc.section.7.2.7.p.3"><p>A server <em class="bcp14">MUST NOT</em> send a MAX_PUSH_ID frame. A client <em class="bcp14">MUST</em> treat the receipt of a MAX_PUSH_ID frame as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.58"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.58"></span>.</p></div><div id="rfc.section.7.2.7.p.4"><p>The maximum <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.63"></span> is unset when an HTTP/3 connection is created, meaning that a server cannot push until it receives a MAX_PUSH_ID frame. A client that wishes to manage the number of promised server pushes can increase the maximum <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.64"></span> by sending MAX_PUSH_ID frames as the server fulfills or cancels server pushes.</p></div><div id="rfc.figure.10"><div><pre>
MAX_PUSH_ID Frame {
  Type (i) = 0x0d,
  Length (i),
  Push ID (i),
}
</pre></div></div><p class="figure">Figure 10: MAX_PUSH_ID Frame</p><div id="rfc.section.7.2.7.p.5"><p>The MAX_PUSH_ID frame carries a single variable-length integer that identifies the maximum value for a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.65"></span> that the server can use; see <a href="#server-push" title="Server Push">Section 4.6</a>. A MAX_PUSH_ID frame cannot reduce the maximum <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.66"></span>; receipt of a MAX_PUSH_ID frame that contains a smaller value than previously received <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.59"></span> of type <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span id="rfc.iref.h.59"></span>.</p></div></section><section id="frame-reserved"><h4 id="rfc.section.7.2.8"><a href="#rfc.section.7.2.8">7.2.8.</a>&nbsp;<a href="#frame-reserved">Reserved Frame Types</a></h4><div id="rfc.section.7.2.8.p.1"><p>Frame types of the format <span class="tt">0x1f * N + 0x21</span> for non-negative integer values of <span class="tt">N</span> are reserved to exercise the requirement that unknown types be ignored (<a href="#extensions" title="Extensions to HTTP/3">Section 9</a>). These frames have no semantics, and they <em class="bcp14">MAY</em> be sent on any stream where frames are allowed to be sent. This enables their use for application-layer padding. Endpoints <em class="bcp14">MUST NOT</em> consider these frames to have any meaning upon receipt.</p></div><div id="rfc.section.7.2.8.p.2"><p>The payload and length of the frames are selected in any manner the implementation chooses.</p></div><div id="rfc.section.7.2.8.p.3"><p>Frame types that were used in HTTP/2 where there is no corresponding HTTP/3 frame have also been reserved (<a href="#iana-frames" title="Frame Types">Section 11.2.1</a>). These frame types <em class="bcp14">MUST NOT</em> be sent, and their receipt <em class="bcp14">MUST</em> be treated as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.60"></span> of type <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.60"></span>.</p></div></section></section></section><hr class="hidden-print"><section id="errors"><h2 id="rfc.section.8" class="np"><a href="#rfc.section.8">8.</a>&nbsp;<a href="#errors">Error Handling</a></h2><div id="rfc.section.8.p.1"><p>When a stream cannot be completed successfully, QUIC allows the application to abruptly terminate (reset) that stream and communicate a reason; see <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-2.4">Section 2.4</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>. This is referred to as a "stream error". An HTTP/3 implementation can decide to close a QUIC stream and communicate the type of error. Wire encodings of error codes are defined in <a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>. Stream errors are distinct from HTTP status codes that indicate error conditions. Stream errors indicate that the sender did not transfer or consume the full request or response, while HTTP status codes indicate the result of a request that was successfully received.</p></div><div id="rfc.section.8.p.2"><p>If an entire connection needs to be terminated, QUIC similarly provides mechanisms to communicate a reason; see <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-5.3">Section 5.3</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>. This is referred to as a "connection error". Similar to stream errors, an HTTP/3 implementation can terminate a QUIC connection and communicate the reason using an error code from <a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>.</p></div><div id="rfc.section.8.p.3"><p>Although the reasons for closing streams and connections are called "errors", these actions do not necessarily indicate a problem with the connection or either implementation. For example, a stream can be reset if the requested resource is no longer needed.</p></div><div id="rfc.section.8.p.4"><p>An endpoint <em class="bcp14">MAY</em> choose to treat a stream error as a connection error under certain circumstances, closing the entire connection in response to a condition on a single stream. Implementations need to consider the impact on outstanding requests before making this choice.</p></div><div id="rfc.section.8.p.5"><p>Because new error codes can be defined without negotiation (see <a href="#extensions" title="Extensions to HTTP/3">Section 9</a>), use of an error code in an unexpected context or receipt of an unknown error code <em class="bcp14">MUST</em> be treated as equivalent to <a href="#H3_NO_ERROR">H3_NO_ERROR</a><span id="rfc.iref.h.61"></span>. However, closing a stream can have other effects regardless of the error code; for example, see <a href="#request-response" title="HTTP Message Framing">Section 4.1</a>.</p></div><section id="http-error-codes"><h3 id="rfc.section.8.1"><a href="#rfc.section.8.1">8.1.</a>&nbsp;<a href="#http-error-codes">HTTP/3 Error Codes</a></h3><div id="rfc.section.8.1.p.1"><p>The following error codes are defined for use when abruptly terminating streams, aborting reading of streams, or immediately closing HTTP/3 connections.</p></div><div id="rfc.section.8.1.p.2"><dl><dt>H3_NO_ERROR (0x0100)<div id="rfc.iref.h.62"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_NO_ERROR">No error. This is used when the connection or stream needs to be closed, but there is no error to signal.</div></dd><dt>H3_GENERAL_PROTOCOL_ERROR (0x0101)<div id="rfc.iref.h.63"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_GENERAL_PROTOCOL_ERROR">Peer violated protocol requirements in a way that does not match a more specific error code or endpoint declines to use the more specific error code.</div></dd><dt>H3_INTERNAL_ERROR (0x0102)<div id="rfc.iref.h.64"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_INTERNAL_ERROR">An internal error has occurred in the HTTP stack.</div></dd><dt>H3_STREAM_CREATION_ERROR (0x0103)<div id="rfc.iref.h.65"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_STREAM_CREATION_ERROR">The endpoint detected that its peer created a stream that it will not accept.</div></dd><dt>H3_CLOSED_CRITICAL_STREAM (0x0104)<div id="rfc.iref.h.66"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_CLOSED_CRITICAL_STREAM">A stream required by the HTTP/3 connection was closed or reset.</div></dd><dt>H3_FRAME_UNEXPECTED (0x0105)<div id="rfc.iref.h.67"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_FRAME_UNEXPECTED">A frame was received that was not permitted in the current state or on the current stream.</div></dd><dt>H3_FRAME_ERROR (0x0106)<div id="rfc.iref.h.68"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_FRAME_ERROR">A frame that fails to satisfy layout requirements or with an invalid size was received.</div></dd><dt>H3_EXCESSIVE_LOAD (0x0107)<div id="rfc.iref.h.69"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_EXCESSIVE_LOAD">The endpoint detected that its peer is exhibiting a behavior that might be generating excessive load.</div></dd><dt>H3_ID_ERROR (0x0108)<div id="rfc.iref.h.70"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_ID_ERROR">A stream ID or <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.67"></span> was used incorrectly, such as exceeding a limit, reducing a limit, or being reused.</div></dd><dt>H3_SETTINGS_ERROR (0x0109)<div id="rfc.iref.h.71"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_SETTINGS_ERROR">An endpoint detected an error in the payload of a <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.11"></span> frame.</div></dd><dt>H3_MISSING_SETTINGS (0x010a)<div id="rfc.iref.h.72"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_MISSING_SETTINGS">No <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.12"></span> frame was received at the beginning of the <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.61"></span>.</div></dd><dt>H3_REQUEST_REJECTED (0x010b)<div id="rfc.iref.h.73"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_REQUEST_REJECTED">A server rejected a request without performing any application processing.</div></dd><dt>H3_REQUEST_CANCELLED (0x010c)<div id="rfc.iref.h.74"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_REQUEST_CANCELLED">The request or its response (including pushed response) is cancelled.</div></dd><dt>H3_REQUEST_INCOMPLETE (0x010d)<div id="rfc.iref.h.75"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_REQUEST_INCOMPLETE">The client's stream terminated without containing a fully formed request.</div></dd><dt>H3_MESSAGE_ERROR (0x010e)<div id="rfc.iref.h.76"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_MESSAGE_ERROR">An HTTP message was <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.17"></span> and cannot be processed.</div></dd><dt>H3_CONNECT_ERROR (0x010f)<div id="rfc.iref.h.77"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_CONNECT_ERROR">The TCP connection established in response to a CONNECT request was reset or abnormally closed.</div></dd><dt>H3_VERSION_FALLBACK (0x0110)<div id="rfc.iref.h.78"></div>:</dt><dd style="margin-left: 1.5em"><div id="H3_VERSION_FALLBACK">The requested operation cannot be served over HTTP/3. The peer should retry over HTTP/1.1.</div></dd></dl></div><div id="rfc.section.8.1.p.3"><p>Error codes of the format <span class="tt">0x1f * N + 0x21</span> for non-negative integer values of <span class="tt">N</span> are reserved to exercise the requirement that unknown error codes be treated as equivalent to <a href="#H3_NO_ERROR">H3_NO_ERROR</a><span id="rfc.iref.h.79"></span> (<a href="#extensions" title="Extensions to HTTP/3">Section 9</a>). Implementations <em class="bcp14">SHOULD</em> select an error code from this space with some probability when they would have sent <a href="#H3_NO_ERROR">H3_NO_ERROR</a><span id="rfc.iref.h.80"></span>.</p></div></section></section><hr class="hidden-print"><section id="extensions"><h2 id="rfc.section.9" class="np"><a href="#rfc.section.9">9.</a>&nbsp;<a href="#extensions">Extensions to HTTP/3</a></h2><div id="rfc.section.9.p.1"><p>HTTP/3 permits extension of the protocol. Within the limitations described in this section, protocol extensions can be used to provide additional services or alter any aspect of the protocol. Extensions are effective only within the scope of a single HTTP/3 connection.</p></div><div id="rfc.section.9.p.2"><p>This applies to the protocol elements defined in this document. This does not affect the existing options for extending HTTP, such as defining new methods, status codes, or fields.</p></div><div id="rfc.section.9.p.3"><p>Extensions are permitted to use new frame types (<a href="#frames" title="Frame Definitions">Section 7.2</a>), new settings (<a href="#settings-parameters" title="Defined SETTINGS Parameters">Section 7.2.4.1</a>), new error codes (<a href="#errors" title="Error Handling">Section 8</a>), or new unidirectional stream types (<a href="#unidirectional-streams" title="Unidirectional Streams">Section 6.2</a>). Registries are established for managing these extension points: frame types (<a href="#iana-frames" title="Frame Types">Section 11.2.1</a>), settings (<a href="#iana-settings" title="Settings Parameters">Section 11.2.2</a>), error codes (<a href="#iana-error-codes" title="Error Codes">Section 11.2.3</a>), and stream types (<a href="#iana-stream-types" title="Stream Types">Section 11.2.4</a>).</p></div><div id="rfc.section.9.p.4"><p>Implementations <em class="bcp14">MUST</em> ignore unknown or unsupported values in all extensible protocol elements. Implementations <em class="bcp14">MUST</em> discard data or abort reading on unidirectional streams that have unknown or unsupported types. This means that any of these extension points can be safely used by extensions without prior arrangement or negotiation. However, where a known frame type is required to be in a specific location, such as the <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.13"></span> frame as the first frame of the <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.62"></span> (see <a href="#control-streams" title="Control Streams">Section 6.2.1</a>), an unknown frame type does not satisfy that requirement and <em class="bcp14">SHOULD</em> be treated as an error.</p></div><div id="rfc.section.9.p.5"><p>Extensions that could change the semantics of existing protocol components <em class="bcp14">MUST</em> be negotiated before being used. For example, an extension that changes the layout of the <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.81"></span> frame cannot be used until the peer has given a positive signal that this is acceptable. Coordinating when such a revised layout comes into effect could prove complex. As such, allocating new identifiers for new definitions of existing protocol elements is likely to be more effective.</p></div><div id="rfc.section.9.p.6"><p>This document does not mandate a specific method for negotiating the use of an extension, but it notes that a setting (<a href="#settings-parameters" title="Defined SETTINGS Parameters">Section 7.2.4.1</a>) could be used for that purpose. If both peers set a value that indicates willingness to use the extension, then the extension can be used. If a setting is used for extension negotiation, the default value <em class="bcp14">MUST</em> be defined in such a fashion that the extension is disabled if the setting is omitted.</p></div></section><hr class="hidden-print"><section id="security-considerations"><h2 id="rfc.section.10" class="np"><a href="#rfc.section.10">10.</a>&nbsp;<a href="#security-considerations">Security Considerations</a></h2><div id="rfc.section.10.p.1"><p>The security considerations of HTTP/3 should be comparable to those of HTTP/2 with TLS. However, many of the considerations from <a href="https://www.rfc-editor.org/rfc/rfc9113.html#section-10">Section 10</a> of <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a> apply to <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a> and are discussed in that document.</p></div><section id="server-authority"><h3 id="rfc.section.10.1"><a href="#rfc.section.10.1">10.1.</a>&nbsp;<a href="#server-authority">Server Authority</a></h3><div id="rfc.section.10.1.p.1"><p>HTTP/3 relies on the HTTP definition of authority. The security considerations of establishing authority are discussed in <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-17.1">Section 17.1</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>.</p></div></section><section id="cross-protocol-attacks"><h3 id="rfc.section.10.2"><a href="#rfc.section.10.2">10.2.</a>&nbsp;<a href="#cross-protocol-attacks">Cross-Protocol Attacks</a></h3><div id="rfc.section.10.2.p.1"><p>The use of ALPN in the TLS and QUIC handshakes establishes the target application protocol before application-layer bytes are processed. This ensures that endpoints have strong assurances that peers are using the same protocol.</p></div><div id="rfc.section.10.2.p.2"><p>This does not guarantee protection from all cross-protocol attacks. <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-21.5">Section 21.5</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a> describes some ways in which the plaintext of QUIC packets can be used to perform request forgery against endpoints that don't use authenticated transports.</p></div></section><section id="intermediary-encapsulation-attacks"><h3 id="rfc.section.10.3"><a href="#rfc.section.10.3">10.3.</a>&nbsp;<a href="#intermediary-encapsulation-attacks">Intermediary-Encapsulation Attacks</a></h3><div id="rfc.section.10.3.p.1"><p>The HTTP/3 field encoding allows the expression of names that are not valid field names in the syntax used by HTTP (<a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-5.1">Section 5.1</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>). Requests or responses containing invalid field names <em class="bcp14">MUST</em> be treated as <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.18"></span>. Therefore, an intermediary cannot translate an HTTP/3 request or response containing an invalid field name into an HTTP/1.1 message.</p></div><div id="rfc.section.10.3.p.2"><p>Similarly, HTTP/3 can transport field values that are not valid. While most values that can be encoded will not alter field parsing, carriage return (ASCII 0x0d), line feed (ASCII 0x0a), and the null character (ASCII 0x00) might be exploited by an attacker if they are translated verbatim. Any request or response that contains a character not permitted in a field value <em class="bcp14">MUST</em> be treated as <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.19"></span>. Valid characters are defined by the "field-content" ABNF rule in <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-5.5">Section 5.5</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>.</p></div></section><section id="cacheability-of-pushed-responses"><h3 id="rfc.section.10.4"><a href="#rfc.section.10.4">10.4.</a>&nbsp;<a href="#cacheability-of-pushed-responses">Cacheability of Pushed Responses</a></h3><div id="rfc.section.10.4.p.1"><p>Pushed responses do not have an explicit request from the client; the request is provided by the server in the <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.68"></span> frame.</p></div><div id="rfc.section.10.4.p.2"><p>Caching responses that are pushed is possible based on the guidance provided by the origin server in the Cache-Control header field. However, this can cause issues if a single server hosts more than one tenant. For example, a server might offer multiple users each a small portion of its URI space.</p></div><div id="rfc.section.10.4.p.3"><p>Where multiple tenants share space on the same server, that server <em class="bcp14">MUST</em> ensure that tenants are not able to push representations of resources that they do not have authority over. Failure to enforce this would allow a tenant to provide a representation that would be served out of cache, overriding the actual representation that the authoritative tenant provides.</p></div><div id="rfc.section.10.4.p.4"><p>Clients are required to reject pushed responses for which an origin server is not authoritative; see <a href="#server-push" title="Server Push">Section 4.6</a>.</p></div></section><section id="denial-of-service-considerations"><h3 id="rfc.section.10.5"><a href="#rfc.section.10.5">10.5.</a>&nbsp;<a href="#denial-of-service-considerations">Denial-of-Service Considerations</a></h3><div id="rfc.section.10.5.p.1"><p>An HTTP/3 connection can demand a greater commitment of resources to operate than an HTTP/1.1 or HTTP/2 connection. The use of field compression and flow control depend on a commitment of resources for storing a greater amount of state. Settings for these features ensure that memory commitments for these features are strictly bounded.</p></div><div id="rfc.section.10.5.p.2"><p>The number of <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.69"></span> frames is constrained in a similar fashion. A client that accepts server push <em class="bcp14">SHOULD</em> limit the number of push IDs it issues at a time.</p></div><div id="rfc.section.10.5.p.3"><p>Processing capacity cannot be guarded as effectively as state capacity.</p></div><div id="rfc.section.10.5.p.4"><p>The ability to send undefined protocol elements that the peer is required to ignore can be abused to cause a peer to expend additional processing time. This might be done by setting multiple undefined <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.14"></span> parameters, unknown frame types, or unknown stream types. Note, however, that some uses are entirely legitimate, such as optional-to-understand extensions and padding to increase resistance to traffic analysis.</p></div><div id="rfc.section.10.5.p.5"><p>Compression of field sections also offers some opportunities to waste processing resources; see <a href="https://www.rfc-editor.org/rfc/rfc9204.html#section-7">Section 7</a> of <a href="#RFC9204"><cite title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a> for more details on potential abuses.</p></div><div id="rfc.section.10.5.p.6"><p>All these features -- i.e., server push, unknown protocol elements, field compression -- have legitimate uses. These features become a burden only when they are used unnecessarily or to excess.</p></div><div id="rfc.section.10.5.p.7"><p>An endpoint that does not monitor such behavior exposes itself to a risk of denial-of-service attack. Implementations <em class="bcp14">SHOULD</em> track the use of these features and set limits on their use. An endpoint <em class="bcp14">MAY</em> treat activity that is suspicious as a <a href="#errors" title="Error Handling">connection error</a><span id="rfc.iref.c.63"></span> of type <a href="#H3_EXCESSIVE_LOAD">H3_EXCESSIVE_LOAD</a><span id="rfc.iref.h.82"></span>, but false positives will result in disrupting valid connections and requests.</p></div><section id="limits-on-field-section-size"><h4 id="rfc.section.10.5.1"><a href="#rfc.section.10.5.1">10.5.1.</a>&nbsp;<a href="#limits-on-field-section-size">Limits on Field Section Size</a></h4><div id="rfc.section.10.5.1.p.1"><p>A large field section (<a href="#request-response" title="HTTP Message Framing">Section 4.1</a>) can cause an implementation to commit a large amount of state. Header fields that are critical for routing can appear toward the end of a header section, which prevents streaming of the header section to its ultimate destination. This ordering and other reasons, such as ensuring cache correctness, mean that an endpoint likely needs to buffer the entire header section. Since there is no hard limit to the size of a field section, some endpoints could be forced to commit a large amount of available memory for header fields.</p></div><div id="rfc.section.10.5.1.p.2"><p>An endpoint can use the <a href="#SETTINGS_MAX_FIELD_SECTION_SIZE">SETTINGS_MAX_FIELD_SECTION_SIZE</a><span id="rfc.iref.s.15"></span> (<a href="#header-size-constraints" title="Header Size Constraints">Section 4.2.2</a>) setting to advise peers of limits that might apply on the size of field sections. This setting is only advisory, so endpoints <em class="bcp14">MAY</em> choose to send field sections that exceed this limit and risk having the request or response being treated as <a href="#malformed" title="Malformed Requests and Responses">malformed</a><span id="rfc.iref.m.20"></span>. This setting is specific to an HTTP/3 connection, so any request or response could encounter a hop with a lower, unknown limit. An intermediary can attempt to avoid this problem by passing on values presented by different peers, but they are not obligated to do so.</p></div><div id="rfc.section.10.5.1.p.3"><p>A server that receives a larger field section than it is willing to handle can send an HTTP 431 (Request Header Fields Too Large) status code (<a href="#RFC6585"><cite title="Additional HTTP Status Codes">[RFC6585]</cite></a>). A client can discard responses that it cannot process.</p></div></section><section id="connect-issues"><h4 id="rfc.section.10.5.2"><a href="#rfc.section.10.5.2">10.5.2.</a>&nbsp;<a href="#connect-issues">CONNECT Issues</a></h4><div id="rfc.section.10.5.2.p.1"><p>The CONNECT method can be used to create disproportionate load on a proxy, since stream creation is relatively inexpensive when compared to the creation and maintenance of a TCP connection. Therefore, a proxy that supports CONNECT might be more conservative in the number of simultaneous requests it accepts.</p></div><div id="rfc.section.10.5.2.p.2"><p>A proxy might also maintain some resources for a TCP connection beyond the closing of the stream that carries the CONNECT request, since the outgoing TCP connection remains in the TIME_WAIT state. To account for this, a proxy might delay increasing the QUIC stream limits for some time after a TCP connection terminates.</p></div></section></section><section id="use-of-compression"><h3 id="rfc.section.10.6"><a href="#rfc.section.10.6">10.6.</a>&nbsp;<a href="#use-of-compression">Use of Compression</a></h3><div id="rfc.section.10.6.p.1"><p>Compression can allow an attacker to recover secret data when it is compressed in the same context as data under attacker control. HTTP/3 enables compression of fields (<a href="#header-formatting" title="HTTP Fields">Section 4.2</a>); the following concerns also apply to the use of HTTP compressed content-codings; see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-8.4.1">Section 8.4.1</a> of <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>.</p></div><div id="rfc.section.10.6.p.2"><p>There are demonstrable attacks on compression that exploit the characteristics of the web (e.g., <a href="#BREACH"><cite title="BREACH: Reviving the CRIME Attack">[BREACH]</cite></a>). The attacker induces multiple requests containing varying plaintext, observing the length of the resulting ciphertext in each, which reveals a shorter length when a guess about the secret is correct.</p></div><div id="rfc.section.10.6.p.3"><p>Implementations communicating on a secure channel <em class="bcp14">MUST NOT</em> compress content that includes both confidential and attacker-controlled data unless separate compression contexts are used for each source of data. Compression <em class="bcp14">MUST NOT</em> be used if the source of data cannot be reliably determined.</p></div><div id="rfc.section.10.6.p.4"><p>Further considerations regarding the compression of field sections are described in <a href="#RFC9204"><cite title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a>.</p></div></section><section id="padding-and-traffic-analysis"><h3 id="rfc.section.10.7"><a href="#rfc.section.10.7">10.7.</a>&nbsp;<a href="#padding-and-traffic-analysis">Padding and Traffic Analysis</a></h3><div id="rfc.section.10.7.p.1"><p>Padding can be used to obscure the exact size of frame content and is provided to mitigate specific attacks within HTTP, for example, attacks where compressed content includes both attacker-controlled plaintext and secret data (e.g., <a href="#BREACH"><cite title="BREACH: Reviving the CRIME Attack">[BREACH]</cite></a>).</p></div><div id="rfc.section.10.7.p.2"><p>Where HTTP/2 employs PADDING frames and Padding fields in other frames to make a connection more resistant to traffic analysis, HTTP/3 can either rely on transport-layer padding or employ the reserved frame and stream types discussed in Sections <a href="#frame-reserved" title="Reserved Frame Types">7.2.8</a> and <a href="#stream-grease" title="Reserved Stream Types">6.2.3</a>. These methods of padding produce different results in terms of the granularity of padding, how padding is arranged in relation to the information that is being protected, whether padding is applied in the case of packet loss, and how an implementation might control padding.</p></div><div id="rfc.section.10.7.p.3"><p>Reserved stream types can be used to give the appearance of sending traffic even when the connection is idle. Because HTTP traffic often occurs in bursts, apparent traffic can be used to obscure the timing or duration of such bursts, even to the point of appearing to send a constant stream of data. However, as such traffic is still flow controlled by the receiver, a failure to promptly drain such streams and provide additional flow-control credit can limit the sender's ability to send real traffic.</p></div><div id="rfc.section.10.7.p.4"><p>To mitigate attacks that rely on compression, disabling or limiting compression might be preferable to padding as a countermeasure.</p></div><div id="rfc.section.10.7.p.5"><p>Use of padding can result in less protection than might seem immediately obvious. Redundant padding could even be counterproductive. At best, padding only makes it more difficult for an attacker to infer length information by increasing the number of frames an attacker has to observe. Incorrectly implemented padding schemes can be easily defeated. In particular, randomized padding with a predictable distribution provides very little protection; similarly, padding payloads to a fixed size exposes information as payload sizes cross the fixed-sized boundary, which could be possible if an attacker can control plaintext.</p></div></section><section id="frame-parsing"><h3 id="rfc.section.10.8"><a href="#rfc.section.10.8">10.8.</a>&nbsp;<a href="#frame-parsing">Frame Parsing</a></h3><div id="rfc.section.10.8.p.1"><p>Several protocol elements contain nested length elements, typically in the form of frames with an explicit length containing variable-length integers. This could pose a security risk to an incautious implementer. An implementation <em class="bcp14">MUST</em> ensure that the length of a frame exactly matches the length of the fields it contains.</p></div></section><section id="early-data"><h3 id="rfc.section.10.9"><a href="#rfc.section.10.9">10.9.</a>&nbsp;<a href="#early-data">Early Data</a></h3><div id="rfc.section.10.9.p.1"><p>The use of 0-RTT with HTTP/3 creates an exposure to replay attack. The anti-replay mitigations in <a href="#HTTP-REPLAY"><cite title="Using Early Data in HTTP">[HTTP-REPLAY]</cite></a> <em class="bcp14">MUST</em> be applied when using HTTP/3 with 0-RTT. When applying <a href="#HTTP-REPLAY"><cite title="Using Early Data in HTTP">[HTTP-REPLAY]</cite></a> to HTTP/3, references to the TLS layer refer to the handshake performed within QUIC, while all references to application data refer to the contents of streams.</p></div></section><section id="migration"><h3 id="rfc.section.10.10"><a href="#rfc.section.10.10">10.10.</a>&nbsp;<a href="#migration">Migration</a></h3><div id="rfc.section.10.10.p.1"><p>Certain HTTP implementations use the client address for logging or access-control purposes. Since a QUIC client's address might change during a connection (and future versions might support simultaneous use of multiple addresses), such implementations will need to either actively retrieve the client's current address or addresses when they are relevant or explicitly accept that the original address might change.</p></div></section><section id="privacy-considerations"><h3 id="rfc.section.10.11"><a href="#rfc.section.10.11">10.11.</a>&nbsp;<a href="#privacy-considerations">Privacy Considerations</a></h3><div id="rfc.section.10.11.p.1"><p>Several characteristics of HTTP/3 provide an observer an opportunity to correlate actions of a single client or server over time. These include the value of settings, the timing of reactions to stimulus, and the handling of any features that are controlled by settings.</p></div><div id="rfc.section.10.11.p.2"><p>As far as these create observable differences in behavior, they could be used as a basis for fingerprinting a specific client.</p></div><div id="rfc.section.10.11.p.3"><p>HTTP/3's preference for using a single QUIC connection allows correlation of a user's activity on a site. Reusing connections for different origins allows for correlation of activity across those origins.</p></div><div id="rfc.section.10.11.p.4"><p>Several features of QUIC solicit immediate responses and can be used by an endpoint to measure latency to their peer; this might have privacy implications in certain scenarios.</p></div></section></section><hr class="hidden-print"><section id="iana-considerations"><h2 id="rfc.section.11" class="np"><a href="#rfc.section.11">11.</a>&nbsp;<a href="#iana-considerations">IANA Considerations</a></h2><div id="rfc.section.11.p.1"><p>This document registers a new ALPN protocol ID (<a href="#iana-alpn" title="Registration of HTTP/3 Identification String">Section 11.1</a>) and creates new registries that manage the assignment of code points in HTTP/3.</p></div><section id="iana-alpn"><h3 id="rfc.section.11.1"><a href="#rfc.section.11.1">11.1.</a>&nbsp;<a href="#iana-alpn">Registration of HTTP/3 Identification String</a></h3><div id="rfc.section.11.1.p.1"><p>This document creates a new registration for the identification of HTTP/3 in the "TLS Application-Layer Protocol Negotiation (ALPN) Protocol IDs" registry established in <a href="#RFC7301"><cite title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>.</p></div><div id="rfc.section.11.1.p.2" class="avoidbreakafter"><p>The "h3" string identifies HTTP/3:</p></div><div id="rfc.section.11.1.p.3"><dl><dt>Protocol:</dt><dd style="margin-left: 1.5em"><div>HTTP/3</div></dd><dt>Identification Sequence:</dt><dd style="margin-left: 1.5em"><div>0x68 0x33 ("h3")</div></dd><dt>Specification:</dt><dd style="margin-left: 1.5em"><div>This document</div></dd></dl></div></section><section id="iana-policy"><h3 id="rfc.section.11.2"><a href="#rfc.section.11.2">11.2.</a>&nbsp;<a href="#iana-policy">New Registries</a></h3><div id="rfc.section.11.2.p.1"><p>New registries created in this document operate under the QUIC registration policy documented in <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-22.1">Section 22.1</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>. These registries all include the common set of fields listed in <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-22.1.1">Section 22.1.1</a> of <a href="#QUIC-TRANSPORT"><cite title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>. These registries are collected under the "Hypertext Transfer Protocol version 3 (HTTP/3)" heading.</p></div><div id="rfc.section.11.2.p.2"><p>The initial allocations in these registries are all assigned permanent status and list a change controller of the IETF and a contact of the HTTP working group (ietf-http-wg@w3.org).</p></div><section id="iana-frames"><h4 id="rfc.section.11.2.1"><a href="#rfc.section.11.2.1">11.2.1.</a>&nbsp;<a href="#iana-frames">Frame Types</a></h4><div id="rfc.section.11.2.1.p.1"><p>This document establishes a registry for HTTP/3 frame type codes. The "HTTP/3 Frame Types" registry governs a 62-bit space. This registry follows the QUIC registry policy; see <a href="#iana-policy" title="New Registries">Section 11.2</a>. Permanent registrations in this registry are assigned using the Specification Required policy (<a href="#RFC8126"><cite title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>), except for values between 0x00 and 0x3f (in hexadecimal; inclusive), which are assigned using Standards Action or IESG Approval as defined in Sections <a href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.9">4.9</a> and <a href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.10">4.10</a> of <a href="#RFC8126"><cite title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>.</p></div><div id="rfc.section.11.2.1.p.2"><p>While this registry is separate from the "HTTP/2 Frame Type" registry defined in <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a>, it is preferable that the assignments parallel each other where the code spaces overlap. If an entry is present in only one registry, every effort <em class="bcp14">SHOULD</em> be made to avoid assigning the corresponding value to an unrelated operation. Expert reviewers <em class="bcp14">MAY</em> reject unrelated registrations that would conflict with the same value in the corresponding registry.</p></div><div id="rfc.section.11.2.1.p.3" class="avoidbreakafter"><p>In addition to common fields as described in <a href="#iana-policy" title="New Registries">Section 11.2</a>, permanent registrations in this registry <em class="bcp14">MUST</em> include the following field:</p></div><div id="rfc.section.11.2.1.p.4"><dl><dt>Frame Type:</dt><dd style="margin-left: 1.5em"><div>A name or label for the frame type.</div></dd></dl></div><div id="rfc.section.11.2.1.p.5"><p>Specifications of frame types <em class="bcp14">MUST</em> include a description of the frame layout and its semantics, including any parts of the frame that are conditionally present.</p></div><div id="rfc.section.11.2.1.p.6"><p>The entries in <a href="#iana-frame-table" title="Initial HTTP/3 Frame Types">Table 2</a> are registered by this document.</p></div><div class="table table-condensed table-striped" id="iana-frame-table"><table class="v3 text-center"><caption>Table 2: Initial HTTP/3 Frame Types</caption><thead><tr><th class="text-left" colspan="1" rowspan="1">Frame Type</th><th class="center" colspan="1" rowspan="1">Value</th><th class="text-left" colspan="1" rowspan="1">Specification</th></tr></thead><tbody><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-data" title="DATA">DATA</a><div id="rfc.iref.d.14"></div></td><td class="center" colspan="1" rowspan="1">0x00</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-data" title="DATA">Section 7.2.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-headers" title="HEADERS">HEADERS</a><div id="rfc.iref.h.83"></div></td><td class="center" colspan="1" rowspan="1">0x01</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-headers" title="HEADERS">Section 7.2.2</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1">Reserved</td><td class="center" colspan="1" rowspan="1">0x02</td><td class="text-left" colspan="1" rowspan="1">This document</td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-cancel-push" title="CANCEL_PUSH">CANCEL_PUSH</a><div id="rfc.iref.c.64"></div></td><td class="center" colspan="1" rowspan="1">0x03</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-cancel-push" title="CANCEL_PUSH">Section 7.2.3</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-settings" title="SETTINGS">SETTINGS</a><div id="rfc.iref.s.16"></div></td><td class="center" colspan="1" rowspan="1">0x04</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-settings" title="SETTINGS">Section 7.2.4</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><div id="rfc.iref.p.70"></div></td><td class="center" colspan="1" rowspan="1">0x05</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-push-promise" title="PUSH_PROMISE">Section 7.2.5</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1">Reserved</td><td class="center" colspan="1" rowspan="1">0x06</td><td class="text-left" colspan="1" rowspan="1">This document</td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-goaway" title="GOAWAY">GOAWAY</a><div id="rfc.iref.g.28"></div></td><td class="center" colspan="1" rowspan="1">0x07</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-goaway" title="GOAWAY">Section 7.2.6</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1">Reserved</td><td class="center" colspan="1" rowspan="1">0x08</td><td class="text-left" colspan="1" rowspan="1">This document</td></tr><tr><td class="text-left" colspan="1" rowspan="1">Reserved</td><td class="center" colspan="1" rowspan="1">0x09</td><td class="text-left" colspan="1" rowspan="1">This document</td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><div id="rfc.iref.m.21"></div></td><td class="center" colspan="1" rowspan="1">0x0d</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-max-push-id" title="MAX_PUSH_ID">Section 7.2.7</a></td></tr></tbody></table></div><div id="rfc.section.11.2.1.p.7"><p>Each code of the format <span class="tt">0x1f * N + 0x21</span> for non-negative integer values of <span class="tt">N</span> (that is, 0x21, 0x40, ..., through 0x3ffffffffffffffe) <em class="bcp14">MUST NOT</em> be assigned by IANA and <em class="bcp14">MUST NOT</em> appear in the listing of assigned values.</p></div></section><section id="iana-settings"><h4 id="rfc.section.11.2.2"><a href="#rfc.section.11.2.2">11.2.2.</a>&nbsp;<a href="#iana-settings">Settings Parameters</a></h4><div id="rfc.section.11.2.2.p.1"><p>This document establishes a registry for HTTP/3 settings. The "HTTP/3 Settings" registry governs a 62-bit space. This registry follows the QUIC registry policy; see <a href="#iana-policy" title="New Registries">Section 11.2</a>. Permanent registrations in this registry are assigned using the Specification Required policy (<a href="#RFC8126"><cite title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>), except for values between 0x00 and 0x3f (in hexadecimal; inclusive), which are assigned using Standards Action or IESG Approval as defined in Sections <a href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.9">4.9</a> and <a href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.10">4.10</a> of <a href="#RFC8126"><cite title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>.</p></div><div id="rfc.section.11.2.2.p.2"><p>While this registry is separate from the "HTTP/2 Settings" registry defined in <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a>, it is preferable that the assignments parallel each other. If an entry is present in only one registry, every effort <em class="bcp14">SHOULD</em> be made to avoid assigning the corresponding value to an unrelated operation. Expert reviewers <em class="bcp14">MAY</em> reject unrelated registrations that would conflict with the same value in the corresponding registry.</p></div><div id="rfc.section.11.2.2.p.3" class="avoidbreakafter"><p>In addition to common fields as described in <a href="#iana-policy" title="New Registries">Section 11.2</a>, permanent registrations in this registry <em class="bcp14">MUST</em> include the following fields:</p></div><div id="rfc.section.11.2.2.p.4"><dl><dt>Setting Name:</dt><dd style="margin-left: 1.5em"><div>A symbolic name for the setting. Specifying a setting name is optional.</div></dd><dt>Default:</dt><dd style="margin-left: 1.5em"><div>The value of the setting unless otherwise indicated. A default <em class="bcp14">SHOULD</em> be the most restrictive possible value.</div></dd></dl></div><div id="rfc.section.11.2.2.p.5"><p>The entries in <a href="#iana-setting-table" title="Initial HTTP/3 Settings">Table 3</a> are registered by this document.</p></div><div class="table table-condensed table-striped" id="iana-setting-table"><table class="v3 text-center"><caption>Table 3: Initial HTTP/3 Settings</caption><thead><tr><th class="text-left" colspan="1" rowspan="1">Setting Name</th><th class="center" colspan="1" rowspan="1">Value</th><th class="text-left" colspan="1" rowspan="1">Specification</th><th class="text-left" colspan="1" rowspan="1">Default</th></tr></thead><tbody><tr><td class="text-left" colspan="1" rowspan="1">Reserved</td><td class="center" colspan="1" rowspan="1">0x00</td><td class="text-left" colspan="1" rowspan="1">This document</td><td class="text-left" colspan="1" rowspan="1">N/A</td></tr><tr><td class="text-left" colspan="1" rowspan="1">Reserved</td><td class="center" colspan="1" rowspan="1">0x02</td><td class="text-left" colspan="1" rowspan="1">This document</td><td class="text-left" colspan="1" rowspan="1">N/A</td></tr><tr><td class="text-left" colspan="1" rowspan="1">Reserved</td><td class="center" colspan="1" rowspan="1">0x03</td><td class="text-left" colspan="1" rowspan="1">This document</td><td class="text-left" colspan="1" rowspan="1">N/A</td></tr><tr><td class="text-left" colspan="1" rowspan="1">Reserved</td><td class="center" colspan="1" rowspan="1">0x04</td><td class="text-left" colspan="1" rowspan="1">This document</td><td class="text-left" colspan="1" rowspan="1">N/A</td></tr><tr><td class="text-left" colspan="1" rowspan="1">Reserved</td><td class="center" colspan="1" rowspan="1">0x05</td><td class="text-left" colspan="1" rowspan="1">This document</td><td class="text-left" colspan="1" rowspan="1">N/A</td></tr><tr><td class="text-left" colspan="1" rowspan="1">MAX_FIELD_SECTION_SIZE</td><td class="center" colspan="1" rowspan="1">0x06</td><td class="text-left" colspan="1" rowspan="1"><a href="#settings-parameters" title="Defined SETTINGS Parameters">Section 7.2.4.1</a></td><td class="text-left" colspan="1" rowspan="1">Unlimited</td></tr></tbody></table></div><div id="rfc.section.11.2.2.p.6"><p>For formatting reasons, setting names can be abbreviated by removing the 'SETTINGS_' prefix.</p></div><div id="rfc.section.11.2.2.p.7"><p>Each code of the format <span class="tt">0x1f * N + 0x21</span> for non-negative integer values of <span class="tt">N</span> (that is, 0x21, 0x40, ..., through 0x3ffffffffffffffe) <em class="bcp14">MUST NOT</em> be assigned by IANA and <em class="bcp14">MUST NOT</em> appear in the listing of assigned values.</p></div></section><section id="iana-error-codes"><h4 id="rfc.section.11.2.3"><a href="#rfc.section.11.2.3">11.2.3.</a>&nbsp;<a href="#iana-error-codes">Error Codes</a></h4><div id="rfc.section.11.2.3.p.1"><p>This document establishes a registry for HTTP/3 error codes. The "HTTP/3 Error Codes" registry manages a 62-bit space. This registry follows the QUIC registry policy; see <a href="#iana-policy" title="New Registries">Section 11.2</a>. Permanent registrations in this registry are assigned using the Specification Required policy (<a href="#RFC8126"><cite title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>), except for values between 0x00 and 0x3f (in hexadecimal; inclusive), which are assigned using Standards Action or IESG Approval as defined in Sections <a href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.9">4.9</a> and <a href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.10">4.10</a> of <a href="#RFC8126"><cite title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>.</p></div><div id="rfc.section.11.2.3.p.2"><p>Registrations for error codes are required to include a description of the error code. An expert reviewer is advised to examine new registrations for possible duplication with existing error codes. Use of existing registrations is to be encouraged, but not mandated. Use of values that are registered in the "HTTP/2 Error Code" registry is discouraged, and expert reviewers <em class="bcp14">MAY</em> reject such registrations.</p></div><div id="rfc.section.11.2.3.p.3" class="avoidbreakafter"><p>In addition to common fields as described in <a href="#iana-policy" title="New Registries">Section 11.2</a>, this registry includes two additional fields. Permanent registrations in this registry <em class="bcp14">MUST</em> include the following field:</p></div><div id="rfc.section.11.2.3.p.4"><dl><dt>Name:</dt><dd style="margin-left: 1.5em"><div>A name for the error code.</div></dd><dt>Description:</dt><dd style="margin-left: 1.5em"><div>A brief description of the error code semantics.</div></dd></dl></div><div id="rfc.section.11.2.3.p.5"><p>The entries in <a href="#iana-error-table" title="Initial HTTP/3 Error Codes">Table 4</a> are registered by this document. These error codes were selected from the range that operates on a Specification Required policy to avoid collisions with HTTP/2 error codes.</p></div><div class="table table-condensed table-striped" id="iana-error-table"><table class="v3 text-center"><caption>Table 4: Initial HTTP/3 Error Codes</caption><thead><tr><th class="text-left" colspan="1" rowspan="1">Name</th><th class="text-left" colspan="1" rowspan="1">Value</th><th class="text-left" colspan="1" rowspan="1">Description</th><th class="text-left" colspan="1" rowspan="1">Specification</th></tr></thead><tbody><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_NO_ERROR">H3_NO_ERROR</a><div id="rfc.iref.h.84"></div></td><td class="text-left" colspan="1" rowspan="1">0x0100</td><td class="text-left" colspan="1" rowspan="1">No error</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_GENERAL_PROTOCOL_ERROR">H3_GENERAL_PROTOCOL_ERROR</a><div id="rfc.iref.h.85"></div></td><td class="text-left" colspan="1" rowspan="1">0x0101</td><td class="text-left" colspan="1" rowspan="1">General protocol error</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_INTERNAL_ERROR">H3_INTERNAL_ERROR</a><div id="rfc.iref.h.86"></div></td><td class="text-left" colspan="1" rowspan="1">0x0102</td><td class="text-left" colspan="1" rowspan="1">Internal error</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_STREAM_CREATION_ERROR">H3_STREAM_CREATION_ERROR</a><div id="rfc.iref.h.87"></div></td><td class="text-left" colspan="1" rowspan="1">0x0103</td><td class="text-left" colspan="1" rowspan="1">Stream creation error</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_CLOSED_CRITICAL_STREAM">H3_CLOSED_CRITICAL_STREAM</a><div id="rfc.iref.h.88"></div></td><td class="text-left" colspan="1" rowspan="1">0x0104</td><td class="text-left" colspan="1" rowspan="1">Critical stream was closed</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><div id="rfc.iref.h.89"></div></td><td class="text-left" colspan="1" rowspan="1">0x0105</td><td class="text-left" colspan="1" rowspan="1">Frame not permitted in the current state</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_FRAME_ERROR">H3_FRAME_ERROR</a><div id="rfc.iref.h.90"></div></td><td class="text-left" colspan="1" rowspan="1">0x0106</td><td class="text-left" colspan="1" rowspan="1">Frame violated layout or size rules</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_EXCESSIVE_LOAD">H3_EXCESSIVE_LOAD</a><div id="rfc.iref.h.91"></div></td><td class="text-left" colspan="1" rowspan="1">0x0107</td><td class="text-left" colspan="1" rowspan="1">Peer generating excessive load</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_ID_ERROR">H3_ID_ERROR</a><div id="rfc.iref.h.92"></div></td><td class="text-left" colspan="1" rowspan="1">0x0108</td><td class="text-left" colspan="1" rowspan="1">An identifier was used incorrectly</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_SETTINGS_ERROR">H3_SETTINGS_ERROR</a><div id="rfc.iref.h.93"></div></td><td class="text-left" colspan="1" rowspan="1">0x0109</td><td class="text-left" colspan="1" rowspan="1"><a href="#frame-settings" title="SETTINGS">SETTINGS</a><div id="rfc.iref.s.17"></div> frame contained invalid values</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_MISSING_SETTINGS">H3_MISSING_SETTINGS</a><div id="rfc.iref.h.94"></div></td><td class="text-left" colspan="1" rowspan="1">0x010a</td><td class="text-left" colspan="1" rowspan="1">No <a href="#frame-settings" title="SETTINGS">SETTINGS</a><div id="rfc.iref.s.18"></div> frame received</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><div id="rfc.iref.h.95"></div></td><td class="text-left" colspan="1" rowspan="1">0x010b</td><td class="text-left" colspan="1" rowspan="1">Request not processed</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><div id="rfc.iref.h.96"></div></td><td class="text-left" colspan="1" rowspan="1">0x010c</td><td class="text-left" colspan="1" rowspan="1">Data no longer needed</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_REQUEST_INCOMPLETE">H3_REQUEST_INCOMPLETE</a><div id="rfc.iref.h.97"></div></td><td class="text-left" colspan="1" rowspan="1">0x010d</td><td class="text-left" colspan="1" rowspan="1">Stream terminated early</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_MESSAGE_ERROR">H3_MESSAGE_ERROR</a><div id="rfc.iref.h.98"></div></td><td class="text-left" colspan="1" rowspan="1">0x010e</td><td class="text-left" colspan="1" rowspan="1">Malformed message</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_CONNECT_ERROR">H3_CONNECT_ERROR</a><div id="rfc.iref.h.99"></div></td><td class="text-left" colspan="1" rowspan="1">0x010f</td><td class="text-left" colspan="1" rowspan="1">TCP reset or error on CONNECT request</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr><tr><td class="text-left" colspan="1" rowspan="1"><a href="#H3_VERSION_FALLBACK">H3_VERSION_FALLBACK</a><div id="rfc.iref.h.100"></div></td><td class="text-left" colspan="1" rowspan="1">0x0110</td><td class="text-left" colspan="1" rowspan="1">Retry over HTTP/1.1</td><td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a></td></tr></tbody></table></div><div id="rfc.section.11.2.3.p.6"><p>Each code of the format <span class="tt">0x1f * N + 0x21</span> for non-negative integer values of <span class="tt">N</span> (that is, 0x21, 0x40, ..., through 0x3ffffffffffffffe) <em class="bcp14">MUST NOT</em> be assigned by IANA and <em class="bcp14">MUST NOT</em> appear in the listing of assigned values.</p></div></section><section id="iana-stream-types"><h4 id="rfc.section.11.2.4"><a href="#rfc.section.11.2.4">11.2.4.</a>&nbsp;<a href="#iana-stream-types">Stream Types</a></h4><div id="rfc.section.11.2.4.p.1"><p>This document establishes a registry for HTTP/3 unidirectional stream types. The "HTTP/3 Stream Types" registry governs a 62-bit space. This registry follows the QUIC registry policy; see <a href="#iana-policy" title="New Registries">Section 11.2</a>. Permanent registrations in this registry are assigned using the Specification Required policy (<a href="#RFC8126"><cite title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>), except for values between 0x00 and 0x3f (in hexadecimal; inclusive), which are assigned using Standards Action or IESG Approval as defined in Sections <a href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.9">4.9</a> and <a href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.10">4.10</a> of <a href="#RFC8126"><cite title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>.</p></div><div id="rfc.section.11.2.4.p.2" class="avoidbreakafter"><p>In addition to common fields as described in <a href="#iana-policy" title="New Registries">Section 11.2</a>, permanent registrations in this registry <em class="bcp14">MUST</em> include the following fields:</p></div><div id="rfc.section.11.2.4.p.3"><dl><dt>Stream Type:</dt><dd style="margin-left: 1.5em"><div>A name or label for the stream type.</div></dd><dt>Sender:</dt><dd style="margin-left: 1.5em"><div>Which endpoint on an HTTP/3 connection may initiate a stream of this type. Values are "Client", "Server", or "Both".</div></dd></dl></div><div id="rfc.section.11.2.4.p.4"><p>Specifications for permanent registrations <em class="bcp14">MUST</em> include a description of the stream type, including the layout and semantics of the stream contents.</p></div><div id="rfc.section.11.2.4.p.5"><p>The entries in <a href="#iana-stream-type-table" title="Initial Stream Types">Table 5</a> are registered by this document.</p></div><div class="table table-condensed table-striped" id="iana-stream-type-table"><table class="v3 text-center"><caption>Table 5: Initial Stream Types</caption><thead><tr><th class="text-left" colspan="1" rowspan="1">Stream Type</th><th class="center" colspan="1" rowspan="1">Value</th><th class="text-left" colspan="1" rowspan="1">Specification</th><th class="text-left" colspan="1" rowspan="1">Sender</th></tr></thead><tbody><tr><td class="text-left" colspan="1" rowspan="1">Control Stream</td><td class="center" colspan="1" rowspan="1">0x00</td><td class="text-left" colspan="1" rowspan="1"><a href="#control-streams" title="Control Streams">Section 6.2.1</a></td><td class="text-left" colspan="1" rowspan="1">Both</td></tr><tr><td class="text-left" colspan="1" rowspan="1">Push Stream</td><td class="center" colspan="1" rowspan="1">0x01</td><td class="text-left" colspan="1" rowspan="1"><a href="#server-push" title="Server Push">Section 4.6</a></td><td class="text-left" colspan="1" rowspan="1">Server</td></tr></tbody></table></div><div id="rfc.section.11.2.4.p.6"><p>Each code of the format <span class="tt">0x1f * N + 0x21</span> for non-negative integer values of <span class="tt">N</span> (that is, 0x21, 0x40, ..., through 0x3ffffffffffffffe) <em class="bcp14">MUST NOT</em> be assigned by IANA and <em class="bcp14">MUST NOT</em> appear in the listing of assigned values.</p></div></section></section></section><section class="np"><div id="rfc.references"><h2 id="rfc.section.12"><a href="#rfc.section.12">12.</a> References</h2><section><div id="rfc.references.2"><h3 id="rfc.section.12.1"><a href="#rfc.section.12.1">12.1.</a> Normative References</h3><dl class="dl-horizontal"><dt id="ALTSVC">[ALTSVC]</dt><dd>Nottingham, M., McManus, P., and J. Reschke, â€œ<a href="https://www.rfc-editor.org/rfc/rfc7838.html">HTTP Alternative Services</a>â€, RFC 7838, <a href="https://dx.doi.org/10.17487/RFC7838">DOI 10.17487/RFC7838</a>, April 2016, &lt;<a href="https://www.rfc-editor.org/info/rfc7838">https://www.rfc-editor.org/info/rfc7838</a>&gt;.</dd><dt id="COOKIES">[COOKIES]</dt><dd>Barth, A., â€œ<a href="https://www.rfc-editor.org/rfc/rfc6265.html">HTTP State Management Mechanism</a>â€, RFC 6265, <a href="https://dx.doi.org/10.17487/RFC6265">DOI 10.17487/RFC6265</a>, April 2011, &lt;<a href="https://www.rfc-editor.org/info/rfc6265">https://www.rfc-editor.org/info/rfc6265</a>&gt;.</dd><dt id="RFC9111">[HTTP-CACHING]</dt><dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., â€œ<a href="https://www.rfc-editor.org/rfc/rfc9111.html">HTTP Caching</a>â€, <a href="https://www.rfc-editor.org/info/std98">STD 98</a>, RFC 9111, <a href="https://dx.doi.org/10.17487/RFC9111">DOI 10.17487/RFC9111</a>, June 2022, &lt;<a href="https://www.rfc-editor.org/info/rfc9111">https://www.rfc-editor.org/info/rfc9111</a>&gt;.</dd><dt id="HTTP-REPLAY">[HTTP-REPLAY]</dt><dd>Thomson, M., Nottingham, M., and W. Tarreau, â€œ<a href="https://www.rfc-editor.org/rfc/rfc8470.html">Using Early Data in HTTP</a>â€, RFC 8470, <a href="https://dx.doi.org/10.17487/RFC8470">DOI 10.17487/RFC8470</a>, September 2018, &lt;<a href="https://www.rfc-editor.org/info/rfc8470">https://www.rfc-editor.org/info/rfc8470</a>&gt;.</dd><dt id="RFC9110">[HTTP]</dt><dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., â€œ<a href="https://www.rfc-editor.org/rfc/rfc9110.html">HTTP Semantics</a>â€, <a href="https://www.rfc-editor.org/info/std97">STD 97</a>, RFC 9110, <a href="https://dx.doi.org/10.17487/RFC9110">DOI 10.17487/RFC9110</a>, June 2022, &lt;<a href="https://www.rfc-editor.org/info/rfc9110">https://www.rfc-editor.org/info/rfc9110</a>&gt;.</dd><dt id="RFC9204">[QPACK]</dt><dd>Krasic, C., Bishop, M., and A. Frindell, Ed., â€œ<a href="https://www.rfc-editor.org/rfc/rfc9204.html">QPACK: Field Compression for HTTP/3</a>â€, RFC 9204, <a href="https://dx.doi.org/10.17487/RFC9204">DOI 10.17487/RFC9204</a>, June 2022, &lt;<a href="https://www.rfc-editor.org/info/rfc9204">https://www.rfc-editor.org/info/rfc9204</a>&gt;.</dd><dt id="QUIC-TRANSPORT">[QUIC-TRANSPORT]</dt><dd>Iyengar, J., Ed. and M. Thomson, Ed., â€œ<a href="https://www.rfc-editor.org/rfc/rfc9000.html">QUIC: A UDP-Based Multiplexed and Secure Transport</a>â€, RFC 9000, <a href="https://dx.doi.org/10.17487/RFC9000">DOI 10.17487/RFC9000</a>, May 2021, &lt;<a href="https://www.rfc-editor.org/info/rfc9000">https://www.rfc-editor.org/info/rfc9000</a>&gt;.</dd><dt id="RFC0793">[RFC0793]</dt><dd>Postel, J., â€œ<a href="https://www.rfc-editor.org/rfc/rfc793.html">Transmission Control Protocol</a>â€, <a href="https://www.rfc-editor.org/info/std7">STD 7</a>, RFC 793, <a href="https://dx.doi.org/10.17487/RFC0793">DOI 10.17487/RFC0793</a>, September 1981, &lt;<a href="https://www.rfc-editor.org/info/rfc793">https://www.rfc-editor.org/info/rfc793</a>&gt;.</dd><dt id="RFC2119">[RFC2119]</dt><dd>Bradner, S., â€œ<a href="https://www.rfc-editor.org/rfc/rfc2119.html">Key words for use in RFCs to Indicate Requirement Levels</a>â€, <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 2119, <a href="https://dx.doi.org/10.17487/RFC2119">DOI 10.17487/RFC2119</a>, March 1997, &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.</dd><dt id="RFC6066">[RFC6066]</dt><dd>Eastlake 3rd, D., â€œ<a href="https://www.rfc-editor.org/rfc/rfc6066.html">Transport Layer Security (TLS) Extensions: Extension Definitions</a>â€, RFC 6066, <a href="https://dx.doi.org/10.17487/RFC6066">DOI 10.17487/RFC6066</a>, January 2011, &lt;<a href="https://www.rfc-editor.org/info/rfc6066">https://www.rfc-editor.org/info/rfc6066</a>&gt;.</dd><dt id="RFC7301">[RFC7301]</dt><dd>Friedl, S., Popov, A., Langley, A., and E. Stephan, â€œ<a href="https://www.rfc-editor.org/rfc/rfc7301.html">Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension</a>â€, RFC 7301, <a href="https://dx.doi.org/10.17487/RFC7301">DOI 10.17487/RFC7301</a>, July 2014, &lt;<a href="https://www.rfc-editor.org/info/rfc7301">https://www.rfc-editor.org/info/rfc7301</a>&gt;.</dd><dt id="RFC8126">[RFC8126]</dt><dd>Cotton, M., Leiba, B., and T. Narten, â€œ<a href="https://www.rfc-editor.org/rfc/rfc8126.html">Guidelines for Writing an IANA Considerations Section in RFCs</a>â€, <a href="https://www.rfc-editor.org/info/bcp26">BCP 26</a>, RFC 8126, <a href="https://dx.doi.org/10.17487/RFC8126">DOI 10.17487/RFC8126</a>, June 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;.</dd><dt id="RFC8174">[RFC8174]</dt><dd>Leiba, B., â€œ<a href="https://www.rfc-editor.org/rfc/rfc8174.html">Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</a>â€, <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 8174, <a href="https://dx.doi.org/10.17487/RFC8174">DOI 10.17487/RFC8174</a>, May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.</dd><dt id="URI">[URI]</dt><dd>Berners-Lee, T., Fielding, R., and L. Masinter, â€œ<a href="https://www.rfc-editor.org/rfc/rfc3986.html">Uniform Resource Identifier (URI): Generic Syntax</a>â€, <a href="https://www.rfc-editor.org/info/std66">STD 66</a>, RFC 3986, <a href="https://dx.doi.org/10.17487/RFC3986">DOI 10.17487/RFC3986</a>, January 2005, &lt;<a href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>&gt;.</dd></dl></div></section><section><div id="rfc.references.3"><h3 id="rfc.section.12.2"><a href="#rfc.section.12.2">12.2.</a> Informative References</h3><dl class="dl-horizontal"><dt id="BREACH">[BREACH]</dt><dd>Gluck, Y., Harris, N., and A. Prado, â€œ<a href="http://breachattack.com/resources/BREACH%20-%20SSL,%20gone%20in%2030%20seconds.pdf">BREACH: Reviving the CRIME Attack</a>â€, July 2013, &lt;<a href="http://breachattack.com/resources/BREACH%20-%20SSL,%20gone%20in%2030%20seconds.pdf">http://breachattack.com/resources/BREACH%20-%20SSL,%20gone%20in%2030%20seconds.pdf</a>&gt;.</dd><dt id="DNS-TERMS">[DNS-TERMS]</dt><dd>Hoffman, P., Sullivan, A., and K. Fujiwara, â€œ<a href="https://www.rfc-editor.org/rfc/rfc8499.html">DNS Terminology</a>â€, <a href="https://www.rfc-editor.org/info/bcp219">BCP 219</a>, RFC 8499, <a href="https://dx.doi.org/10.17487/RFC8499">DOI 10.17487/RFC8499</a>, January 2019, &lt;<a href="https://www.rfc-editor.org/info/rfc8499">https://www.rfc-editor.org/info/rfc8499</a>&gt;.</dd><dt id="HPACK">[HPACK]</dt><dd>Peon, R. and H. Ruellan, â€œ<a href="https://www.rfc-editor.org/rfc/rfc7541.html">HPACK: Header Compression for HTTP/2</a>â€, RFC 7541, <a href="https://dx.doi.org/10.17487/RFC7541">DOI 10.17487/RFC7541</a>, May 2015, &lt;<a href="https://www.rfc-editor.org/info/rfc7541">https://www.rfc-editor.org/info/rfc7541</a>&gt;.</dd><dt id="RFC9112">[HTTP/1.1]</dt><dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., â€œ<a href="https://www.rfc-editor.org/rfc/rfc9112.html">HTTP/1.1</a>â€, <a href="https://www.rfc-editor.org/info/std99">STD 99</a>, RFC 9112, <a href="https://dx.doi.org/10.17487/RFC9112">DOI 10.17487/RFC9112</a>, June 2022, &lt;<a href="https://www.rfc-editor.org/info/rfc9112">https://www.rfc-editor.org/info/rfc9112</a>&gt;.</dd><dt id="RFC9113">[HTTP/2]</dt><dd>Thomson, M., Ed. and C. Benfield, Ed., â€œ<a href="https://www.rfc-editor.org/rfc/rfc9113.html">HTTP/2</a>â€, RFC 9113, <a href="https://dx.doi.org/10.17487/RFC9113">DOI 10.17487/RFC9113</a>, June 2022, &lt;<a href="https://www.rfc-editor.org/info/rfc9113">https://www.rfc-editor.org/info/rfc9113</a>&gt;.</dd><dt id="RFC6585">[RFC6585]</dt><dd>Nottingham, M. and R. Fielding, â€œ<a href="https://www.rfc-editor.org/rfc/rfc6585.html">Additional HTTP Status Codes</a>â€, RFC 6585, <a href="https://dx.doi.org/10.17487/RFC6585">DOI 10.17487/RFC6585</a>, April 2012, &lt;<a href="https://www.rfc-editor.org/info/rfc6585">https://www.rfc-editor.org/info/rfc6585</a>&gt;.</dd><dt id="RFC8164">[RFC8164]</dt><dd>Nottingham, M. and M. Thomson, â€œ<a href="https://www.rfc-editor.org/rfc/rfc8164.html">Opportunistic Security for HTTP/2</a>â€, RFC 8164, <a href="https://dx.doi.org/10.17487/RFC8164">DOI 10.17487/RFC8164</a>, May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8164">https://www.rfc-editor.org/info/rfc8164</a>&gt;.</dd><dt id="TFO">[TFO]</dt><dd>Cheng, Y., Chu, J., Radhakrishnan, S., and A. Jain, â€œ<a href="https://www.rfc-editor.org/rfc/rfc7413.html">TCP Fast Open</a>â€, RFC 7413, <a href="https://dx.doi.org/10.17487/RFC7413">DOI 10.17487/RFC7413</a>, December 2014, &lt;<a href="https://www.rfc-editor.org/info/rfc7413">https://www.rfc-editor.org/info/rfc7413</a>&gt;.</dd><dt id="TLS">[TLS]</dt><dd>Rescorla, E., â€œ<a href="https://www.rfc-editor.org/rfc/rfc8446.html">The Transport Layer Security (TLS) Protocol Version 1.3</a>â€, RFC 8446, <a href="https://dx.doi.org/10.17487/RFC8446">DOI 10.17487/RFC8446</a>, August 2018, &lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;.</dd></dl></div></section></div></section><hr class="hidden-print"><section id="h2-considerations"><h2 id="rfc.section.A" class="np"><a href="#rfc.section.A">Appendix A.</a>&nbsp;<a href="#h2-considerations">Considerations for Transitioning from HTTP/2</a></h2><div id="rfc.section.A.p.1"><p>HTTP/3 is strongly informed by HTTP/2, and it bears many similarities. This section describes the approach taken to design HTTP/3, points out important differences from HTTP/2, and describes how to map HTTP/2 extensions into HTTP/3.</p></div><div id="rfc.section.A.p.2"><p>HTTP/3 begins from the premise that similarity to HTTP/2 is preferable, but not a hard requirement. HTTP/3 departs from HTTP/2 where QUIC differs from TCP, either to take advantage of QUIC features (like streams) or to accommodate important shortcomings (such as a lack of total ordering). While HTTP/3 is similar to HTTP/2 in key aspects, such as the relationship of requests and responses to streams, the details of the HTTP/3 design are substantially different from HTTP/2.</p></div><div id="rfc.section.A.p.3"><p>Some important departures are noted in this section.</p></div><section id="h2-streams"><h3 id="rfc.section.A.1"><a href="#rfc.section.A.1">A.1.</a>&nbsp;<a href="#h2-streams">Streams</a></h3><div id="rfc.section.A.1.p.1"><p>HTTP/3 permits use of a larger number of streams (2<sup>62</sup>-1) than HTTP/2. The same considerations about exhaustion of stream identifier space apply, though the space is significantly larger such that it is likely that other limits in QUIC are reached first, such as the limit on the connection flow-control window.</p></div><div id="rfc.section.A.1.p.2"><p>In contrast to HTTP/2, stream concurrency in HTTP/3 is managed by QUIC. QUIC considers a stream closed when all data has been received and sent data has been acknowledged by the peer. HTTP/2 considers a stream closed when the frame containing the END_STREAM bit has been committed to the transport. As a result, the stream for an equivalent exchange could remain "active" for a longer period of time. HTTP/3 servers might choose to permit a larger number of concurrent client-initiated bidirectional streams to achieve equivalent concurrency to HTTP/2, depending on the expected usage patterns.</p></div><div id="rfc.section.A.1.p.3"><p>In HTTP/2, only request and response bodies (the frame payload of <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.15"></span> frames) are subject to flow control. All HTTP/3 frames are sent on QUIC streams, so all frames on all streams are flow controlled in HTTP/3.</p></div><div id="rfc.section.A.1.p.4"><p>Due to the presence of other unidirectional stream types, HTTP/3 does not rely exclusively on the number of concurrent unidirectional streams to control the number of concurrent in-flight pushes. Instead, HTTP/3 clients use the <a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><span id="rfc.iref.m.22"></span> frame to control the number of pushes received from an HTTP/3 server.</p></div></section><section id="h2-frames"><h3 id="rfc.section.A.2"><a href="#rfc.section.A.2">A.2.</a>&nbsp;<a href="#h2-frames">HTTP Frame Types</a></h3><div id="rfc.section.A.2.p.1"><p>Many framing concepts from HTTP/2 can be elided on QUIC, because the transport deals with them. Because frames are already on a stream, they can omit the stream number. Because frames do not block multiplexing (QUIC's multiplexing occurs below this layer), the support for variable-maximum-length packets can be removed. Because stream termination is handled by QUIC, an END_STREAM flag is not required. This permits the removal of the Flags field from the generic frame layout.</p></div><div id="rfc.section.A.2.p.2"><p>Frame payloads are largely drawn from <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a>. However, QUIC includes many features (e.g., flow control) that are also present in HTTP/2. In these cases, the HTTP mapping does not re-implement them. As a result, several HTTP/2 frame types are not required in HTTP/3. Where an HTTP/2-defined frame is no longer used, the frame ID has been reserved in order to maximize portability between HTTP/2 and HTTP/3 implementations. However, even frame types that appear in both mappings do not have identical semantics.</p></div><div id="rfc.section.A.2.p.3"><p>Many of the differences arise from the fact that HTTP/2 provides an absolute ordering between frames across all streams, while QUIC provides this guarantee on each stream only. As a result, if a frame type makes assumptions that frames from different streams will still be received in the order sent, HTTP/3 will break them.</p></div><div id="rfc.section.A.2.p.4"><p>Some examples of feature adaptations are described below, as well as general guidance to extension frame implementors converting an HTTP/2 extension to HTTP/3.</p></div><section id="h2-diff-priority"><h4 id="rfc.section.A.2.1"><a href="#rfc.section.A.2.1">A.2.1.</a>&nbsp;<a href="#h2-diff-priority">Prioritization Differences</a></h4><div id="rfc.section.A.2.1.p.1"><p>HTTP/2 specifies priority assignments in PRIORITY frames and (optionally) in <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.101"></span> frames. HTTP/3 does not provide a means of signaling priority.</p></div><div id="rfc.section.A.2.1.p.2"><p>Note that, while there is no explicit signaling for priority, this does not mean that prioritization is not important for achieving good performance.</p></div></section><section id="field-compression-differences"><h4 id="rfc.section.A.2.2"><a href="#rfc.section.A.2.2">A.2.2.</a>&nbsp;<a href="#field-compression-differences">Field Compression Differences</a></h4><div id="rfc.section.A.2.2.p.1"><p>HPACK was designed with the assumption of in-order delivery. A sequence of encoded field sections must arrive (and be decoded) at an endpoint in the same order in which they were encoded. This ensures that the dynamic state at the two endpoints remains in sync.</p></div><div id="rfc.section.A.2.2.p.2"><p>Because this total ordering is not provided by QUIC, HTTP/3 uses a modified version of HPACK, called QPACK. QPACK uses a single unidirectional stream to make all modifications to the dynamic table, ensuring a total order of updates. All frames that contain encoded fields merely reference the table state at a given time without modifying it.</p></div><div id="rfc.section.A.2.2.p.3"><p><a href="#RFC9204"><cite title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a> provides additional details.</p></div></section><section id="flow-control-differences"><h4 id="rfc.section.A.2.3"><a href="#rfc.section.A.2.3">A.2.3.</a>&nbsp;<a href="#flow-control-differences">Flow-Control Differences</a></h4><div id="rfc.section.A.2.3.p.1"><p>HTTP/2 specifies a stream flow-control mechanism. Although all HTTP/2 frames are delivered on streams, only the <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.16"></span> frame payload is subject to flow control. QUIC provides flow control for stream data and all HTTP/3 frame types defined in this document are sent on streams. Therefore, all frame headers and payload are subject to flow control.</p></div></section><section id="guidance-for-new-frame-type-definitions"><h4 id="rfc.section.A.2.4"><a href="#rfc.section.A.2.4">A.2.4.</a>&nbsp;<a href="#guidance-for-new-frame-type-definitions">Guidance for New Frame Type Definitions</a></h4><div id="rfc.section.A.2.4.p.1"><p>Frame type definitions in HTTP/3 often use the QUIC variable-length integer encoding. In particular, stream IDs use this encoding, which allows for a larger range of possible values than the encoding used in HTTP/2. Some frames in HTTP/3 use an identifier other than a stream ID (e.g., push IDs). Redefinition of the encoding of extension frame types might be necessary if the encoding includes a stream ID.</p></div><div id="rfc.section.A.2.4.p.2"><p>Because the Flags field is not present in generic HTTP/3 frames, those frames that depend on the presence of flags need to allocate space for flags as part of their frame payload.</p></div><div id="rfc.section.A.2.4.p.3"><p>Other than these issues, frame type HTTP/2 extensions are typically portable to QUIC simply by replacing stream 0 in HTTP/2 with a <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.65"></span> in HTTP/3. HTTP/3 extensions will not assume ordering, but would not be harmed by ordering, and are expected to be portable to HTTP/2.</p></div></section><section id="comparison-of-http2-and-http3-frame-types"><h4 id="rfc.section.A.2.5"><a href="#rfc.section.A.2.5">A.2.5.</a>&nbsp;<a href="#comparison-of-http2-and-http3-frame-types">Comparison of HTTP/2 and HTTP/3 Frame Types</a></h4><div id="rfc.section.A.2.5.p.1"><dl><dt><a href="#frame-data" title="DATA">DATA</a> (0x00)<div id="rfc.iref.d.17"></div>:</dt><dd style="margin-left: 1.5em"><div>Padding is not defined in HTTP/3 frames. See <a href="#frame-data" title="DATA">Section 7.2.1</a>.</div></dd><dt><a href="#frame-headers" title="HEADERS">HEADERS</a> (0x01)<div id="rfc.iref.h.102"></div>:</dt><dd style="margin-left: 1.5em"><div>The PRIORITY region of <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.103"></span> is not defined in HTTP/3 frames. Padding is not defined in HTTP/3 frames. See <a href="#frame-headers" title="HEADERS">Section 7.2.2</a>.</div></dd><dt>PRIORITY (0x02):</dt><dd style="margin-left: 1.5em"><div>As described in <a href="#h2-diff-priority" title="Prioritization Differences">Appendix A.2.1</a>, HTTP/3 does not provide a means of signaling priority.</div></dd><dt>RST_STREAM (0x03):</dt><dd style="margin-left: 1.5em"><div>RST_STREAM frames do not exist in HTTP/3, since QUIC provides stream lifecycle management. The same code point is used for the <a href="#frame-cancel-push" title="CANCEL_PUSH">CANCEL_PUSH</a><span id="rfc.iref.c.66"></span> frame (<a href="#frame-cancel-push" title="CANCEL_PUSH">Section 7.2.3</a>).</div></dd><dt><a href="#frame-settings" title="SETTINGS">SETTINGS</a> (0x04)<div id="rfc.iref.s.19"></div>:</dt><dd style="margin-left: 1.5em"><div><a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.20"></span> frames are sent only at the beginning of the connection. See <a href="#frame-settings" title="SETTINGS">Section 7.2.4</a> and <a href="#h2-settings" title="HTTP/2 SETTINGS Parameters">Appendix A.3</a>.</div></dd><dt><a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a> (0x05)<div id="rfc.iref.p.71"></div>:</dt><dd style="margin-left: 1.5em"><div>The <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.72"></span> frame does not reference a stream; instead, the <a href="#push-streams" title="Push Streams">push stream</a><span id="rfc.iref.p.73"></span> references the <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.74"></span> frame using a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.75"></span>. See <a href="#frame-push-promise" title="PUSH_PROMISE">Section 7.2.5</a>.</div></dd><dt>PING (0x06):</dt><dd style="margin-left: 1.5em"><div>PING frames do not exist in HTTP/3, as QUIC provides equivalent functionality.</div></dd><dt><a href="#frame-goaway" title="GOAWAY">GOAWAY</a> (0x07)<div id="rfc.iref.g.29"></div>:</dt><dd style="margin-left: 1.5em"><div><a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.30"></span> does not contain an error code. In the client-to-server direction, it carries a <a href="#server-push" title="Server Push">push ID</a><span id="rfc.iref.p.76"></span> instead of a server-initiated stream ID. See <a href="#frame-goaway" title="GOAWAY">Section 7.2.6</a>.</div></dd><dt>WINDOW_UPDATE (0x08):</dt><dd style="margin-left: 1.5em"><div>WINDOW_UPDATE frames do not exist in HTTP/3, since QUIC provides flow control.</div></dd><dt>CONTINUATION (0x09):</dt><dd style="margin-left: 1.5em"><div>CONTINUATION frames do not exist in HTTP/3; instead, larger <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.104"></span>/<a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.77"></span> frames than HTTP/2 are permitted.</div></dd></dl></div><div id="rfc.section.A.2.5.p.2"><p>Frame types defined by extensions to HTTP/2 need to be separately registered for HTTP/3 if still applicable. The IDs of frames defined in <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a> have been reserved for simplicity. Note that the frame type space in HTTP/3 is substantially larger (62 bits versus 8 bits), so many HTTP/3 frame types have no equivalent HTTP/2 code points. See <a href="#iana-frames" title="Frame Types">Section 11.2.1</a>.</p></div></section></section><section id="h2-settings"><h3 id="rfc.section.A.3"><a href="#rfc.section.A.3">A.3.</a>&nbsp;<a href="#h2-settings">HTTP/2 SETTINGS Parameters</a></h3><div id="rfc.section.A.3.p.1"><p>An important difference from HTTP/2 is that settings are sent once, as the first frame of the <a href="#control-streams" title="Control Streams">control stream</a><span id="rfc.iref.c.67"></span>, and thereafter cannot change. This eliminates many corner cases around synchronization of changes.</p></div><div id="rfc.section.A.3.p.2"><p>Some transport-level options that HTTP/2 specifies via the <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.21"></span> frame are superseded by QUIC transport parameters in HTTP/3. The HTTP-level setting that is retained in HTTP/3 has the same value as in HTTP/2. The superseded settings are reserved, and their receipt is an error. See <a href="#settings-parameters" title="Defined SETTINGS Parameters">Section 7.2.4.1</a> for discussion of both the retained and reserved values.</p></div><div id="rfc.section.A.3.p.3" class="avoidbreakafter"><p>Below is a listing of how each HTTP/2 <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.22"></span> parameter is mapped:</p></div><div id="rfc.section.A.3.p.4"><dl><dt>SETTINGS_HEADER_TABLE_SIZE (0x01):</dt><dd style="margin-left: 1.5em"><div>See <a href="#RFC9204"><cite title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a>.</div></dd><dt>SETTINGS_ENABLE_PUSH (0x02):</dt><dd style="margin-left: 1.5em"><div>This is removed in favor of the <a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><span id="rfc.iref.m.23"></span> frame, which provides a more granular control over server push. Specifying a setting with the identifier 0x02 (corresponding to the SETTINGS_ENABLE_PUSH parameter) in the HTTP/3 <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.23"></span> frame is an error.</div></dd><dt>SETTINGS_MAX_CONCURRENT_STREAMS (0x03):</dt><dd style="margin-left: 1.5em"><div>QUIC controls the largest open stream ID as part of its flow-control logic. Specifying a setting with the identifier 0x03 (corresponding to the SETTINGS_MAX_CONCURRENT_STREAMS parameter) in the HTTP/3 <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.24"></span> frame is an error.</div></dd><dt>SETTINGS_INITIAL_WINDOW_SIZE (0x04):</dt><dd style="margin-left: 1.5em"><div>QUIC requires both stream and connection flow-control window sizes to be specified in the initial transport handshake. Specifying a setting with the identifier 0x04 (corresponding to the SETTINGS_INITIAL_WINDOW_SIZE parameter) in the HTTP/3 <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.25"></span> frame is an error.</div></dd><dt>SETTINGS_MAX_FRAME_SIZE (0x05):</dt><dd style="margin-left: 1.5em"><div>This setting has no equivalent in HTTP/3. Specifying a setting with the identifier 0x05 (corresponding to the SETTINGS_MAX_FRAME_SIZE parameter) in the HTTP/3 <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.26"></span> frame is an error.</div></dd><dt>SETTINGS_MAX_HEADER_LIST_SIZE (0x06):</dt><dd style="margin-left: 1.5em"><div>This setting identifier has been renamed <a href="#SETTINGS_MAX_FIELD_SECTION_SIZE">SETTINGS_MAX_FIELD_SECTION_SIZE</a><span id="rfc.iref.s.27"></span>.</div></dd></dl></div><div id="rfc.section.A.3.p.5"><p>In HTTP/3, setting values are variable-length integers (6, 14, 30, or 62 bits long) rather than fixed-length 32-bit fields as in HTTP/2. This will often produce a shorter encoding, but can produce a longer encoding for settings that use the full 32-bit space. Settings ported from HTTP/2 might choose to redefine their value to limit it to 30 bits for more efficient encoding or to make use of the 62-bit space if more than 30 bits are required.</p></div><div id="rfc.section.A.3.p.6"><p>Settings need to be defined separately for HTTP/2 and HTTP/3. The IDs of settings defined in <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a> have been reserved for simplicity. Note that the settings identifier space in HTTP/3 is substantially larger (62 bits versus 16 bits), so many HTTP/3 settings have no equivalent HTTP/2 code point. See <a href="#iana-settings" title="Settings Parameters">Section 11.2.2</a>.</p></div><div id="rfc.section.A.3.p.7"><p>As QUIC streams might arrive out of order, endpoints are advised not to wait for the peers' settings to arrive before responding to other streams. See <a href="#settings-initialization" title="Initialization">Section 7.2.4.2</a>.</p></div></section><section id="http2-error-codes"><h3 id="rfc.section.A.4"><a href="#rfc.section.A.4">A.4.</a>&nbsp;<a href="#http2-error-codes">HTTP/2 Error Codes</a></h3><div id="rfc.section.A.4.p.1"><p>QUIC has the same concepts of "stream" and "connection" errors that HTTP/2 provides. However, the differences between HTTP/2 and HTTP/3 mean that error codes are not directly portable between versions.</p></div><div id="rfc.section.A.4.p.2" class="avoidbreakafter"><p>The HTTP/2 error codes defined in <a href="https://www.rfc-editor.org/rfc/rfc9113.html#section-7">Section 7</a> of <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a> logically map to the HTTP/3 error codes as follows:</p></div><div id="rfc.section.A.4.p.3"><dl><dt>NO_ERROR (0x00):</dt><dd style="margin-left: 1.5em"><div><a href="#H3_NO_ERROR">H3_NO_ERROR</a><span id="rfc.iref.h.105"></span> in <a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>.</div></dd><dt>PROTOCOL_ERROR (0x01):</dt><dd style="margin-left: 1.5em"><div>This is mapped to <a href="#H3_GENERAL_PROTOCOL_ERROR">H3_GENERAL_PROTOCOL_ERROR</a><span id="rfc.iref.h.106"></span> except in cases where more specific error codes have been defined. Such cases include <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.107"></span>, <a href="#H3_MESSAGE_ERROR">H3_MESSAGE_ERROR</a><span id="rfc.iref.h.108"></span>, and <a href="#H3_CLOSED_CRITICAL_STREAM">H3_CLOSED_CRITICAL_STREAM</a><span id="rfc.iref.h.109"></span> defined in <a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>.</div></dd><dt>INTERNAL_ERROR (0x02):</dt><dd style="margin-left: 1.5em"><div><a href="#H3_INTERNAL_ERROR">H3_INTERNAL_ERROR</a><span id="rfc.iref.h.110"></span> in <a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>.</div></dd><dt>FLOW_CONTROL_ERROR (0x03):</dt><dd style="margin-left: 1.5em"><div>Not applicable, since QUIC handles flow control.</div></dd><dt>SETTINGS_TIMEOUT (0x04):</dt><dd style="margin-left: 1.5em"><div>Not applicable, since no acknowledgment of <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.28"></span> is defined.</div></dd><dt>STREAM_CLOSED (0x05):</dt><dd style="margin-left: 1.5em"><div>Not applicable, since QUIC handles stream management.</div></dd><dt>FRAME_SIZE_ERROR (0x06):</dt><dd style="margin-left: 1.5em"><div><a href="#H3_FRAME_ERROR">H3_FRAME_ERROR</a><span id="rfc.iref.h.111"></span> error code defined in <a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>.</div></dd><dt>REFUSED_STREAM (0x07):</dt><dd style="margin-left: 1.5em"><div><a href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><span id="rfc.iref.h.112"></span> (in <a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>) is used to indicate that a request was not processed. Otherwise, not applicable because QUIC handles stream management.</div></dd><dt>CANCEL (0x08):</dt><dd style="margin-left: 1.5em"><div><a href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span id="rfc.iref.h.113"></span> in <a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>.</div></dd><dt>COMPRESSION_ERROR (0x09):</dt><dd style="margin-left: 1.5em"><div>Multiple error codes are defined in <a href="#RFC9204"><cite title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a>.</div></dd><dt>CONNECT_ERROR (0x0a):</dt><dd style="margin-left: 1.5em"><div><a href="#H3_CONNECT_ERROR">H3_CONNECT_ERROR</a><span id="rfc.iref.h.114"></span> in <a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>.</div></dd><dt>ENHANCE_YOUR_CALM (0x0b):</dt><dd style="margin-left: 1.5em"><div><a href="#H3_EXCESSIVE_LOAD">H3_EXCESSIVE_LOAD</a><span id="rfc.iref.h.115"></span> in <a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>.</div></dd><dt>INADEQUATE_SECURITY (0x0c):</dt><dd style="margin-left: 1.5em"><div>Not applicable, since QUIC is assumed to provide sufficient security on all connections.</div></dd><dt>HTTP_1_1_REQUIRED (0x0d):</dt><dd style="margin-left: 1.5em"><div><a href="#H3_VERSION_FALLBACK">H3_VERSION_FALLBACK</a><span id="rfc.iref.h.116"></span> in <a href="#http-error-codes" title="HTTP/3 Error Codes">Section 8.1</a>.</div></dd></dl></div><div id="rfc.section.A.4.p.4"><p>Error codes need to be defined for HTTP/2 and HTTP/3 separately. See <a href="#iana-error-codes" title="Error Codes">Section 11.2.3</a>.</p></div><section id="mapping-between-http2-and-http3-errors"><h4 id="rfc.section.A.4.1"><a href="#rfc.section.A.4.1">A.4.1.</a>&nbsp;<a href="#mapping-between-http2-and-http3-errors">Mapping between HTTP/2 and HTTP/3 Errors</a></h4><div id="rfc.section.A.4.1.p.1"><p>An intermediary that converts between HTTP/2 and HTTP/3 may encounter error conditions from either upstream. It is useful to communicate the occurrence of errors to the downstream, but error codes largely reflect connection-local problems that generally do not make sense to propagate.</p></div><div id="rfc.section.A.4.1.p.2"><p>An intermediary that encounters an error from an upstream origin can indicate this by sending an HTTP status code such as 502 (Bad Gateway), which is suitable for a broad class of errors.</p></div><div id="rfc.section.A.4.1.p.3"><p>There are some rare cases where it is beneficial to propagate the error by mapping it to the closest matching error type to the receiver. For example, an intermediary that receives an HTTP/2 <a href="#errors" title="Error Handling">stream error</a><span id="rfc.iref.s.29"></span> of type REFUSED_STREAM from the origin has a clear signal that the request was not processed and that the request is safe to retry. Propagating this error condition to the client as an HTTP/3 <a href="#errors" title="Error Handling">stream error</a><span id="rfc.iref.s.30"></span> of type <a href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><span id="rfc.iref.h.117"></span> allows the client to take the action it deems most appropriate. In the reverse direction, the intermediary might deem it beneficial to pass on client request cancellations that are indicated by terminating a stream with <a href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span id="rfc.iref.h.118"></span>; see <a href="#request-cancellation" title="Request Cancellation and Rejection">Section 4.1.1</a>.</p></div><div id="rfc.section.A.4.1.p.4"><p>Conversion between errors is described in the logical mapping. The error codes are defined in non-overlapping spaces in order to protect against accidental conversion that could result in the use of inappropriate or unknown error codes for the target version. An intermediary is permitted to promote <a href="#errors" title="Error Handling">stream errors</a><span id="rfc.iref.s.31"></span> to <a href="#errors" title="Error Handling">connection errors</a><span id="rfc.iref.c.68"></span> but they should be aware of the cost to the HTTP/3 connection for what might be a temporary or intermittent error.</p></div></section></section></section><hr class="hidden-print"><section id="acknowledgments"><h2 id="rfc.section.unnumbered-4" class="np"><a href="#acknowledgments">Acknowledgments</a></h2><div id="rfc.section.unnumbered-4.p.1"><p>Robbie Shade and Mike Warres were the authors of draft-shade-quic-http2-mapping, a precursor of this document.</p></div><div id="rfc.section.unnumbered-4.p.2" class="avoidbreakafter"><p>The IETF QUIC Working Group received an enormous amount of support from many people. Among others, the following people provided substantial contributions to this document:</p></div><div id="rfc.section.unnumbered-4.p.3"><ul><li><div><p>Bence Beky</p></div> </li><li><div><p>Daan De Meyer</p></div> </li><li><div><p>Martin Duke</p></div> </li><li><div><p>Roy Fielding</p></div> </li><li><div><p>Alan Frindell</p></div> </li><li><div><p>Alessandro Ghedini</p></div> </li><li><div><p>Nick Harper</p></div> </li><li><div><p>Ryan Hamilton</p></div> </li><li><div><p>Christian Huitema</p></div> </li><li><div><p>Subodh Iyengar</p></div> </li><li><div><p>Robin Marx</p></div> </li><li><div><p>Patrick McManus</p></div> </li><li><div><p>Luca Niccolini</p></div> </li><li><div><p>å¥¥ ä¸€ç©‚ (Kazuho Oku)</p></div> </li><li><div><p>Lucas Pardue</p></div> </li><li><div><p>Roberto Peon</p></div> </li><li><div><p>Julian Reschke</p></div> </li><li><div><p>Eric Rescorla</p></div> </li><li><div><p>Martin Seemann</p></div> </li><li><div><p>Ben Schwartz</p></div> </li><li><div><p>Ian Swett</p></div> </li><li><div><p>Willy Taureau</p></div> </li><li><div><p>Martin Thomson</p></div> </li><li><div><p>Dmitri Tikhonov</p></div> </li><li><div><p>Tatsuhiro Tsujikawa</p></div> </li></ul></div><div id="rfc.section.unnumbered-4.p.4"><p>A portion of Mike Bishop's contribution was supported by Microsoft during his employment there.</p></div></section><hr class="hidden-print"><section id="rfc.index" class="np"><h2><a href="#rfc.index">Index</a></h2><p class="hidden-print"><a href="#rfc.index.C">C</a> <a href="#rfc.index.D">D</a> <a href="#rfc.index.G">G</a> <a href="#rfc.index.H">H</a> <a href="#rfc.index.M">M</a> <a href="#rfc.index.P">P</a> <a href="#rfc.index.R">R</a> <a href="#rfc.index.S">S</a> </p><div class="print2col"><ul class="ind"><li><a id="rfc.index.C" href="#rfc.index.C"><b>C</b></a><ul><li>CANCEL_PUSH&nbsp;&nbsp;<a href="#rfc.iref.c.2">2</a>, <a href="#rfc.iref.c.10">4.6</a>, <a href="#rfc.iref.c.11">4.6</a>, <a href="#rfc.iref.c.24">7</a>, <a href="#rfc.section.7.2.3"><b>7.2.3</b></a>, <a href="#rfc.iref.c.45">7.2.5</a>, <a href="#rfc.iref.c.55">7.2.7</a>, <a href="#rfc.iref.c.64">11.2.1</a>, <a href="#rfc.iref.c.66">A.2.5</a></li><li>connection error&nbsp;&nbsp;<a href="#rfc.iref.c.3">2.2</a>, <a href="#rfc.iref.c.5">4.1</a>, <a href="#rfc.iref.c.6">4.1</a>, <a href="#rfc.iref.c.7">4.4</a>, <a href="#rfc.iref.c.8">4.4</a>, <a href="#rfc.iref.c.9">4.6</a>, <a href="#rfc.iref.c.12">5.2</a>, <a href="#rfc.iref.c.13">6.1</a>, <a href="#rfc.iref.c.17">6.2</a>, <a href="#rfc.iref.c.18">6.2.1</a>, <a href="#rfc.iref.c.19">6.2.1</a>, <a href="#rfc.iref.c.20">6.2.1</a>, <a href="#rfc.iref.c.21">6.2.2</a>, <a href="#rfc.iref.c.22">6.2.2</a>, <a href="#rfc.iref.c.25">7.1</a>, <a href="#rfc.iref.c.26">7.1</a>, <a href="#rfc.iref.c.28">7.2.1</a>, <a href="#rfc.iref.c.30">7.2.2</a>, <a href="#rfc.iref.c.33">7.2.3</a>, <a href="#rfc.iref.c.34">7.2.3</a>, <a href="#rfc.iref.c.35">7.2.3</a>, <a href="#rfc.iref.c.38">7.2.4</a>, <a href="#rfc.iref.c.40">7.2.4</a>, <a href="#rfc.iref.c.41">7.2.4</a>, <a href="#rfc.iref.c.42">7.2.4.1</a>, <a href="#rfc.iref.c.43">7.2.4.2</a>, <a href="#rfc.iref.c.44">7.2.4.2</a>, <a href="#rfc.iref.c.46">7.2.5</a>, <a href="#rfc.iref.c.47">7.2.5</a>, <a href="#rfc.iref.c.49">7.2.5</a>, <a href="#rfc.iref.c.50">7.2.5</a>, <a href="#rfc.iref.c.52">7.2.6</a>, <a href="#rfc.iref.c.54">7.2.6</a>, <a href="#rfc.iref.c.57">7.2.7</a>, <a href="#rfc.iref.c.58">7.2.7</a>, <a href="#rfc.iref.c.59">7.2.7</a>, <a href="#rfc.iref.c.60">7.2.8</a>, <a href="#rfc.section.8"><b>8</b></a>, <a href="#rfc.iref.c.63">10.5</a>, <a href="#rfc.iref.c.68">A.4.1</a></li><li>control stream&nbsp;&nbsp;<a href="#rfc.iref.c.1">2</a>, <a href="#rfc.iref.c.4">3.2</a>, <a href="#rfc.iref.c.14">6.2</a>, <a href="#rfc.iref.c.15">6.2</a>, <a href="#rfc.iref.c.16">6.2</a>, <a href="#rfc.section.6.2.1"><b>6.2.1</b></a>, <a href="#rfc.iref.c.23">7</a>, <a href="#rfc.iref.c.27">7.2.1</a>, <a href="#rfc.iref.c.29">7.2.2</a>, <a href="#rfc.iref.c.31">7.2.3</a>, <a href="#rfc.iref.c.32">7.2.3</a>, <a href="#rfc.iref.c.36">7.2.4</a>, <a href="#rfc.iref.c.37">7.2.4</a>, <a href="#rfc.iref.c.39">7.2.4</a>, <a href="#rfc.iref.c.48">7.2.5</a>, <a href="#rfc.iref.c.51">7.2.6</a>, <a href="#rfc.iref.c.53">7.2.6</a>, <a href="#rfc.iref.c.56">7.2.7</a>, <a href="#rfc.iref.c.61">8.1</a>, <a href="#rfc.iref.c.62">9</a>, <a href="#rfc.iref.c.65">A.2.4</a>, <a href="#rfc.iref.c.67">A.3</a></li></ul></li><li><a id="rfc.index.D" href="#rfc.index.D"><b>D</b></a><ul><li>DATA&nbsp;&nbsp;<a href="#rfc.iref.d.1">2</a>, <a href="#rfc.iref.d.2">4.1</a>, <a href="#rfc.iref.d.3">4.1</a>, <a href="#rfc.iref.d.4">4.1</a>, <a href="#rfc.iref.d.5">4.1.2</a>, <a href="#rfc.iref.d.6">4.1.2</a>, <a href="#rfc.iref.d.7">4.4</a>, <a href="#rfc.iref.d.8">4.4</a>, <a href="#rfc.iref.d.9">4.4</a>, <a href="#rfc.iref.d.10">4.4</a>, <a href="#rfc.iref.d.11">4.4</a>, <a href="#rfc.iref.d.12">4.6</a>, <a href="#rfc.iref.d.13">7</a>, <a href="#rfc.section.7.2.1"><b>7.2.1</b></a>, <a href="#rfc.iref.d.14">11.2.1</a>, <a href="#rfc.iref.d.15">A.1</a>, <a href="#rfc.iref.d.16">A.2.3</a>, <a href="#rfc.iref.d.17">A.2.5</a></li></ul></li><li><a id="rfc.index.G" href="#rfc.index.G"><b>G</b></a><ul><li>GOAWAY&nbsp;&nbsp;<a href="#rfc.iref.g.1">3.3</a>, <a href="#rfc.iref.g.2">5.2</a>, <a href="#rfc.iref.g.3">5.2</a>, <a href="#rfc.iref.g.4">5.2</a>, <a href="#rfc.iref.g.5">5.2</a>, <a href="#rfc.iref.g.6">5.2</a>, <a href="#rfc.iref.g.7">5.2</a>, <a href="#rfc.iref.g.8">5.2</a>, <a href="#rfc.iref.g.9">5.2</a>, <a href="#rfc.iref.g.10">5.2</a>, <a href="#rfc.iref.g.11">5.2</a>, <a href="#rfc.iref.g.12">5.2</a>, <a href="#rfc.iref.g.13">5.2</a>, <a href="#rfc.iref.g.14">5.2</a>, <a href="#rfc.iref.g.15">5.2</a>, <a href="#rfc.iref.g.16">5.2</a>, <a href="#rfc.iref.g.17">5.2</a>, <a href="#rfc.iref.g.18">5.2</a>, <a href="#rfc.iref.g.19">5.2</a>, <a href="#rfc.iref.g.20">5.2</a>, <a href="#rfc.iref.g.21">5.2</a>, <a href="#rfc.iref.g.22">5.2</a>, <a href="#rfc.iref.g.23">5.2</a>, <a href="#rfc.iref.g.24">5.3</a>, <a href="#rfc.iref.g.25">5.3</a>, <a href="#rfc.iref.g.26">5.4</a>, <a href="#rfc.iref.g.27">7</a>, <a href="#rfc.section.7.2.6"><b>7.2.6</b></a>, <a href="#rfc.iref.g.28">11.2.1</a>, <a href="#rfc.iref.g.29">A.2.5</a>, <a href="#rfc.iref.g.30">A.2.5</a></li></ul></li><li><a id="rfc.index.H" href="#rfc.index.H"><b>H</b></a><ul><li>H3_CLOSED_CRITICAL_STREAM&nbsp;&nbsp;<a href="#rfc.iref.h.31">6.2.1</a>, <a href="#rfc.iref.h.66">8.1</a>, <a href="#rfc.iref.h.88">11.2.3</a>, <a href="#rfc.iref.h.109">A.4</a></li><li>H3_CONNECT_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.21">4.4</a>, <a href="#rfc.iref.h.77">8.1</a>, <a href="#rfc.iref.h.99">11.2.3</a>, <a href="#rfc.iref.h.114">A.4</a></li><li>H3_EXCESSIVE_LOAD&nbsp;&nbsp;<a href="#rfc.iref.h.69">8.1</a>, <a href="#rfc.iref.h.82">10.5</a>, <a href="#rfc.iref.h.91">11.2.3</a>, <a href="#rfc.iref.h.115">A.4</a></li><li>H3_FRAME_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.36">7.1</a>, <a href="#rfc.iref.h.37">7.1</a>, <a href="#rfc.iref.h.68">8.1</a>, <a href="#rfc.iref.h.90">11.2.3</a>, <a href="#rfc.iref.h.111">A.4</a></li><li>H3_FRAME_UNEXPECTED&nbsp;&nbsp;<a href="#rfc.iref.h.4">4.1</a>, <a href="#rfc.iref.h.8">4.1</a>, <a href="#rfc.iref.h.20">4.4</a>, <a href="#rfc.iref.h.38">7.2.1</a>, <a href="#rfc.iref.h.39">7.2.2</a>, <a href="#rfc.iref.h.42">7.2.3</a>, <a href="#rfc.iref.h.45">7.2.4</a>, <a href="#rfc.iref.h.46">7.2.4</a>, <a href="#rfc.iref.h.53">7.2.5</a>, <a href="#rfc.iref.h.54">7.2.5</a>, <a href="#rfc.iref.h.56">7.2.6</a>, <a href="#rfc.iref.h.57">7.2.7</a>, <a href="#rfc.iref.h.58">7.2.7</a>, <a href="#rfc.iref.h.60">7.2.8</a>, <a href="#rfc.iref.h.67">8.1</a>, <a href="#rfc.iref.h.89">11.2.3</a>, <a href="#rfc.iref.h.107">A.4</a></li><li>H3_GENERAL_PROTOCOL_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.52">7.2.5</a>, <a href="#rfc.iref.h.63">8.1</a>, <a href="#rfc.iref.h.85">11.2.3</a>, <a href="#rfc.iref.h.106">A.4</a></li><li>H3_ID_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.22">4.6</a>, <a href="#rfc.iref.h.25">5.2</a>, <a href="#rfc.iref.h.33">6.2.2</a>, <a href="#rfc.iref.h.43">7.2.3</a>, <a href="#rfc.iref.h.44">7.2.3</a>, <a href="#rfc.iref.h.51">7.2.5</a>, <a href="#rfc.iref.h.55">7.2.6</a>, <a href="#rfc.iref.h.59">7.2.7</a>, <a href="#rfc.iref.h.70">8.1</a>, <a href="#rfc.iref.h.92">11.2.3</a></li><li>H3_INTERNAL_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.64">8.1</a>, <a href="#rfc.iref.h.86">11.2.3</a>, <a href="#rfc.iref.h.110">A.4</a></li><li>H3_MESSAGE_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.18">4.1.2</a>, <a href="#rfc.iref.h.76">8.1</a>, <a href="#rfc.iref.h.98">11.2.3</a>, <a href="#rfc.iref.h.108">A.4</a></li><li>H3_MISSING_SETTINGS&nbsp;&nbsp;<a href="#rfc.iref.h.29">6.2.1</a>, <a href="#rfc.iref.h.72">8.1</a>, <a href="#rfc.iref.h.94">11.2.3</a></li><li>H3_NO_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.11">4.1</a>, <a href="#rfc.iref.h.26">5.2</a>, <a href="#rfc.iref.h.34">6.2.3</a>, <a href="#rfc.iref.h.61">8</a>, <a href="#rfc.iref.h.62">8.1</a>, <a href="#rfc.iref.h.79">8.1</a>, <a href="#rfc.iref.h.80">8.1</a>, <a href="#rfc.iref.h.84">11.2.3</a>, <a href="#rfc.iref.h.105">A.4</a></li><li>H3_REQUEST_CANCELLED&nbsp;&nbsp;<a href="#rfc.iref.h.14">4.1.1</a>, <a href="#rfc.iref.h.15">4.1.1</a>, <a href="#rfc.iref.h.24">4.6</a>, <a href="#rfc.iref.h.40">7.2.3</a>, <a href="#rfc.iref.h.41">7.2.3</a>, <a href="#rfc.iref.h.74">8.1</a>, <a href="#rfc.iref.h.96">11.2.3</a>, <a href="#rfc.iref.h.113">A.4</a>, <a href="#rfc.iref.h.118">A.4.1</a></li><li>H3_REQUEST_INCOMPLETE&nbsp;&nbsp;<a href="#rfc.iref.h.10">4.1</a>, <a href="#rfc.iref.h.75">8.1</a>, <a href="#rfc.iref.h.97">11.2.3</a></li><li>H3_REQUEST_REJECTED&nbsp;&nbsp;<a href="#rfc.iref.h.12">4.1.1</a>, <a href="#rfc.iref.h.13">4.1.1</a>, <a href="#rfc.iref.h.16">4.1.1</a>, <a href="#rfc.iref.h.17">4.1.1</a>, <a href="#rfc.iref.h.73">8.1</a>, <a href="#rfc.iref.h.95">11.2.3</a>, <a href="#rfc.iref.h.112">A.4</a>, <a href="#rfc.iref.h.117">A.4.1</a></li><li>H3_SETTINGS_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.47">7.2.4</a>, <a href="#rfc.iref.h.48">7.2.4.1</a>, <a href="#rfc.iref.h.49">7.2.4.2</a>, <a href="#rfc.iref.h.50">7.2.4.2</a>, <a href="#rfc.iref.h.71">8.1</a>, <a href="#rfc.iref.h.93">11.2.3</a></li><li>H3_STREAM_CREATION_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.27">6.1</a>, <a href="#rfc.iref.h.28">6.2</a>, <a href="#rfc.iref.h.30">6.2.1</a>, <a href="#rfc.iref.h.32">6.2.2</a>, <a href="#rfc.iref.h.65">8.1</a>, <a href="#rfc.iref.h.87">11.2.3</a></li><li>H3_VERSION_FALLBACK&nbsp;&nbsp;<a href="#rfc.iref.h.78">8.1</a>, <a href="#rfc.iref.h.100">11.2.3</a>, <a href="#rfc.iref.h.116">A.4</a></li><li>HEADERS&nbsp;&nbsp;<a href="#rfc.iref.h.1">2</a>, <a href="#rfc.iref.h.2">4.1</a>, <a href="#rfc.iref.h.3">4.1</a>, <a href="#rfc.iref.h.5">4.1</a>, <a href="#rfc.iref.h.6">4.1</a>, <a href="#rfc.iref.h.7">4.1</a>, <a href="#rfc.iref.h.9">4.1</a>, <a href="#rfc.iref.h.19">4.4</a>, <a href="#rfc.iref.h.23">4.6</a>, <a href="#rfc.iref.h.35">7</a>, <a href="#rfc.section.7.2.2"><b>7.2.2</b></a>, <a href="#rfc.iref.h.81">9</a>, <a href="#rfc.iref.h.83">11.2.1</a>, <a href="#rfc.iref.h.101">A.2.1</a>, <a href="#rfc.iref.h.102">A.2.5</a>, <a href="#rfc.iref.h.103">A.2.5</a>, <a href="#rfc.iref.h.104">A.2.5</a></li></ul></li><li><a id="rfc.index.M" href="#rfc.index.M"><b>M</b></a><ul><li>malformed&nbsp;&nbsp;<a href="#rfc.iref.m.2">4.1</a>, <a href="#rfc.section.4.1.2"><b>4.1.2</b></a>, <a href="#rfc.iref.m.3">4.2</a>, <a href="#rfc.iref.m.4">4.2</a>, <a href="#rfc.iref.m.5">4.2</a>, <a href="#rfc.iref.m.6">4.3</a>, <a href="#rfc.iref.m.7">4.3</a>, <a href="#rfc.iref.m.8">4.3.1</a>, <a href="#rfc.iref.m.9">4.3.2</a>, <a href="#rfc.iref.m.10">4.4</a>, <a href="#rfc.iref.m.17">8.1</a>, <a href="#rfc.iref.m.18">10.3</a>, <a href="#rfc.iref.m.19">10.3</a>, <a href="#rfc.iref.m.20">10.5.1</a></li><li>MAX_PUSH_ID&nbsp;&nbsp;<a href="#rfc.iref.m.1">2</a>, <a href="#rfc.iref.m.11">4.6</a>, <a href="#rfc.iref.m.12">4.6</a>, <a href="#rfc.iref.m.13">4.6</a>, <a href="#rfc.iref.m.14">4.6</a>, <a href="#rfc.iref.m.15">7</a>, <a href="#rfc.iref.m.16">7.2.5</a>, <a href="#rfc.section.7.2.7"><b>7.2.7</b></a>, <a href="#rfc.iref.m.21">11.2.1</a>, <a href="#rfc.iref.m.22">A.1</a>, <a href="#rfc.iref.m.23">A.3</a></li></ul></li><li><a id="rfc.index.P" href="#rfc.index.P"><b>P</b></a><ul><li>push ID&nbsp;&nbsp;<a href="#rfc.section.4.6"><b>4.6</b></a>, <a href="#rfc.iref.p.24">5.2</a>, <a href="#rfc.iref.p.25">5.2</a>, <a href="#rfc.iref.p.26">5.2</a>, <a href="#rfc.iref.p.28">6.2.2</a>, <a href="#rfc.iref.p.29">6.2.2</a>, <a href="#rfc.iref.p.30">6.2.2</a>, <a href="#rfc.iref.p.35">7.2.3</a>, <a href="#rfc.iref.p.44">7.2.3</a>, <a href="#rfc.iref.p.45">7.2.3</a>, <a href="#rfc.iref.p.46">7.2.3</a>, <a href="#rfc.iref.p.48">7.2.3</a>, <a href="#rfc.iref.p.50">7.2.5</a>, <a href="#rfc.iref.p.52">7.2.5</a>, <a href="#rfc.iref.p.53">7.2.5</a>, <a href="#rfc.iref.p.54">7.2.5</a>, <a href="#rfc.iref.p.55">7.2.5</a>, <a href="#rfc.iref.p.56">7.2.5</a>, <a href="#rfc.iref.p.57">7.2.5</a>, <a href="#rfc.iref.p.58">7.2.5</a>, <a href="#rfc.iref.p.59">7.2.6</a>, <a href="#rfc.iref.p.60">7.2.7</a>, <a href="#rfc.iref.p.63">7.2.7</a>, <a href="#rfc.iref.p.64">7.2.7</a>, <a href="#rfc.iref.p.65">7.2.7</a>, <a href="#rfc.iref.p.66">7.2.7</a>, <a href="#rfc.iref.p.67">8.1</a>, <a href="#rfc.iref.p.75">A.2.5</a>, <a href="#rfc.iref.p.76">A.2.5</a></li><li>push stream&nbsp;&nbsp;<a href="#rfc.iref.p.5">4.1</a>, <a href="#rfc.iref.p.7">4.1</a>, <a href="#rfc.iref.p.9">4.6</a>, <a href="#rfc.iref.p.11">4.6</a>, <a href="#rfc.iref.p.12">4.6</a>, <a href="#rfc.iref.p.18">4.6</a>, <a href="#rfc.iref.p.20">4.6</a>, <a href="#rfc.iref.p.22">4.6</a>, <a href="#rfc.iref.p.27">6.2</a>, <a href="#rfc.section.6.2.2"><b>6.2.2</b></a>, <a href="#rfc.iref.p.31">7</a>, <a href="#rfc.iref.p.33">7.2.2</a>, <a href="#rfc.iref.p.34">7.2.3</a>, <a href="#rfc.iref.p.36">7.2.3</a>, <a href="#rfc.iref.p.37">7.2.3</a>, <a href="#rfc.iref.p.38">7.2.3</a>, <a href="#rfc.iref.p.39">7.2.3</a>, <a href="#rfc.iref.p.40">7.2.3</a>, <a href="#rfc.iref.p.41">7.2.3</a>, <a href="#rfc.iref.p.42">7.2.3</a>, <a href="#rfc.iref.p.43">7.2.3</a>, <a href="#rfc.iref.p.51">7.2.5</a>, <a href="#rfc.iref.p.62">7.2.7</a>, <a href="#rfc.iref.p.73">A.2.5</a></li><li>PUSH_PROMISE&nbsp;&nbsp;<a href="#rfc.iref.p.1">2</a>, <a href="#rfc.iref.p.2">4.1</a>, <a href="#rfc.iref.p.3">4.1</a>, <a href="#rfc.iref.p.4">4.1</a>, <a href="#rfc.iref.p.6">4.1</a>, <a href="#rfc.iref.p.8">4.1</a>, <a href="#rfc.iref.p.10">4.6</a>, <a href="#rfc.iref.p.13">4.6</a>, <a href="#rfc.iref.p.14">4.6</a>, <a href="#rfc.iref.p.15">4.6</a>, <a href="#rfc.iref.p.16">4.6</a>, <a href="#rfc.iref.p.17">4.6</a>, <a href="#rfc.iref.p.19">4.6</a>, <a href="#rfc.iref.p.21">4.6</a>, <a href="#rfc.iref.p.23">4.6</a>, <a href="#rfc.iref.p.32">7</a>, <a href="#rfc.iref.p.47">7.2.3</a>, <a href="#rfc.iref.p.49">7.2.3</a>, <a href="#rfc.section.7.2.5"><b>7.2.5</b></a>, <a href="#rfc.iref.p.61">7.2.7</a>, <a href="#rfc.iref.p.68">10.4</a>, <a href="#rfc.iref.p.69">10.5</a>, <a href="#rfc.iref.p.70">11.2.1</a>, <a href="#rfc.iref.p.71">A.2.5</a>, <a href="#rfc.iref.p.72">A.2.5</a>, <a href="#rfc.iref.p.74">A.2.5</a>, <a href="#rfc.iref.p.77">A.2.5</a></li></ul></li><li><a id="rfc.index.R" href="#rfc.index.R"><b>R</b></a><ul><li>request stream&nbsp;&nbsp;<a href="#rfc.iref.r.1">4.1</a>, <a href="#rfc.iref.r.2">4.1</a>, <a href="#rfc.iref.r.3">4.1</a>, <a href="#rfc.iref.r.4">4.1.1</a>, <a href="#rfc.iref.r.5">4.1.1</a>, <a href="#rfc.iref.r.6">4.4</a>, <a href="#rfc.iref.r.7">4.4</a>, <a href="#rfc.iref.r.8">4.6</a>, <a href="#rfc.iref.r.9">4.6</a>, <a href="#rfc.iref.r.10">4.6</a>, <a href="#rfc.iref.r.11">4.6</a>, <a href="#rfc.section.6.1"><b>6.1</b></a>, <a href="#rfc.iref.r.12">7</a>, <a href="#rfc.iref.r.13">7.2.2</a>, <a href="#rfc.iref.r.14">7.2.5</a></li></ul></li><li><a id="rfc.index.S" href="#rfc.index.S"><b>S</b></a><ul><li>SETTINGS&nbsp;&nbsp;<a href="#rfc.iref.s.2">3.2</a>, <a href="#rfc.iref.s.3">3.2</a>, <a href="#rfc.iref.s.7">6.2.1</a>, <a href="#rfc.iref.s.8">7</a>, <a href="#rfc.iref.s.9">7</a>, <a href="#rfc.section.7.2.4"><b>7.2.4</b></a>, <a href="#rfc.iref.s.11">8.1</a>, <a href="#rfc.iref.s.12">8.1</a>, <a href="#rfc.iref.s.13">9</a>, <a href="#rfc.iref.s.14">10.5</a>, <a href="#rfc.iref.s.16">11.2.1</a>, <a href="#rfc.iref.s.17">11.2.3</a>, <a href="#rfc.iref.s.18">11.2.3</a>, <a href="#rfc.iref.s.19">A.2.5</a>, <a href="#rfc.iref.s.20">A.2.5</a>, <a href="#rfc.iref.s.21">A.3</a>, <a href="#rfc.iref.s.22">A.3</a>, <a href="#rfc.iref.s.23">A.3</a>, <a href="#rfc.iref.s.24">A.3</a>, <a href="#rfc.iref.s.25">A.3</a>, <a href="#rfc.iref.s.26">A.3</a>, <a href="#rfc.iref.s.28">A.4</a></li><li>SETTINGS_MAX_FIELD_SECTION_SIZE&nbsp;&nbsp;<a href="#rfc.iref.s.5">4.2.2</a>, <a href="#rfc.iref.s.10">7.2.4.1</a>, <a href="#rfc.iref.s.15">10.5.1</a>, <a href="#rfc.iref.s.27">A.3</a></li><li>stream error&nbsp;&nbsp;<a href="#rfc.iref.s.1">2.2</a>, <a href="#rfc.iref.s.4">4.1.2</a>, <a href="#rfc.iref.s.6">4.4</a>, <a href="#rfc.section.8"><b>8</b></a>, <a href="#rfc.iref.s.29">A.4.1</a>, <a href="#rfc.iref.s.30">A.4.1</a>, <a href="#rfc.iref.s.31">A.4.1</a></li></ul></li></ul></div></section><hr class="hidden-print"><section id="rfc.authors" class="np"><h2><a href="#rfc.authors">Author's Address</a></h2><address><b>Mike Bishop</b> (editor)<br>Akamai<br>EMail: <a href="mailto:mbishop@evequefou.be">mbishop@evequefou.be</a></address></section></div></div></div><script src="/assets/node_modules/jquery/dist/jquery.min.js"></script><script src="/assets/node_modules/bootstrap/dist/js/bootstrap.min.js"></script></body></html>